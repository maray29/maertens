var Lc=Object.defineProperty;var Fc=(ae,Je,fi)=>Je in ae?Lc(ae,Je,{enumerable:!0,configurable:!0,writable:!0,value:fi}):ae[Je]=fi;var rs=(ae,Je,fi)=>(Fc(ae,typeof Je!="symbol"?Je+"":Je,fi),fi);(function(ae){typeof define=="function"&&define.amd?define(ae):ae()})(function(){"use strict";function ae(o,t,e){return Math.max(o,Math.min(t,e))}class Je{advance(t){var e;if(!this.isRunning)return;let i=!1;if(this.lerp)this.value=(1-(s=this.lerp))*this.value+s*this.to,Math.round(this.value)===this.to&&(this.value=this.to,i=!0);else{this.currentTime+=t;const r=ae(0,this.currentTime/this.duration,1);i=r>=1;const n=i?1:this.easing(r);this.value=this.from+(this.to-this.from)*n}var s;(e=this.onUpdate)==null||e.call(this,this.value,{completed:i}),i&&this.stop()}stop(){this.isRunning=!1}fromTo(t,e,{lerp:i=.1,duration:s=1,easing:r=a=>a,onUpdate:n}){this.from=this.value=t,this.to=e,this.lerp=i,this.duration=s,this.easing=r,this.currentTime=0,this.isRunning=!0,this.onUpdate=n}}let fi=()=>({events:{},emit(o,...t){let e=this.events[o]||[];for(let i=0,s=e.length;i<s;i++)e[i](...t)},on(o,t){var e;return(e=this.events[o])!=null&&e.push(t)||(this.events[o]=[t]),()=>{var i;this.events[o]=(i=this.events[o])==null?void 0:i.filter(s=>t!==s)}}});class Pa{constructor(t){this.onResize=([e])=>{if(e){const{width:i,height:s}=e.contentRect;this.width=i,this.height=s}},this.onWindowResize=()=>{this.width=window.innerWidth,this.height=window.innerHeight},this.element=t,t===window?(window.addEventListener("resize",this.onWindowResize),this.onWindowResize()):(this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.resizeObserver=new ResizeObserver(this.onResize),this.resizeObserver.observe(this.element))}destroy(){window.removeEventListener("resize",this.onWindowResize),this.resizeObserver.disconnect()}}class qh{constructor(t,{wheelMultiplier:e=1,touchMultiplier:i=2,normalizeWheel:s=!1}){this.onTouchStart=r=>{const{pageX:n,pageY:a}=r.targetTouches?r.targetTouches[0]:r;this.touchStart.x=n,this.touchStart.y=a},this.onTouchMove=r=>{const{pageX:n,pageY:a}=r.targetTouches?r.targetTouches[0]:r,h=-(n-this.touchStart.x)*this.touchMultiplier,l=-(a-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=n,this.touchStart.y=a,this.emitter.emit("scroll",{type:"touch",deltaX:h,deltaY:l,event:r})},this.onWheel=r=>{let{deltaX:n,deltaY:a}=r;this.normalizeWheel&&(n=ae(-100,n,100),a=ae(-100,a,100)),n*=this.wheelMultiplier,a*=this.wheelMultiplier,this.emitter.emit("scroll",{type:"wheel",deltaX:n,deltaY:a,event:r})},this.element=t,this.wheelMultiplier=e,this.touchMultiplier=i,this.normalizeWheel=s,this.touchStart={x:null,y:null},this.emitter=fi(),this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1})}on(t,e){return this.emitter.on(t,e)}destroy(){this.emitter.events={},this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1})}}class jh{constructor({direction:t,gestureDirection:e,mouseMultiplier:i,smooth:s,wrapper:r=window,content:n=document.documentElement,smoothWheel:a=s==null||s,smoothTouch:h=!1,duration:l,easing:u=v=>Math.min(1,1.001-Math.pow(2,-10*v)),lerp:f=l?null:.1,infinite:c=!1,orientation:d=t??"vertical",gestureOrientation:_=e??"vertical",touchMultiplier:p=2,wheelMultiplier:g=i??1,normalizeWheel:m=!0}={}){this.onVirtualScroll=({type:v,deltaX:T,deltaY:x,event:b})=>{if(b.ctrlKey||this.options.gestureOrientation==="vertical"&&x===0||this.options.gestureOrientation==="horizontal"&&T===0||b.composedPath().find(w=>w==null||w.hasAttribute==null?void 0:w.hasAttribute("data-lenis-prevent")))return;if(this.isStopped||this.isLocked)return void b.preventDefault();if(this.isSmooth=this.options.smoothTouch&&v==="touch"||this.options.smoothWheel&&v==="wheel",!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();b.preventDefault();let P=x;this.options.gestureOrientation==="both"?P=Math.abs(x)>Math.abs(T)?x:T:this.options.gestureOrientation==="horizontal"&&(P=T),this.scrollTo(this.targetScroll+P,{programmatic:!1})},this.onScroll=()=>{if(!this.isScrolling){const v=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-v),this.emit()}},t&&console.warn("Lenis: `direction` option is deprecated, use `orientation` instead"),e&&console.warn("Lenis: `gestureDirection` option is deprecated, use `gestureOrientation` instead"),i&&console.warn("Lenis: `mouseMultiplier` option is deprecated, use `wheelMultiplier` instead"),s&&console.warn("Lenis: `smooth` option is deprecated, use `smoothWheel` instead"),window.lenisVersion="1.0.0",r!==document.documentElement&&r!==document.body||(r=window),this.options={wrapper:r,content:n,smoothWheel:a,smoothTouch:h,duration:l,easing:u,lerp:f,infinite:c,gestureOrientation:_,orientation:d,touchMultiplier:p,wheelMultiplier:g,normalizeWheel:m},this.wrapper=new Pa(r),this.content=new Pa(n),this.rootElement.classList.add("lenis"),this.velocity=0,this.isStopped=!1,this.isSmooth=a||h,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.animate=new Je,this.emitter=fi(),this.wrapper.element.addEventListener("scroll",this.onScroll,{passive:!1}),this.virtualScroll=new qh(r,{touchMultiplier:p,wheelMultiplier:g,normalizeWheel:m}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.events={},this.wrapper.element.removeEventListener("scroll",this.onScroll,{passive:!1}),this.virtualScroll.destroy()}on(t,e){return this.emitter.on(t,e)}off(t,e){var i;this.emitter.events[t]=(i=this.emitter.events[t])==null?void 0:i.filter(s=>e!==s)}setScroll(t){this.isHorizontal?this.rootElement.scrollLeft=t:this.rootElement.scrollTop=t}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.velocity=0}start(){this.isStopped=!1,this.reset()}stop(){this.isStopped=!0,this.animate.stop(),this.reset()}raf(t){const e=t-(this.time||t);this.time=t,this.animate.advance(.001*e)}scrollTo(t,{offset:e=0,immediate:i=!1,lock:s=!1,duration:r=this.options.duration,easing:n=this.options.easing,lerp:a=!r&&this.options.lerp,onComplete:h,force:l=!1,programmatic:u=!0}={}){if(!this.isStopped||l){if(["top","left","start"].includes(t))t=0;else if(["bottom","right","end"].includes(t))t=this.limit;else{var f;let c;if(typeof t=="string"?c=document.querySelector(t):(f=t)!=null&&f.nodeType&&(c=t),c){if(this.wrapper.element!==window){const _=this.wrapper.element.getBoundingClientRect();e-=this.isHorizontal?_.left:_.top}const d=c.getBoundingClientRect();t=(this.isHorizontal?d.left:d.top)+this.animatedScroll}}if(typeof t=="number"){if(t+=e,t=Math.round(t),this.options.infinite?u&&(this.targetScroll=this.animatedScroll=this.scroll):t=ae(0,t,this.limit),i)return this.animatedScroll=this.targetScroll=t,this.setScroll(this.scroll),this.animate.stop(),this.reset(),this.emit(),void(h==null||h());u||(this.targetScroll=t),this.animate.fromTo(this.animatedScroll,t,{duration:r,easing:n,lerp:a,onUpdate:(c,{completed:d})=>{s&&(this.isLocked=!0),this.isScrolling=!0,this.velocity=c-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=c,this.setScroll(this.scroll),u&&(this.targetScroll=c),d&&(s&&(this.isLocked=!1),requestAnimationFrame(()=>{this.isScrolling=!1}),this.velocity=0,h==null||h()),this.emit()}})}}}get rootElement(){return this.wrapper.element===window?this.content.element:this.wrapper.element}get limit(){return Math.round(this.isHorizontal?this.content.width-this.wrapper.width:this.content.height-this.wrapper.height)}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?function(t,e){let i=t%e;return(e>0&&i<0||e<0&&i>0)&&(i+=e),i}(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(t){this.__isSmooth!==t&&(this.rootElement.classList.toggle("lenis-smooth",t),this.__isSmooth=t)}get isScrolling(){return this.__isScrolling}set isScrolling(t){this.__isScrolling!==t&&(this.rootElement.classList.toggle("lenis-scrolling",t),this.__isScrolling=t)}get isStopped(){return this.__isStopped}set isStopped(t){this.__isStopped!==t&&(this.rootElement.classList.toggle("lenis-stopped",t),this.__isStopped=t)}}let on=0;function V(){if(!(on>100)){if(on===100)console.warn("Curtains: too many warnings thrown, stop logging.");else{const o=Array.prototype.slice.call(arguments);console.warn.apply(console,o)}on++}}function Xt(){const o=Array.prototype.slice.call(arguments);console.error.apply(console,o)}function Ra(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,o=>{let t=Math.random()*16|0;return(o==="x"?t:t&3|8).toString(16).toUpperCase()})}function Ve(o){return(o&o-1)===0}function Zh(o,t,e){return(1-e)*o+e*t}class Qh{constructor(t){if(this.type="Scene",!t||t.type!=="Renderer")Xt(this.type+": Renderer not passed as first argument",t);else if(!t.gl){Xt(this.type+": Renderer WebGL context is undefined",t);return}this.renderer=t,this.gl=t.gl,this.initStacks()}initStacks(){this.stacks={pingPong:[],renderTargets:[],opaque:[],transparent:[],renderPasses:[],scenePasses:[]}}resetPlaneStacks(){this.stacks.pingPong=[],this.stacks.renderTargets=[],this.stacks.opaque=[],this.stacks.transparent=[];for(let t=0;t<this.renderer.planes.length;t++)this.addPlane(this.renderer.planes[t])}resetShaderPassStacks(){this.stacks.scenePasses=[],this.stacks.renderPasses=[];for(let t=0;t<this.renderer.shaderPasses.length;t++)this.renderer.shaderPasses[t].index=t,this.renderer.shaderPasses[t]._isScenePass?this.stacks.scenePasses.push(this.renderer.shaderPasses[t]):this.stacks.renderPasses.push(this.renderer.shaderPasses[t]);this.stacks.scenePasses.length===0&&(this.renderer.state.scenePassIndex=null)}addToRenderTargetsStack(t){const e=this.renderer.planes.filter(s=>s.type!=="PingPongPlane"&&s.target&&s.uuid!==t.uuid);let i=-1;if(t.target._depth){for(let s=e.length-1;s>=0;s--)if(e[s].target.uuid===t.target.uuid){i=s+1;break}}else i=e.findIndex(s=>s.target.uuid===t.target.uuid);i=Math.max(0,i),e.splice(i,0,t),t.target._depth?(e.sort((s,r)=>s.index-r.index),e.sort((s,r)=>r.renderOrder-s.renderOrder)):(e.sort((s,r)=>r.index-s.index),e.sort((s,r)=>s.renderOrder-r.renderOrder)),e.sort((s,r)=>s.target.index-r.target.index),this.stacks.renderTargets=e}addToRegularPlaneStack(t){const e=this.renderer.planes.filter(s=>s.type!=="PingPongPlane"&&!s.target&&s._transparent===t._transparent&&s.uuid!==t.uuid);let i=-1;for(let s=e.length-1;s>=0;s--)if(e[s]._geometry.definition.id===t._geometry.definition.id){i=s+1;break}return i=Math.max(0,i),e.splice(i,0,t),e.sort((s,r)=>s.index-r.index),e}addPlane(t){if(t.type==="PingPongPlane")this.stacks.pingPong.push(t);else if(t.target)this.addToRenderTargetsStack(t);else if(t._transparent){const e=this.addToRegularPlaneStack(t);e.sort((i,s)=>s.relativeTranslation.z-i.relativeTranslation.z),e.sort((i,s)=>s.renderOrder-i.renderOrder),this.stacks.transparent=e}else{const e=this.addToRegularPlaneStack(t);e.sort((i,s)=>s.renderOrder-i.renderOrder),this.stacks.opaque=e}}removePlane(t){t.type==="PingPongPlane"?this.stacks.pingPong=this.stacks.pingPong.filter(e=>e.uuid!==t.uuid):t.target?this.stacks.renderTargets=this.stacks.renderTargets.filter(e=>e.uuid!==t.uuid):t._transparent?this.stacks.transparent=this.stacks.transparent.filter(e=>e.uuid!==t.uuid):this.stacks.opaque=this.stacks.opaque.filter(e=>e.uuid!==t.uuid)}setPlaneRenderOrder(t){if(t.type==="ShaderPass")this.sortShaderPassStack(t._isScenePass?this.stacks.scenePasses:this.stacks.renderPasses);else if(t.type==="PingPongPlane")return;if(t.target)t.target._depth?(this.stacks.renderTargets.sort((e,i)=>e.index-i.index),this.stacks.renderTargets.sort((e,i)=>i.renderOrder-e.renderOrder)):(this.stacks.renderTargets.sort((e,i)=>i.index-e.index),this.stacks.renderTargets.sort((e,i)=>e.renderOrder-i.renderOrder)),this.stacks.renderTargets.sort((e,i)=>e.target.index-i.target.index);else{const e=t._transparent?this.stacks.transparent:this.stacks.opaque,i=this.stacks.scenePasses.find((s,r)=>s._isScenePass&&!s._depth&&r===0);!this.renderer.depth||i?(e.sort((s,r)=>r.index-s.index),t._transparent&&e.sort((s,r)=>s.relativeTranslation.z-r.relativeTranslation.z),e.sort((s,r)=>s.renderOrder-r.renderOrder)):(e.sort((s,r)=>s.index-r.index),t._transparent&&e.sort((s,r)=>r.relativeTranslation.z-s.relativeTranslation.z),e.sort((s,r)=>r.renderOrder-s.renderOrder))}}addShaderPass(t){t._isScenePass?(this.stacks.scenePasses.push(t),this.sortShaderPassStack(this.stacks.scenePasses)):(this.stacks.renderPasses.push(t),this.sortShaderPassStack(this.stacks.renderPasses))}removeShaderPass(t){this.resetShaderPassStacks()}sortShaderPassStack(t){t.sort((e,i)=>e.index-i.index),t.sort((e,i)=>e.renderOrder-i.renderOrder)}enableShaderPass(){this.stacks.scenePasses.length&&this.stacks.renderPasses.length===0&&this.renderer.planes.length&&(this.renderer.state.scenePassIndex=0,this.renderer.bindFrameBuffer(this.stacks.scenePasses[0].target))}drawRenderPasses(){this.stacks.scenePasses.length&&this.stacks.renderPasses.length&&this.renderer.planes.length&&(this.renderer.state.scenePassIndex=0,this.renderer.bindFrameBuffer(this.stacks.scenePasses[0].target));for(let t=0;t<this.stacks.renderPasses.length;t++)this.stacks.renderPasses[t]._startDrawing(),this.renderer.clearDepth()}drawScenePasses(){for(let t=0;t<this.stacks.scenePasses.length;t++)this.stacks.scenePasses[t]._startDrawing()}drawPingPongStack(){for(let t=0;t<this.stacks.pingPong.length;t++){const e=this.stacks.pingPong[t];e&&e._startDrawing()}}drawStack(t){for(let e=0;e<this.stacks[t].length;e++){const i=this.stacks[t][e];i&&i._startDrawing()}}draw(){this.drawPingPongStack(),this.enableShaderPass(),this.drawStack("renderTargets"),this.drawRenderPasses(),this.renderer.setBlending(!1),this.drawStack("opaque"),this.stacks.transparent.length&&(this.renderer.setBlending(!0),this.drawStack("transparent")),this.drawScenePasses()}}class Kh{constructor(){this.geometries=[],this.clear()}clear(){this.textures=[],this.programs=[]}getGeometryFromID(t){return this.geometries.find(e=>e.id===t)}addGeometry(t,e,i){this.geometries.push({id:t,vertices:e,uvs:i})}isSameShader(t,e){return t.localeCompare(e)===0}getProgramFromShaders(t,e){return this.programs.find(i=>this.isSameShader(i.vsCode,t)&&this.isSameShader(i.fsCode,e))}addProgram(t){this.programs.push(t)}getTextureFromSource(t){const e=typeof t=="string"?t:t.src;return this.textures.find(i=>i.source&&i.source.src===e)}addTexture(t){this.getTextureFromSource(t.source)||this.textures.push(t)}removeTexture(t){this.textures=this.textures.filter(e=>e.uuid!==t.uuid)}}class Jh{constructor(){this.clear()}clear(){this.queue=[]}add(t,e=!1){const i={callback:t,keep:e,timeout:null};return i.timeout=setTimeout(()=>{this.queue.push(i)},0),i}execute(){this.queue.map(t=>{t.callback&&t.callback(),clearTimeout(this.queue.timeout)}),this.queue=this.queue.filter(t=>t.keep)}}class tl{constructor({alpha:t,antialias:e,premultipliedAlpha:i,depth:s,failIfMajorPerformanceCaveat:r,preserveDrawingBuffer:n,stencil:a,container:h,pixelRatio:l,renderingScale:u,production:f,onError:c,onSuccess:d,onContextLost:_,onContextRestored:p,onDisposed:g,onSceneChange:m}){this.type="Renderer",this.alpha=t,this.antialias=e,this.premultipliedAlpha=i,this.depth=s,this.failIfMajorPerformanceCaveat=r,this.preserveDrawingBuffer=n,this.stencil=a,this.container=h,this.pixelRatio=l,this._renderingScale=u,this.production=f,this.onError=c,this.onSuccess=d,this.onContextLost=_,this.onContextRestored=p,this.onDisposed=g,this.onSceneChange=m,this.initState(),this.canvas=document.createElement("canvas");const v={alpha:this.alpha,premultipliedAlpha:this.premultipliedAlpha,antialias:this.antialias,depth:this.depth,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,stencil:this.stencil};if(this.gl=this.canvas.getContext("webgl2",v),this._isWebGL2=!!this.gl,this.gl||(this.gl=this.canvas.getContext("webgl",v)||this.canvas.getContext("experimental-webgl",v)),this.gl)this.onSuccess&&this.onSuccess();else{this.production||V(this.type+": WebGL context could not be created"),this.state.isActive=!1,this.onError&&this.onError();return}this.initRenderer()}initState(){this.state={isActive:!0,isContextLost:!0,drawingEnabled:!0,forceRender:!1,currentProgramID:null,currentGeometryID:null,forceBufferUpdate:!1,depthTest:null,blending:null,cullFace:null,frameBufferID:null,scenePassIndex:null,activeTexture:null,unpackAlignment:null,flipY:null,premultiplyAlpha:null}}initCallbackQueueManager(){this.nextRender=new Jh}initRenderer(){this.planes=[],this.renderTargets=[],this.shaderPasses=[],this.state.isContextLost=!1,this.state.maxTextureSize=this.gl.getParameter(this.gl.MAX_TEXTURE_SIZE),this.initCallbackQueueManager(),this.setBlendFunc(),this.setDepthFunc(),this.setDepthTest(!0),this.cache=new Kh,this.scene=new Qh(this),this.getExtensions(),this._contextLostHandler=this.contextLost.bind(this),this.canvas.addEventListener("webglcontextlost",this._contextLostHandler,!1),this._contextRestoredHandler=this.contextRestored.bind(this),this.canvas.addEventListener("webglcontextrestored",this._contextRestoredHandler,!1)}getExtensions(){this.extensions=[],this._isWebGL2?(this.extensions.EXT_color_buffer_float=this.gl.getExtension("EXT_color_buffer_float"),this.extensions.OES_texture_float_linear=this.gl.getExtension("OES_texture_float_linear"),this.extensions.EXT_texture_filter_anisotropic=this.gl.getExtension("EXT_texture_filter_anisotropic"),this.extensions.WEBGL_lose_context=this.gl.getExtension("WEBGL_lose_context")):(this.extensions.OES_vertex_array_object=this.gl.getExtension("OES_vertex_array_object"),this.extensions.OES_texture_float=this.gl.getExtension("OES_texture_float"),this.extensions.OES_texture_float_linear=this.gl.getExtension("OES_texture_float_linear"),this.extensions.OES_texture_half_float=this.gl.getExtension("OES_texture_half_float"),this.extensions.OES_texture_half_float_linear=this.gl.getExtension("OES_texture_half_float_linear"),this.extensions.EXT_texture_filter_anisotropic=this.gl.getExtension("EXT_texture_filter_anisotropic"),this.extensions.OES_element_index_uint=this.gl.getExtension("OES_element_index_uint"),this.extensions.OES_standard_derivatives=this.gl.getExtension("OES_standard_derivatives"),this.extensions.EXT_sRGB=this.gl.getExtension("EXT_sRGB"),this.extensions.WEBGL_depth_texture=this.gl.getExtension("WEBGL_depth_texture"),this.extensions.WEBGL_draw_buffers=this.gl.getExtension("WEBGL_draw_buffers"),this.extensions.WEBGL_lose_context=this.gl.getExtension("WEBGL_lose_context"))}contextLost(t){this.state.isContextLost=!0,this.state.isActive&&(t.preventDefault(),this.nextRender.add(()=>this.onContextLost&&this.onContextLost()))}restoreContext(){this.state.isActive&&(this.initState(),this.gl&&this.extensions.WEBGL_lose_context?this.extensions.WEBGL_lose_context.restoreContext():(!this.gl&&!this.production?V(this.type+": Could not restore the context because the context is not defined"):!this.extensions.WEBGL_lose_context&&!this.production&&V(this.type+": Could not restore the context because the restore context extension is not defined"),this.onError&&this.onError()))}isContextexFullyRestored(){let t=!0;for(let e=0;e<this.renderTargets.length;e++){this.renderTargets[e].textures[0]._canDraw||(t=!1);break}if(t)for(let e=0;e<this.planes.length;e++)if(this.planes[e]._canDraw){for(let i=0;i<this.planes[e].textures.length;i++)if(!this.planes[e].textures[i]._canDraw){t=!1;break}}else{t=!1;break}if(t)for(let e=0;e<this.shaderPasses.length;e++)if(this.shaderPasses[e]._canDraw){for(let i=0;i<this.shaderPasses[e].textures.length;i++)if(!this.shaderPasses[e].textures[i]._canDraw){t=!1;break}}else{t=!1;break}return t}contextRestored(){this.getExtensions(),this.setBlendFunc(),this.setDepthFunc(),this.setDepthTest(!0),this.cache.clear(),this.scene.initStacks();for(let e=0;e<this.renderTargets.length;e++)this.renderTargets[e]._restoreContext();for(let e=0;e<this.planes.length;e++)this.planes[e]._restoreContext();for(let e=0;e<this.shaderPasses.length;e++)this.shaderPasses[e]._restoreContext();const t=this.nextRender.add(()=>{this.isContextexFullyRestored()&&(t.keep=!1,this.state.isContextLost=!1,this.onContextRestored&&this.onContextRestored(),this.onSceneChange(),this.needRender())},!0)}setPixelRatio(t){this.pixelRatio=t}setSize(){if(!this.gl)return;const t=this.container.getBoundingClientRect();this._boundingRect={width:t.width*this.pixelRatio,height:t.height*this.pixelRatio,top:t.top*this.pixelRatio,left:t.left*this.pixelRatio};const e=!!navigator.userAgent.match(/Version\/[\d\.]+.*Safari/),i=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;if(e&&i){let s=function(r){let n=0;for(;r&&!isNaN(r.offsetTop);)n+=r.offsetTop-r.scrollTop,r=r.offsetParent;return n};this._boundingRect.top=s(this.container)*this.pixelRatio}this.canvas.style.width=Math.floor(this._boundingRect.width/this.pixelRatio)+"px",this.canvas.style.height=Math.floor(this._boundingRect.height/this.pixelRatio)+"px",this.canvas.width=Math.floor(this._boundingRect.width*this._renderingScale),this.canvas.height=Math.floor(this._boundingRect.height*this._renderingScale),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}resize(){for(let t=0;t<this.planes.length;t++)this.planes[t]._canDraw&&this.planes[t].resize();for(let t=0;t<this.shaderPasses.length;t++)this.shaderPasses[t]._canDraw&&this.shaderPasses[t].resize();for(let t=0;t<this.renderTargets.length;t++)this.renderTargets[t].resize();this.needRender()}clear(){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}clearDepth(){this.gl.clear(this.gl.DEPTH_BUFFER_BIT)}clearColor(){this.gl.clear(this.gl.COLOR_BUFFER_BIT)}bindFrameBuffer(t,e){let i=null;t?(i=t.index,i!==this.state.frameBufferID&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t._frameBuffer),this.gl.viewport(0,0,t._size.width,t._size.height),t._shouldClear&&!e&&this.clear())):this.state.frameBufferID!==null&&(this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)),this.state.frameBufferID=i}setDepthTest(t){t&&!this.state.depthTest?(this.state.depthTest=t,this.gl.enable(this.gl.DEPTH_TEST)):!t&&this.state.depthTest&&(this.state.depthTest=t,this.gl.disable(this.gl.DEPTH_TEST))}setDepthFunc(){this.gl.depthFunc(this.gl.LEQUAL)}setBlending(t=!1){t&&!this.state.blending?(this.state.blending=t,this.gl.enable(this.gl.BLEND)):!t&&this.state.blending&&(this.state.blending=t,this.gl.disable(this.gl.BLEND))}setBlendFunc(){this.gl.enable(this.gl.BLEND),this.premultipliedAlpha?this.gl.blendFuncSeparate(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA):this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA)}setFaceCulling(t){if(this.state.cullFace!==t)if(this.state.cullFace=t,t==="none")this.gl.disable(this.gl.CULL_FACE);else{const e=t==="front"?this.gl.FRONT:this.gl.BACK;this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(e)}}useProgram(t){(this.state.currentProgramID===null||this.state.currentProgramID!==t.id)&&(this.gl.useProgram(t.program),this.state.currentProgramID=t.id)}removePlane(t){this.gl&&(this.planes=this.planes.filter(e=>e.uuid!==t.uuid),this.scene.removePlane(t),t=null,this.gl&&this.clear(),this.onSceneChange())}removeRenderTarget(t){if(!this.gl)return;let e=this.planes.find(i=>i.type!=="PingPongPlane"&&i.target&&i.target.uuid===t.uuid);for(let i=0;i<this.planes.length;i++)this.planes[i].target&&this.planes[i].target.uuid===t.uuid&&(this.planes[i].target=null);this.renderTargets=this.renderTargets.filter(i=>i.uuid!==t.uuid);for(let i=0;i<this.renderTargets.length;i++)this.renderTargets[i].index=i;t=null,this.gl&&this.clear(),e&&this.scene.resetPlaneStacks(),this.onSceneChange()}removeShaderPass(t){this.gl&&(this.shaderPasses=this.shaderPasses.filter(e=>e.uuid!==t.uuid),this.scene.removeShaderPass(t),t=null,this.gl&&this.clear(),this.onSceneChange())}enableDrawing(){this.state.drawingEnabled=!0}disableDrawing(){this.state.drawingEnabled=!1}needRender(){this.state.forceRender=!0}render(){this.gl&&(this.clear(),this.state.currentGeometryID=null,this.scene.draw())}deletePrograms(){for(let t=0;t<this.cache.programs.length;t++){const e=this.cache.programs[t];this.gl.deleteProgram(e.program)}}dispose(){if(!this.gl)return;for(this.state.isActive=!1;this.planes.length>0;)this.removePlane(this.planes[0]);for(;this.shaderPasses.length>0;)this.removeShaderPass(this.shaderPasses[0]);for(;this.renderTargets.length>0;)this.removeRenderTarget(this.renderTargets[0]);let t=this.nextRender.add(()=>{this.planes.length===0&&this.shaderPasses.length===0&&this.renderTargets.length===0&&(t.keep=!1,this.deletePrograms(),this.clear(),this.canvas.removeEventListener("webgllost",this._contextLostHandler,!1),this.canvas.removeEventListener("webglrestored",this._contextRestoredHandler,!1),this.gl&&this.extensions.WEBGL_lose_context&&this.extensions.WEBGL_lose_context.loseContext(),this.canvas.width=this.canvas.width,this.gl=null,this.container.removeChild(this.canvas),this.container=null,this.canvas=null,this.onDisposed&&this.onDisposed())},!0)}}class el{constructor({xOffset:t=0,yOffset:e=0,lastXDelta:i=0,lastYDelta:s=0,shouldWatch:r=!0,onScroll:n=()=>{}}={}){this.xOffset=t,this.yOffset=e,this.lastXDelta=i,this.lastYDelta=s,this.shouldWatch=r,this.onScroll=n,this.handler=this.scroll.bind(this,!0),this.shouldWatch&&window.addEventListener("scroll",this.handler,{passive:!0})}scroll(){this.updateScrollValues(window.pageXOffset,window.pageYOffset)}updateScrollValues(t,e){const i=this.xOffset;this.xOffset=t,this.lastXDelta=i-this.xOffset;const s=this.yOffset;this.yOffset=e,this.lastYDelta=s-this.yOffset,this.onScroll&&this.onScroll(this.lastXDelta,this.lastYDelta)}dispose(){this.shouldWatch&&window.removeEventListener("scroll",this.handler,{passive:!0})}}const il="8.1.3";class sl{constructor({container:t,alpha:e=!0,premultipliedAlpha:i=!1,antialias:s=!0,depth:r=!0,failIfMajorPerformanceCaveat:n=!0,preserveDrawingBuffer:a=!1,stencil:h=!1,autoResize:l=!0,autoRender:u=!0,watchScroll:f=!0,pixelRatio:c=window.devicePixelRatio||1,renderingScale:d=1,production:_=!1}={}){this.type="Curtains",this._autoResize=l,this._autoRender=u,this._watchScroll=f,this.pixelRatio=c,d=isNaN(d)?1:parseFloat(d),this._renderingScale=Math.max(.25,Math.min(1,d)),this.premultipliedAlpha=i,this.alpha=e,this.antialias=s,this.depth=r,this.failIfMajorPerformanceCaveat=n,this.preserveDrawingBuffer=a,this.stencil=h,this.production=_,this.errors=!1,t?this.setContainer(t):this.production||V(this.type+": no container provided in the initial parameters. Use setContainer() method to set one later and initialize the WebGL context")}setContainer(t){if(t)if(typeof t=="string")if(t=document.getElementById(t),t)this.container=t;else{let e=document.createElement("div");e.setAttribute("id","curtains-canvas"),document.body.appendChild(e),this.container=e,this.production||V('Curtains: no valid container HTML element or ID provided, created a div with "curtains-canvas" ID instead')}else t instanceof Element&&(this.container=t);else{let e=document.createElement("div");e.setAttribute("id","curtains-canvas"),document.body.appendChild(e),this.container=e,this.production||V('Curtains: no valid container HTML element or ID provided, created a div with "curtains-canvas" ID instead')}this._initCurtains()}_initCurtains(){this.planes=[],this.renderTargets=[],this.shaderPasses=[],this._initRenderer(),this.gl&&(this._initScroll(),this._setSize(),this._addListeners(),this.container.appendChild(this.canvas),console.log("curtains.js - v"+il),this._animationFrameID=null,this._autoRender&&this._animate())}_initRenderer(){this.renderer=new tl({alpha:this.alpha,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,depth:this.depth,failIfMajorPerformanceCaveat:this.failIfMajorPerformanceCaveat,preserveDrawingBuffer:this.preserveDrawingBuffer,stencil:this.stencil,container:this.container,pixelRatio:this.pixelRatio,renderingScale:this._renderingScale,production:this.production,onError:()=>this._onRendererError(),onSuccess:()=>this._onRendererSuccess(),onContextLost:()=>this._onRendererContextLost(),onContextRestored:()=>this._onRendererContextRestored(),onDisposed:()=>this._onRendererDisposed(),onSceneChange:()=>this._keepSync()}),this.gl=this.renderer.gl,this.canvas=this.renderer.canvas}restoreContext(){this.renderer.restoreContext()}_animate(){this.render(),this._animationFrameID=window.requestAnimationFrame(this._animate.bind(this))}enableDrawing(){this.renderer.enableDrawing()}disableDrawing(){this.renderer.disableDrawing()}needRender(){this.renderer.needRender()}nextRender(t,e=!1){return this.renderer.nextRender.add(t,e)}clear(){this.renderer&&this.renderer.clear()}clearDepth(){this.renderer&&this.renderer.clearDepth()}clearColor(){this.renderer&&this.renderer.clearColor()}isWebGL2(){return this.gl?this.renderer._isWebGL2:!1}render(){this.renderer.nextRender.execute(),!(!this.renderer.state.drawingEnabled&&!this.renderer.state.forceRender)&&(this.renderer.state.forceRender&&(this.renderer.state.forceRender=!1),this._onRenderCallback&&this._onRenderCallback(),this.renderer.render())}_addListeners(){this._resizeHandler=null,this._autoResize&&(this._resizeHandler=this.resize.bind(this,!0),window.addEventListener("resize",this._resizeHandler,!1))}setPixelRatio(t,e){this.pixelRatio=parseFloat(Math.max(t,1))||1,this.renderer.setPixelRatio(t),this.resize(e)}_setSize(){this.renderer.setSize(),this._scrollManager.shouldWatch&&(this._scrollManager.xOffset=window.pageXOffset,this._scrollManager.yOffset=window.pageYOffset)}getBoundingRect(){return this.renderer._boundingRect}resize(t){this.gl&&(this._setSize(),this.renderer.resize(),this.nextRender(()=>{this._onAfterResizeCallback&&t&&this._onAfterResizeCallback()}))}_initScroll(){this._scrollManager=new el({xOffset:window.pageXOffset,yOffset:window.pageYOffset,lastXDelta:0,lastYDelta:0,shouldWatch:this._watchScroll,onScroll:(t,e)=>this._updateScroll(t,e)})}_updateScroll(t,e){for(let i=0;i<this.planes.length;i++)this.planes[i].watchScroll&&this.planes[i].updateScrollPosition(t,e);this.renderer.needRender(),this._onScrollCallback&&this._onScrollCallback()}updateScrollValues(t,e){this._scrollManager.updateScrollValues(t,e)}getScrollDeltas(){return{x:this._scrollManager.lastXDelta,y:this._scrollManager.lastYDelta}}getScrollValues(){return{x:this._scrollManager.xOffset,y:this._scrollManager.yOffset}}_keepSync(){this.planes=this.renderer.planes,this.shaderPasses=this.renderer.shaderPasses,this.renderTargets=this.renderer.renderTargets}lerp(t,e,i){return Zh(t,e,i)}onAfterResize(t){return t&&(this._onAfterResizeCallback=t),this}onError(t){return t&&(this._onErrorCallback=t),this}_onRendererError(){setTimeout(()=>{this._onErrorCallback&&!this.errors&&this._onErrorCallback(),this.errors=!0},0)}onSuccess(t){return t&&(this._onSuccessCallback=t),this}_onRendererSuccess(){setTimeout(()=>{this._onSuccessCallback&&this._onSuccessCallback()},0)}onContextLost(t){return t&&(this._onContextLostCallback=t),this}_onRendererContextLost(){this._onContextLostCallback&&this._onContextLostCallback()}onContextRestored(t){return t&&(this._onContextRestoredCallback=t),this}_onRendererContextRestored(){this._onContextRestoredCallback&&this._onContextRestoredCallback()}onRender(t){return t&&(this._onRenderCallback=t),this}onScroll(t){return t&&(this._onScrollCallback=t),this}dispose(){this.renderer.dispose()}_onRendererDisposed(){this._animationFrameID&&window.cancelAnimationFrame(this._animationFrameID),this._resizeHandler&&window.removeEventListener("resize",this._resizeHandler,!1),this._scrollManager&&this._scrollManager.dispose()}}class rl{constructor(t,e,i){if(this.type="Uniforms",!t||t.type!=="Renderer")Xt(this.type+": Renderer not passed as first argument",t);else if(!t.gl){Xt(this.type+": Renderer WebGL context is undefined",t);return}if(this.renderer=t,this.gl=t.gl,this.program=e,this.uniforms={},i)for(const s in i){const r=i[s];this.uniforms[s]={name:r.name,type:r.type,value:r.value.clone&&typeof r.value.clone=="function"?r.value.clone():r.value,update:null}}}handleUniformSetting(t){switch(t.type){case"1i":t.update=this.setUniform1i.bind(this);break;case"1iv":t.update=this.setUniform1iv.bind(this);break;case"1f":t.update=this.setUniform1f.bind(this);break;case"1fv":t.update=this.setUniform1fv.bind(this);break;case"2i":t.update=this.setUniform2i.bind(this);break;case"2iv":t.update=this.setUniform2iv.bind(this);break;case"2f":t.update=this.setUniform2f.bind(this);break;case"2fv":t.update=this.setUniform2fv.bind(this);break;case"3i":t.update=this.setUniform3i.bind(this);break;case"3iv":t.update=this.setUniform3iv.bind(this);break;case"3f":t.update=this.setUniform3f.bind(this);break;case"3fv":t.update=this.setUniform3fv.bind(this);break;case"4i":t.update=this.setUniform4i.bind(this);break;case"4iv":t.update=this.setUniform4iv.bind(this);break;case"4f":t.update=this.setUniform4f.bind(this);break;case"4fv":t.update=this.setUniform4fv.bind(this);break;case"mat2":t.update=this.setUniformMatrix2fv.bind(this);break;case"mat3":t.update=this.setUniformMatrix3fv.bind(this);break;case"mat4":t.update=this.setUniformMatrix4fv.bind(this);break;default:this.renderer.production||V(this.type+": This uniform type is not handled : ",t.type)}}setInternalFormat(t){t.value.type==="Vec2"?(t._internalFormat="Vec2",t.lastValue=t.value.clone()):t.value.type==="Vec3"?(t._internalFormat="Vec3",t.lastValue=t.value.clone()):t.value.type==="Mat4"?(t._internalFormat="Mat4",t.lastValue=t.value.clone()):t.value.type==="Quat"?(t._internalFormat="Quat",t.lastValue=t.value.clone()):Array.isArray(t.value)?(t._internalFormat="array",t.lastValue=Array.from(t.value)):t.value.constructor===Float32Array?(t._internalFormat="mat",t.lastValue=t.value):(t._internalFormat="float",t.lastValue=t.value)}setUniforms(){if(this.uniforms)for(const t in this.uniforms){let e=this.uniforms[t];e.location=this.gl.getUniformLocation(this.program,e.name),e._internalFormat||this.setInternalFormat(e),e.type||(e._internalFormat==="Vec2"?e.type="2f":e._internalFormat==="Vec3"?e.type="3f":e._internalFormat==="Mat4"?e.type="mat4":e._internalFormat==="array"?e.value.length===4?(e.type="4f",this.renderer.production||V(this.type+": No uniform type declared for "+e.name+", applied a 4f (array of 4 floats) uniform type")):e.value.length===3?(e.type="3f",this.renderer.production||V(this.type+": No uniform type declared for "+e.name+", applied a 3f (array of 3 floats) uniform type")):e.value.length===2&&(e.type="2f",this.renderer.production||V(this.type+": No uniform type declared for "+e.name+", applied a 2f (array of 2 floats) uniform type")):e._internalFormat==="mat"?e.value.length===16?(e.type="mat4",this.renderer.production||V(this.type+": No uniform type declared for "+e.name+", applied a mat4 (4x4 matrix array) uniform type")):e.value.length===9?(e.type="mat3",this.renderer.production||V(this.type+": No uniform type declared for "+e.name+", applied a mat3 (3x3 matrix array) uniform type")):e.value.length===4&&(e.type="mat2",this.renderer.production||V(this.type+": No uniform type declared for "+e.name+", applied a mat2 (2x2 matrix array) uniform type")):(e.type="1f",this.renderer.production||V(this.type+": No uniform type declared for "+e.name+", applied a 1f (float) uniform type"))),this.handleUniformSetting(e),e.update&&e.update(e)}}updateUniforms(){if(this.uniforms)for(const t in this.uniforms){const e=this.uniforms[t];let i=!1;e._internalFormat==="Vec2"||e._internalFormat==="Vec3"||e._internalFormat==="Quat"?e.value.equals(e.lastValue)||(i=!0,e.lastValue.copy(e.value)):e.value.length?JSON.stringify(e.value)!==JSON.stringify(e.lastValue)&&(i=!0,e.lastValue=Array.from(e.value)):e.value!==e.lastValue&&(i=!0,e.lastValue=e.value),i&&e.update&&e.update(e)}}setUniform1i(t){this.gl.uniform1i(t.location,t.value)}setUniform1iv(t){this.gl.uniform1iv(t.location,t.value)}setUniform1f(t){this.gl.uniform1f(t.location,t.value)}setUniform1fv(t){this.gl.uniform1fv(t.location,t.value)}setUniform2i(t){t._internalFormat==="Vec2"?this.gl.uniform2i(t.location,t.value.x,t.value.y):this.gl.uniform2i(t.location,t.value[0],t.value[1])}setUniform2iv(t){t._internalFormat==="Vec2"?this.gl.uniform2iv(t.location,[t.value.x,t.value.y]):this.gl.uniform2iv(t.location,t.value)}setUniform2f(t){t._internalFormat==="Vec2"?this.gl.uniform2f(t.location,t.value.x,t.value.y):this.gl.uniform2f(t.location,t.value[0],t.value[1])}setUniform2fv(t){t._internalFormat==="Vec2"?this.gl.uniform2fv(t.location,[t.value.x,t.value.y]):this.gl.uniform2fv(t.location,t.value)}setUniform3i(t){t._internalFormat==="Vec3"?this.gl.uniform3i(t.location,t.value.x,t.value.y,t.value.z):this.gl.uniform3i(t.location,t.value[0],t.value[1],t.value[2])}setUniform3iv(t){t._internalFormat==="Vec3"?this.gl.uniform3iv(t.location,[t.value.x,t.value.y,t.value.z]):this.gl.uniform3iv(t.location,t.value)}setUniform3f(t){t._internalFormat==="Vec3"?this.gl.uniform3f(t.location,t.value.x,t.value.y,t.value.z):this.gl.uniform3f(t.location,t.value[0],t.value[1],t.value[2])}setUniform3fv(t){t._internalFormat==="Vec3"?this.gl.uniform3fv(t.location,[t.value.x,t.value.y,t.value.z]):this.gl.uniform3fv(t.location,t.value)}setUniform4i(t){t._internalFormat==="Quat"?this.gl.uniform4i(t.location,t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]):this.gl.uniform4i(t.location,t.value[0],t.value[1],t.value[2],t.value[3])}setUniform4iv(t){t._internalFormat==="Quat"?this.gl.uniform4iv(t.location,[t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]]):this.gl.uniform4iv(t.location,t.value)}setUniform4f(t){t._internalFormat==="Quat"?this.gl.uniform4f(t.location,t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]):this.gl.uniform4f(t.location,t.value[0],t.value[1],t.value[2],t.value[3])}setUniform4fv(t){t._internalFormat==="Quat"?this.gl.uniform4fv(t.location,[t.value.elements[0],t.value.elements[1],t.value.elements[2],t.value[3]]):this.gl.uniform4fv(t.location,t.value)}setUniformMatrix2fv(t){this.gl.uniformMatrix2fv(t.location,!1,t.value)}setUniformMatrix3fv(t){this.gl.uniformMatrix3fv(t.location,!1,t.value)}setUniformMatrix4fv(t){t._internalFormat==="Mat4"?this.gl.uniformMatrix4fv(t.location,!1,t.value.elements):this.gl.uniformMatrix4fv(t.location,!1,t.value)}}const _r=`
precision mediump float;
`.replace(/\n/g,""),Ea=`
attribute vec3 aVertexPosition;
attribute vec2 aTextureCoord;
`.replace(/\n/g,""),gr=`
varying vec3 vVertexPosition;
varying vec2 vTextureCoord;
`.replace(/\n/g,""),nl=(_r+Ea+gr+`
uniform mat4 uMVMatrix;
uniform mat4 uPMatrix;

void main() {
    vTextureCoord = aTextureCoord;
    vVertexPosition = aVertexPosition;
    
    gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);
}
`).replace(/\n/g,""),al=(_r+gr+`
void main() {
    gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
}
`).replace(/\n/g,""),ol=(_r+Ea+gr+`
void main() {
    vTextureCoord = aTextureCoord;
    vVertexPosition = aVertexPosition;
    
    gl_Position = vec4(aVertexPosition, 1.0);
}
`).replace(/\n/g,""),hl=(_r+gr+`
uniform sampler2D uRenderTexture;

void main() {
    gl_FragColor = texture2D(uRenderTexture, vTextureCoord);
}
`).replace(/\n/g,"");let Ma=0;class Ca{constructor(t,{parent:e,vertexShader:i,fragmentShader:s}={}){if(this.type="Program",!t||t.type!=="Renderer")Xt(this.type+": Renderer not passed as first argument",t);else if(!t.gl){Xt(this.type+": Renderer WebGL context is undefined",t);return}this.renderer=t,this.gl=this.renderer.gl,this.parent=e,this.defaultVsCode=this.parent.type==="Plane"?nl:ol,this.defaultFsCode=this.parent.type==="Plane"?al:hl,i?this.vsCode=i:(!this.renderer.production&&this.parent.type==="Plane"&&V(this.parent.type+": No vertex shader provided, will use a default one"),this.vsCode=this.defaultVsCode),s?this.fsCode=s:(this.renderer.production||V(this.parent.type+": No fragment shader provided, will use a default one"),this.fsCode=this.defaultFsCode),this.compiled=!0,this.setupProgram()}createShader(t,e){const i=this.gl.createShader(e);if(this.gl.shaderSource(i,t),this.gl.compileShader(i),!this.renderer.production&&!this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)){const s=e===this.gl.VERTEX_SHADER?"vertex shader":"fragment shader";let n=this.gl.getShaderSource(i).split(`
`);for(let a=0;a<n.length;a++)n[a]=a+1+": "+n[a];return n=n.join(`
`),V(this.type+": Errors occurred while compiling the",s,`:
`,this.gl.getShaderInfoLog(i)),Xt(n),V(this.type+": Will use a default",s),this.createShader(e===this.gl.VERTEX_SHADER?this.defaultVsCode:this.defaultFsCode,e)}return i}useNewShaders(){this.vertexShader=this.createShader(this.vsCode,this.gl.VERTEX_SHADER),this.fragmentShader=this.createShader(this.fsCode,this.gl.FRAGMENT_SHADER),(!this.vertexShader||!this.fragmentShader)&&(this.renderer.production||V(this.type+": Unable to find or compile the vertex or fragment shader"))}setupProgram(){let t=this.renderer.cache.getProgramFromShaders(this.vsCode,this.fsCode);t?(this.vertexShader=t.vertexShader,this.fragmentShader=t.fragmentShader,this.activeUniforms=t.activeUniforms,this.activeAttributes=t.activeAttributes,this.createProgram()):(this.useNewShaders(),this.compiled&&(this.createProgram(),this.renderer.cache.addProgram(this)))}createProgram(){if(Ma++,this.id=Ma,this.program=this.gl.createProgram(),this.gl.attachShader(this.program,this.vertexShader),this.gl.attachShader(this.program,this.fragmentShader),this.gl.linkProgram(this.program),!this.renderer.production&&!this.gl.getProgramParameter(this.program,this.gl.LINK_STATUS)){V(this.type+": Unable to initialize the shader program: "+this.gl.getProgramInfoLog(this.program)),V(this.type+": Will use default vertex and fragment shaders"),this.vertexShader=this.createShader(this.defaultVsCode,this.gl.VERTEX_SHADER),this.fragmentShader=this.createShader(this.defaultFsCode,this.gl.FRAGMENT_SHADER),this.createProgram();return}if(this.gl.deleteShader(this.vertexShader),this.gl.deleteShader(this.fragmentShader),!this.activeUniforms||!this.activeAttributes){this.activeUniforms={textures:[],textureMatrices:[]};const t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);for(let i=0;i<t;i++){const s=this.gl.getActiveUniform(this.program,i);s.type===this.gl.SAMPLER_2D&&this.activeUniforms.textures.push(s.name),s.type===this.gl.FLOAT_MAT4&&s.name!=="uMVMatrix"&&s.name!=="uPMatrix"&&this.activeUniforms.textureMatrices.push(s.name)}this.activeAttributes=[];const e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);for(let i=0;i<e;i++){const s=this.gl.getActiveAttrib(this.program,i);this.activeAttributes.push(s.name)}}}createUniforms(t){this.uniformsManager=new rl(this.renderer,this.program,t),this.setUniforms()}setUniforms(){this.renderer.useProgram(this),this.uniformsManager.setUniforms()}updateUniforms(){this.renderer.useProgram(this),this.uniformsManager.updateUniforms()}}class ll{constructor(t,{program:e=null,width:i=1,height:s=1}={}){if(this.type="Geometry",!t||t.type!=="Renderer")Xt(this.type+": Renderer not passed as first argument",t);else if(!t.gl){Xt(this.type+": Renderer WebGL context is undefined",t);return}this.renderer=t,this.gl=this.renderer.gl,this.definition={id:i*s+i,width:i,height:s},this.setDefaultAttributes(),this.setVerticesUVs()}restoreContext(t){this.program=null,this.setDefaultAttributes(),this.setVerticesUVs(),this.setProgram(t)}setDefaultAttributes(){this.attributes={vertexPosition:{name:"aVertexPosition",size:3,isActive:!1},textureCoord:{name:"aTextureCoord",size:3,isActive:!1}}}setVerticesUVs(){const t=this.renderer.cache.getGeometryFromID(this.definition.id);t?(this.attributes.vertexPosition.array=t.vertices,this.attributes.textureCoord.array=t.uvs):(this.computeVerticesUVs(),this.renderer.cache.addGeometry(this.definition.id,this.attributes.vertexPosition.array,this.attributes.textureCoord.array))}setProgram(t){this.program=t,this.initAttributes(),this.renderer._isWebGL2?(this._vao=this.gl.createVertexArray(),this.gl.bindVertexArray(this._vao)):this.renderer.extensions.OES_vertex_array_object&&(this._vao=this.renderer.extensions.OES_vertex_array_object.createVertexArrayOES(),this.renderer.extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao)),this.initializeBuffers()}initAttributes(){for(const t in this.attributes){if(this.attributes[t].isActive=this.program.activeAttributes.includes(this.attributes[t].name),!this.attributes[t].isActive)return;this.attributes[t].location=this.gl.getAttribLocation(this.program.program,this.attributes[t].name),this.attributes[t].buffer=this.gl.createBuffer(),this.attributes[t].numberOfItems=this.definition.width*this.definition.height*this.attributes[t].size*2}}computeVerticesUVs(){this.attributes.vertexPosition.array=[],this.attributes.textureCoord.array=[];const t=this.attributes.vertexPosition.array,e=this.attributes.textureCoord.array;for(let i=0;i<this.definition.height;i++){const s=i/this.definition.height;for(let r=0;r<this.definition.width;r++){const n=r/this.definition.width;e.push(n),e.push(s),e.push(0),t.push((n-.5)*2),t.push((s-.5)*2),t.push(0),e.push(n+1/this.definition.width),e.push(s),e.push(0),t.push((n+1/this.definition.width-.5)*2),t.push((s-.5)*2),t.push(0),e.push(n),e.push(s+1/this.definition.height),e.push(0),t.push((n-.5)*2),t.push((s+1/this.definition.height-.5)*2),t.push(0),e.push(n),e.push(s+1/this.definition.height),e.push(0),t.push((n-.5)*2),t.push((s+1/this.definition.height-.5)*2),t.push(0),e.push(n+1/this.definition.width),e.push(s),e.push(0),t.push((n+1/this.definition.width-.5)*2),t.push((s-.5)*2),t.push(0),e.push(n+1/this.definition.width),e.push(s+1/this.definition.height),e.push(0),t.push((n+1/this.definition.width-.5)*2),t.push((s+1/this.definition.height-.5)*2),t.push(0)}}}initializeBuffers(){if(this.attributes){for(const t in this.attributes){if(!this.attributes[t].isActive)return;this.gl.enableVertexAttribArray(this.attributes[t].location),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[t].buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(this.attributes[t].array),this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.attributes[t].location,this.attributes[t].size,this.gl.FLOAT,!1,0,0)}this.renderer.state.currentGeometryID=this.definition.id}}bindBuffers(){if(this._vao)this.renderer._isWebGL2?this.gl.bindVertexArray(this._vao):this.renderer.extensions.OES_vertex_array_object.bindVertexArrayOES(this._vao);else for(const t in this.attributes){if(!this.attributes[t].isActive)return;this.gl.enableVertexAttribArray(this.attributes[t].location),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[t].buffer),this.gl.vertexAttribPointer(this.attributes[t].location,this.attributes[t].size,this.gl.FLOAT,!1,0,0)}this.renderer.state.currentGeometryID=this.definition.id}draw(){this.gl.drawArrays(this.gl.TRIANGLES,0,this.attributes.vertexPosition.numberOfItems)}dispose(){this._vao&&(this.renderer._isWebGL2?this.gl.deleteVertexArray(this._vao):this.renderer.extensions.OES_vertex_array_object.deleteVertexArrayOES(this._vao));for(const t in this.attributes){if(!this.attributes[t].isActive)return;this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.attributes[t].buffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,1,this.gl.STATIC_DRAW),this.gl.deleteBuffer(this.attributes[t].buffer)}this.attributes=null,this.renderer.state.currentGeometryID=null}}class Ne{constructor(t=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])){this.type="Mat4",this.elements=t}setFromArray(t){for(let e=0;e<this.elements.length;e++)this.elements[e]=t[e];return this}copy(t){const e=t.elements;return this.elements[0]=e[0],this.elements[1]=e[1],this.elements[2]=e[2],this.elements[3]=e[3],this.elements[4]=e[4],this.elements[5]=e[5],this.elements[6]=e[6],this.elements[7]=e[7],this.elements[8]=e[8],this.elements[9]=e[9],this.elements[10]=e[10],this.elements[11]=e[11],this.elements[12]=e[12],this.elements[13]=e[13],this.elements[14]=e[14],this.elements[15]=e[15],this}clone(){return new Ne().copy(this)}multiply(t){const e=this.elements,i=t.elements;let s=new Ne;return s.elements[0]=i[0]*e[0]+i[1]*e[4]+i[2]*e[8]+i[3]*e[12],s.elements[1]=i[0]*e[1]+i[1]*e[5]+i[2]*e[9]+i[3]*e[13],s.elements[2]=i[0]*e[2]+i[1]*e[6]+i[2]*e[10]+i[3]*e[14],s.elements[3]=i[0]*e[3]+i[1]*e[7]+i[2]*e[11]+i[3]*e[15],s.elements[4]=i[4]*e[0]+i[5]*e[4]+i[6]*e[8]+i[7]*e[12],s.elements[5]=i[4]*e[1]+i[5]*e[5]+i[6]*e[9]+i[7]*e[13],s.elements[6]=i[4]*e[2]+i[5]*e[6]+i[6]*e[10]+i[7]*e[14],s.elements[7]=i[4]*e[3]+i[5]*e[7]+i[6]*e[11]+i[7]*e[15],s.elements[8]=i[8]*e[0]+i[9]*e[4]+i[10]*e[8]+i[11]*e[12],s.elements[9]=i[8]*e[1]+i[9]*e[5]+i[10]*e[9]+i[11]*e[13],s.elements[10]=i[8]*e[2]+i[9]*e[6]+i[10]*e[10]+i[11]*e[14],s.elements[11]=i[8]*e[3]+i[9]*e[7]+i[10]*e[11]+i[11]*e[15],s.elements[12]=i[12]*e[0]+i[13]*e[4]+i[14]*e[8]+i[15]*e[12],s.elements[13]=i[12]*e[1]+i[13]*e[5]+i[14]*e[9]+i[15]*e[13],s.elements[14]=i[12]*e[2]+i[13]*e[6]+i[14]*e[10]+i[15]*e[14],s.elements[15]=i[12]*e[3]+i[13]*e[7]+i[14]*e[11]+i[15]*e[15],s}getInverse(){const t=this.elements,e=new Ne,i=e.elements;let s=t[0],r=t[1],n=t[2],a=t[3],h=t[4],l=t[5],u=t[6],f=t[7],c=t[8],d=t[9],_=t[10],p=t[11],g=t[12],m=t[13],v=t[14],T=t[15],x=s*l-r*h,b=s*u-n*h,P=s*f-a*h,w=r*u-n*l,E=r*f-a*l,R=n*f-a*u,M=c*m-d*g,A=c*v-_*g,k=c*T-p*g,W=d*v-_*m,U=d*T-p*m,F=_*T-p*v,O=x*F-b*U+P*W+w*k-E*A+R*M;return O?(O=1/O,i[0]=(l*F-u*U+f*W)*O,i[1]=(n*U-r*F-a*W)*O,i[2]=(m*R-v*E+T*w)*O,i[3]=(_*E-d*R-p*w)*O,i[4]=(u*k-h*F-f*A)*O,i[5]=(s*F-n*k+a*A)*O,i[6]=(v*P-g*R-T*b)*O,i[7]=(c*R-_*P+p*b)*O,i[8]=(h*U-l*k+f*M)*O,i[9]=(r*k-s*U-a*M)*O,i[10]=(g*E-m*P+T*x)*O,i[11]=(d*P-c*E-p*x)*O,i[12]=(l*A-h*W-u*M)*O,i[13]=(s*W-r*A+n*M)*O,i[14]=(m*b-g*w-v*x)*O,i[15]=(c*w-d*b+_*x)*O,e):null}scale(t){let e=this.elements;return e[0]*=t.x,e[1]*=t.x,e[2]*=t.x,e[3]*=t.x,e[4]*=t.y,e[5]*=t.y,e[6]*=t.y,e[7]*=t.y,e[8]*=t.z,e[9]*=t.z,e[10]*=t.z,e[11]*=t.z,this}compose(t,e,i){let s=this.elements;const r=e.elements[0],n=e.elements[1],a=e.elements[2],h=e.elements[3],l=r+r,u=n+n,f=a+a,c=r*l,d=r*u,_=r*f,p=n*u,g=n*f,m=a*f,v=h*l,T=h*u,x=h*f,b=i.x,P=i.y,w=i.z;return s[0]=(1-(p+m))*b,s[1]=(d+x)*b,s[2]=(_-T)*b,s[3]=0,s[4]=(d-x)*P,s[5]=(1-(c+m))*P,s[6]=(g+v)*P,s[7]=0,s[8]=(_+T)*w,s[9]=(g-v)*w,s[10]=(1-(c+p))*w,s[11]=0,s[12]=t.x,s[13]=t.y,s[14]=t.z,s[15]=1,this}composeFromOrigin(t,e,i,s){let r=this.elements;const n=e.elements[0],a=e.elements[1],h=e.elements[2],l=e.elements[3],u=n+n,f=a+a,c=h+h,d=n*u,_=n*f,p=n*c,g=a*f,m=a*c,v=h*c,T=l*u,x=l*f,b=l*c,P=i.x,w=i.y,E=i.z,R=s.x,M=s.y,A=s.z,k=(1-(g+v))*P,W=(_+b)*P,U=(p-x)*P,F=(_-b)*w,O=(1-(d+v))*w,X=(m+T)*w,N=(p+x)*E,J=(m-T)*E,y=(1-(d+g))*E;return r[0]=k,r[1]=W,r[2]=U,r[3]=0,r[4]=F,r[5]=O,r[6]=X,r[7]=0,r[8]=N,r[9]=J,r[10]=y,r[11]=0,r[12]=t.x+R-(k*R+F*M+N*A),r[13]=t.y+M-(W*R+O*M+J*A),r[14]=t.z+A-(U*R+X*M+y*A),r[15]=1,this}}class ti{constructor(t=0,e=t){this.type="Vec2",this._x=t,this._y=e}get x(){return this._x}get y(){return this._y}set x(t){const e=t!==this._x;this._x=t,e&&this._onChangeCallback&&this._onChangeCallback()}set y(t){const e=t!==this._y;this._y=t,e&&this._onChangeCallback&&this._onChangeCallback()}onChange(t){return t&&(this._onChangeCallback=t),this}set(t,e){return this._x=t,this._y=e,this}add(t){return this._x+=t.x,this._y+=t.y,this}addScalar(t){return this._x+=t,this._y+=t,this}sub(t){return this._x-=t.x,this._y-=t.y,this}subScalar(t){return this._x-=t,this._y-=t,this}multiply(t){return this._x*=t.x,this._y*=t.y,this}multiplyScalar(t){return this._x*=t,this._y*=t,this}copy(t){return this._x=t.x,this._y=t.y,this}clone(){return new ti(this._x,this._y)}sanitizeNaNValuesWith(t){return this._x=isNaN(this._x)?t.x:parseFloat(this._x),this._y=isNaN(this._y)?t.y:parseFloat(this._y),this}max(t){return this._x=Math.max(this._x,t.x),this._y=Math.max(this._y,t.y),this}min(t){return this._x=Math.min(this._x,t.x),this._y=Math.min(this._y,t.y),this}equals(t){return this._x===t.x&&this._y===t.y}normalize(){let t=this._x*this._x+this._y*this._y;return t>0&&(t=1/Math.sqrt(t)),this._x*=t,this._y*=t,this}dot(t){return this._x*t.x+this._y*t.y}}class nt{constructor(t=0,e=t,i=t){this.type="Vec3",this._x=t,this._y=e,this._z=i}get x(){return this._x}get y(){return this._y}get z(){return this._z}set x(t){const e=t!==this._x;this._x=t,e&&this._onChangeCallback&&this._onChangeCallback()}set y(t){const e=t!==this._y;this._y=t,e&&this._onChangeCallback&&this._onChangeCallback()}set z(t){const e=t!==this._z;this._z=t,e&&this._onChangeCallback&&this._onChangeCallback()}onChange(t){return t&&(this._onChangeCallback=t),this}set(t,e,i){return this._x=t,this._y=e,this._z=i,this}add(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this}addScalar(t){return this._x+=t,this._y+=t,this._z+=t,this}sub(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this}subScalar(t){return this._x-=t,this._y-=t,this._z-=t,this}multiply(t){return this._x*=t.x,this._y*=t.y,this._z*=t.z,this}multiplyScalar(t){return this._x*=t,this._y*=t,this._z*=t,this}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this}clone(){return new nt(this._x,this._y,this._z)}sanitizeNaNValuesWith(t){return this._x=isNaN(this._x)?t.x:parseFloat(this._x),this._y=isNaN(this._y)?t.y:parseFloat(this._y),this._z=isNaN(this._z)?t.z:parseFloat(this._z),this}max(t){return this._x=Math.max(this._x,t.x),this._y=Math.max(this._y,t.y),this._z=Math.max(this._z,t.z),this}min(t){return this._x=Math.min(this._x,t.x),this._y=Math.min(this._y,t.y),this._z=Math.min(this._z,t.z),this}equals(t){return this._x===t.x&&this._y===t.y&&this._z===t.z}normalize(){let t=this._x*this._x+this._y*this._y+this._z*this._z;return t>0&&(t=1/Math.sqrt(t)),this._x*=t,this._y*=t,this._z*=t,this}dot(t){return this._x*t.x+this._y*t.y+this._z*t.z}applyMat4(t){const e=this._x,i=this._y,s=this._z,r=t.elements;let n=r[3]*e+r[7]*i+r[11]*s+r[15];return n=n||1,this._x=(r[0]*e+r[4]*i+r[8]*s+r[12])/n,this._y=(r[1]*e+r[5]*i+r[9]*s+r[13])/n,this._z=(r[2]*e+r[6]*i+r[10]*s+r[14])/n,this}applyQuat(t){const e=this._x,i=this._y,s=this._z,r=t.elements[0],n=t.elements[1],a=t.elements[2],h=t.elements[3],l=h*e+n*s-a*i,u=h*i+a*e-r*s,f=h*s+r*i-n*e,c=-r*e-n*i-a*s;return this._x=l*h+c*-r+u*-a-f*-n,this._y=u*h+c*-n+f*-r-l*-a,this._z=f*h+c*-a+l*-n-u*-r,this}project(t){return this.applyMat4(t.viewMatrix).applyMat4(t.projectionMatrix),this}unproject(t){return this.applyMat4(t.projectionMatrix.getInverse()).applyMat4(t.worldMatrix),this}}const hn=new ti,ul=new nt,cl=new Ne;class Ds{constructor(t,{isFBOTexture:e=!1,fromTexture:i=!1,loader:s,sampler:r,floatingPoint:n="none",premultiplyAlpha:a=!1,anisotropy:h=1,generateMipmap:l=null,wrapS:u,wrapT:f,minFilter:c,magFilter:d}={}){if(this.type="Texture",t=t&&t.renderer||t,!t||t.type!=="Renderer")Xt(this.type+": Renderer not passed as first argument",t);else if(!t.gl){t.production||Xt(this.type+": Unable to create a "+this.type+" because the Renderer WebGL context is not defined");return}if(this.renderer=t,this.gl=this.renderer.gl,this.uuid=Ra(),this._globalParameters={unpackAlignment:4,flipY:!e,premultiplyAlpha:!1,shouldPremultiplyAlpha:a,floatingPoint:n,type:this.gl.UNSIGNED_BYTE,internalFormat:this.gl.RGBA,format:this.gl.RGBA},this.parameters={anisotropy:h,generateMipmap:l,wrapS:u||this.gl.CLAMP_TO_EDGE,wrapT:f||this.gl.CLAMP_TO_EDGE,minFilter:c||this.gl.LINEAR,magFilter:d||this.gl.LINEAR,_shouldUpdate:!0},this._initState(),this.sourceType=e?"fbo":"empty",this._useCache=!0,this._samplerName=r,this._sampler={isActive:!1,isTextureBound:!1,texture:this.gl.createTexture()},this._textureMatrix={matrix:new Ne,isActive:!1},this._size={width:1,height:1},this.scale=new ti(1),this.scale.onChange(()=>this.resize()),this.offset=new ti,this.offset.onChange(()=>this.resize()),this._loader=s,this._sourceLoaded=!1,this._uploaded=!1,this._willUpdate=!1,this.shouldUpdate=!1,this._forceUpdate=!1,this.userData={},this._canDraw=!1,i){this._copyOnInit=!0,this._copiedFrom=i;return}this._copyOnInit=!1,this._initTexture()}_initState(){this._state={anisotropy:1,generateMipmap:!1,wrapS:null,wrapT:null,minFilter:null,magFilter:this.gl.LINEAR}}_initTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this.sourceType==="empty"&&(this._globalParameters.flipY=!1,this._updateGlobalTexParameters(),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,1,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array([0,0,0,255])),this._canDraw=!0)}_restoreFromTexture(){this._copyOnInit||this._initTexture(),this._parent&&(this._setTextureUniforms(),this._setSize()),this.copy(this._copiedFrom),this._canDraw=!0}_restoreContext(){if(this._canDraw=!1,this._sampler.texture=this.gl.createTexture(),this._sampler.isActive=!1,this._sampler.isTextureBound=!1,this._textureMatrix.isActive=!1,this._initState(),this._state.generateMipmap=!1,this.parameters._shouldUpdate=!0,!this._copiedFrom)this._initTexture(),this._parent&&this._setParent(),this.source&&(this.setSource(this.source),this.sourceType==="image"?this.renderer.cache.addTexture(this):this.needUpdate()),this._canDraw=!0;else{const t=this.renderer.nextRender.add(()=>{this._copiedFrom._canDraw&&(this._restoreFromTexture(),t.keep=!1)},!0)}}addParent(t){if(!t||t.type!=="Plane"&&t.type!=="PingPongPlane"&&t.type!=="ShaderPass"&&t.type!=="RenderTarget"){this.renderer.production||V(this.type+": cannot add texture as a child of ",t," because it is not a valid parent");return}this._parent=t,this.index=this._parent.textures.length,this._parent.textures.push(this),this._setParent()}_setParent(){if(this._sampler.name=this._samplerName||"uSampler"+this.index,this._textureMatrix.name=this._samplerName?this._samplerName+"Matrix":"uTextureMatrix"+this.index,this._parent._program){if(!this._parent._program.compiled){this.renderer.production||V(this.type+": Unable to create the texture because the program is not valid");return}if(this._setTextureUniforms(),this._copyOnInit){const t=this.renderer.nextRender.add(()=>{this._copiedFrom._canDraw&&this._copiedFrom._uploaded&&(this.copy(this._copiedFrom),t.keep=!1)},!0);return}this.source?this._parent.loader&&this._parent.loader._addSourceToParent(this.source,this.sourceType):this._size={width:this._parent._boundingRect.document.width,height:this._parent._boundingRect.document.height},this._setSize()}else this._parent.type==="RenderTarget"&&(this._size={width:this._parent._size&&this._parent._size.width||this.renderer._boundingRect.width,height:this._parent._size&&this._parent._size.height||this.renderer._boundingRect.height},this._upload(),this._updateTexParameters(),this._canDraw=!0)}hasParent(){return!!this._parent}_setTextureUniforms(){const t=this._parent._program.activeUniforms;for(let e=0;e<t.textures.length;e++)t.textures[e]===this._sampler.name&&(this._sampler.isActive=!0,this.renderer.useProgram(this._parent._program),this._sampler.location=this.gl.getUniformLocation(this._parent._program.program,this._sampler.name),t.textureMatrices.find(s=>s===this._textureMatrix.name)&&(this._textureMatrix.isActive=!0,this._textureMatrix.location=this.gl.getUniformLocation(this._parent._program.program,this._textureMatrix.name)),this.gl.uniform1i(this._sampler.location,this.index))}copy(t){if(!t||t.type!=="Texture"){this.renderer.production||V(this.type+": Unable to set the texture from texture:",t);return}this._globalParameters=Object.assign({},t._globalParameters),this._state=Object.assign({},t._state),this.parameters.generateMipmap=t.parameters.generateMipmap,this._state.generateMipmap=null,this._size=t._size,!this._sourceLoaded&&t._sourceLoaded&&this._onSourceLoadedCallback&&this._onSourceLoadedCallback(),this._sourceLoaded=t._sourceLoaded,!this._uploaded&&t._uploaded&&this._onSourceUploadedCallback&&this._onSourceUploadedCallback(),this._uploaded=t._uploaded,this.sourceType=t.sourceType,this.source=t.source,this._videoFrameCallbackID=t._videoFrameCallbackID,this._sampler.texture=t._sampler.texture,this._copiedFrom=t,this._parent&&this._parent._program&&(!this._canDraw||!this._textureMatrix.matrix)&&(this._setSize(),this._canDraw=!0),this._updateTexParameters(),this.renderer.needRender()}setSource(t){this._sourceLoaded||this.renderer.nextRender.add(()=>this._onSourceLoadedCallback&&this._onSourceLoadedCallback());const e=t.tagName.toUpperCase()==="IMG"?"image":t.tagName.toLowerCase();if((e==="video"||e==="canvas")&&(this._useCache=!1),this._useCache){const i=this.renderer.cache.getTextureFromSource(t);if(i&&i.uuid!==this.uuid){this._uploaded||(this.renderer.nextRender.add(()=>this._onSourceUploadedCallback&&this._onSourceUploadedCallback()),this._uploaded=!0),this.copy(i),this.resize();return}}if(this.sourceType==="empty"||this.sourceType!==e)if(e==="video")this._willUpdate=!1,this.shouldUpdate=!0;else if(e==="canvas")this._willUpdate=!0,this.shouldUpdate=!0;else if(e==="image")this._willUpdate=!1,this.shouldUpdate=!1;else{this.renderer.production||V(this.type+": this HTML tag could not be converted into a texture:",t.tagName);return}this.source=t,this.sourceType=e,this._size={width:this.source.naturalWidth||this.source.width||this.source.videoWidth,height:this.source.naturalHeight||this.source.height||this.source.videoHeight},this._sourceLoaded=!0,this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this.resize(),this._globalParameters.flipY=!0,this._globalParameters.premultiplyAlpha=this._globalParameters.shouldPremultiplyAlpha,this.sourceType==="image"&&(this.parameters.generateMipmap=this.parameters.generateMipmap||this.parameters.generateMipmap===null,this.parameters._shouldUpdate=this.parameters.generateMipmap,this._state.generateMipmap=!1,this._upload()),this.renderer.needRender()}_updateGlobalTexParameters(){this.renderer.state.unpackAlignment!==this._globalParameters.unpackAlignment&&(this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,this._globalParameters.unpackAlignment),this.renderer.state.unpackAlignment=this._globalParameters.unpackAlignment),this.renderer.state.flipY!==this._globalParameters.flipY&&(this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,this._globalParameters.flipY),this.renderer.state.flipY=this._globalParameters.flipY),this.renderer.state.premultiplyAlpha!==this._globalParameters.premultiplyAlpha&&(this.gl.pixelStorei(this.gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._globalParameters.premultiplyAlpha),this.renderer.state.premultiplyAlpha=this._globalParameters.premultiplyAlpha),this._globalParameters.floatingPoint==="half-float"?this.renderer._isWebGL2&&this.renderer.extensions.EXT_color_buffer_float?(this._globalParameters.internalFormat=this.gl.RGBA16F,this._globalParameters.type=this.gl.HALF_FLOAT):this.renderer.extensions.OES_texture_half_float?this._globalParameters.type=this.renderer.extensions.OES_texture_half_float.HALF_FLOAT_OES:this.renderer.production||V(this.type+": could not use half-float textures because the extension is not available"):this._globalParameters.floatingPoint==="float"&&(this.renderer._isWebGL2&&this.renderer.extensions.EXT_color_buffer_float?(this._globalParameters.internalFormat=this.gl.RGBA16F,this._globalParameters.type=this.gl.FLOAT):this.renderer.extensions.OES_texture_float?this._globalParameters.type=this.renderer.extensions.OES_texture_half_float.FLOAT:this.renderer.production||V(this.type+": could not use float textures because the extension is not available"))}_updateTexParameters(){this.index&&this.renderer.state.activeTexture!==this.index&&this._bindTexture(),this.parameters.wrapS!==this._state.wrapS&&(!this.renderer._isWebGL2&&(!Ve(this._size.width)||!Ve(this._size.height))&&(this.parameters.wrapS=this.gl.CLAMP_TO_EDGE),this.parameters.wrapS!==this.gl.REPEAT&&this.parameters.wrapS!==this.gl.CLAMP_TO_EDGE&&this.parameters.wrapS!==this.gl.MIRRORED_REPEAT&&(this.renderer.production||V(this.type+": Wrong wrapS value",this.parameters.wrapS,"for this texture:",this,`
gl.CLAMP_TO_EDGE wrapping will be used instead`),this.parameters.wrapS=this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.parameters.wrapS),this._state.wrapS=this.parameters.wrapS),this.parameters.wrapT!==this._state.wrapT&&(!this.renderer._isWebGL2&&(!Ve(this._size.width)||!Ve(this._size.height))&&(this.parameters.wrapT=this.gl.CLAMP_TO_EDGE),this.parameters.wrapT!==this.gl.REPEAT&&this.parameters.wrapT!==this.gl.CLAMP_TO_EDGE&&this.parameters.wrapT!==this.gl.MIRRORED_REPEAT&&(this.renderer.production||V(this.type+": Wrong wrapT value",this.parameters.wrapT,"for this texture:",this,`
gl.CLAMP_TO_EDGE wrapping will be used instead`),this.parameters.wrapT=this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.parameters.wrapT),this._state.wrapT=this.parameters.wrapT),this.parameters.generateMipmap&&!this._state.generateMipmap&&this.source&&(!this.renderer._isWebGL2&&(!Ve(this._size.width)||!Ve(this._size.height))?this.parameters.generateMipmap=!1:this.gl.generateMipmap(this.gl.TEXTURE_2D),this._state.generateMipmap=this.parameters.generateMipmap),this.parameters.minFilter!==this._state.minFilter&&(!this.renderer._isWebGL2&&(!Ve(this._size.width)||!Ve(this._size.height))&&(this.parameters.minFilter=this.gl.LINEAR),!this.parameters.generateMipmap&&this.parameters.generateMipmap!==null&&(this.parameters.minFilter=this.gl.LINEAR),this.parameters.minFilter!==this.gl.LINEAR&&this.parameters.minFilter!==this.gl.NEAREST&&this.parameters.minFilter!==this.gl.NEAREST_MIPMAP_NEAREST&&this.parameters.minFilter!==this.gl.LINEAR_MIPMAP_NEAREST&&this.parameters.minFilter!==this.gl.NEAREST_MIPMAP_LINEAR&&this.parameters.minFilter!==this.gl.LINEAR_MIPMAP_LINEAR&&(this.renderer.production||V(this.type+": Wrong minFilter value",this.parameters.minFilter,"for this texture:",this,`
gl.LINEAR filtering will be used instead`),this.parameters.minFilter=this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.parameters.minFilter),this._state.minFilter=this.parameters.minFilter),this.parameters.magFilter!==this._state.magFilter&&(!this.renderer._isWebGL2&&(!Ve(this._size.width)||!Ve(this._size.height))&&(this.parameters.magFilter=this.gl.LINEAR),this.parameters.magFilter!==this.gl.LINEAR&&this.parameters.magFilter!==this.gl.NEAREST&&(this.renderer.production||V(this.type+": Wrong magFilter value",this.parameters.magFilter,"for this texture:",this,`
gl.LINEAR filtering will be used instead`),this.parameters.magFilter=this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.parameters.magFilter),this._state.magFilter=this.parameters.magFilter);const t=this.renderer.extensions.EXT_texture_filter_anisotropic;if(t&&this.parameters.anisotropy!==this._state.anisotropy){const e=this.gl.getParameter(t.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.parameters.anisotropy=Math.max(1,Math.min(this.parameters.anisotropy,e)),this.gl.texParameterf(this.gl.TEXTURE_2D,t.TEXTURE_MAX_ANISOTROPY_EXT,this.parameters.anisotropy),this._state.anisotropy=this.parameters.anisotropy}}setWrapS(t){this.parameters.wrapS!==t&&(this.parameters.wrapS=t,this.parameters._shouldUpdate=!0)}setWrapT(t){this.parameters.wrapT!==t&&(this.parameters.wrapT=t,this.parameters._shouldUpdate=!0)}setMinFilter(t){this.parameters.minFilter!==t&&(this.parameters.minFilter=t,this.parameters._shouldUpdate=!0)}setMagFilter(t){this.parameters.magFilter!==t&&(this.parameters.magFilter=t,this.parameters._shouldUpdate=!0)}setAnisotropy(t){t=isNaN(t)?this.parameters.anisotropy:t,this.parameters.anisotropy!==t&&(this.parameters.anisotropy=t,this.parameters._shouldUpdate=!0)}needUpdate(){this._forceUpdate=!0}_videoFrameCallback(){this._willUpdate=!0,this.source.requestVideoFrameCallback(()=>this._videoFrameCallback())}_upload(){this._updateGlobalTexParameters(),this.source?this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._globalParameters.format,this._globalParameters.type,this.source):this.sourceType==="fbo"&&this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._size.width,this._size.height,0,this._globalParameters.format,this._globalParameters.type,this.source||null),this._uploaded||(this.renderer.nextRender.add(()=>this._onSourceUploadedCallback&&this._onSourceUploadedCallback()),this._uploaded=!0)}_getSizes(){if(this.sourceType==="fbo")return{parentWidth:this._parent._boundingRect.document.width,parentHeight:this._parent._boundingRect.document.height,sourceWidth:this._parent._boundingRect.document.width,sourceHeight:this._parent._boundingRect.document.height,xOffset:0,yOffset:0};const t=this._parent.scale?hn.set(this._parent.scale.x,this._parent.scale.y):hn.set(1,1),e=this._parent._boundingRect.document.width*t.x,i=this._parent._boundingRect.document.height*t.y,s=this._size.width,r=this._size.height,n=s/r,a=e/i;let h=0,l=0;return a>n?l=Math.min(0,i-e*(1/n)):a<n&&(h=Math.min(0,e-i*n)),{parentWidth:e,parentHeight:i,sourceWidth:s,sourceHeight:r,xOffset:h,yOffset:l}}setScale(t){if(!t.type||t.type!=="Vec2"){this.renderer.production||V(this.type+": Cannot set scale because the parameter passed is not of Vec2 type:",t);return}t.sanitizeNaNValuesWith(this.scale).max(hn.set(.001,.001)),t.equals(this.scale)||(this.scale.copy(t),this.resize())}setOffset(t){if(!t.type||t.type!=="Vec2"){this.renderer.production||V(this.type+": Cannot set offset because the parameter passed is not of Vec2 type:",scale);return}t.sanitizeNaNValuesWith(this.offset),t.equals(this.offset)||(this.offset.copy(t),this.resize())}_setSize(){if(this._parent&&this._parent._program){const t=this._getSizes();this._updateTextureMatrix(t)}}resize(){this.sourceType==="fbo"?(this._size={width:this._parent._size&&this._parent._size.width||this._parent._boundingRect.document.width,height:this._parent._size&&this._parent._size.height||this._parent._boundingRect.document.height},this._copiedFrom||(this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this._globalParameters.internalFormat,this._size.width,this._size.height,0,this._globalParameters.format,this._globalParameters.type,null))):this.source&&(this._size={width:this.source.naturalWidth||this.source.width||this.source.videoWidth,height:this.source.naturalHeight||this.source.height||this.source.videoHeight}),this._setSize()}_updateTextureMatrix(t){const e=ul.set(t.parentWidth/(t.parentWidth-t.xOffset),t.parentHeight/(t.parentHeight-t.yOffset),1);e.x/=this.scale.x,e.y/=this.scale.y,this._textureMatrix.matrix=cl.setFromArray([e.x,0,0,0,0,e.y,0,0,0,0,1,0,(1-e.x)/2+this.offset.x,(1-e.y)/2+this.offset.y,0,1]),this._updateMatrixUniform()}_updateMatrixUniform(){this._textureMatrix.isActive&&(this.renderer.useProgram(this._parent._program),this.gl.uniformMatrix4fv(this._textureMatrix.location,!1,this._textureMatrix.matrix.elements))}_onSourceLoaded(t){this.setSource(t),this.sourceType==="image"&&this.renderer.cache.addTexture(this)}_bindTexture(){this._canDraw&&(this.renderer.state.activeTexture!==this.index&&(this.gl.activeTexture(this.gl.TEXTURE0+this.index),this.renderer.state.activeTexture=this.index),this.gl.bindTexture(this.gl.TEXTURE_2D,this._sampler.texture),this._sampler.isTextureBound||(this._sampler.isTextureBound=!!this.gl.getParameter(this.gl.TEXTURE_BINDING_2D),this._sampler.isTextureBound&&this.renderer.needRender()))}_draw(){this._sampler.isActive&&(this._bindTexture(),this.sourceType==="video"&&this.source&&!this._videoFrameCallbackID&&this.source.readyState>=this.source.HAVE_CURRENT_DATA&&!this.source.paused&&(this._willUpdate=!0),(this._forceUpdate||this._willUpdate&&this.shouldUpdate)&&(this._state.generateMipmap=!1,this._upload()),this.sourceType==="video"&&(this._willUpdate=!1),this._forceUpdate=!1),this.parameters._shouldUpdate&&(this._updateTexParameters(),this.parameters._shouldUpdate=!1)}onSourceLoaded(t){return t&&(this._onSourceLoadedCallback=t),this}onSourceUploaded(t){return t&&(this._onSourceUploadedCallback=t),this}_dispose(t=!1){this.sourceType==="video"||this.sourceType==="image"&&!this.renderer.state.isActive?(this._loader&&this._loader._removeSource(this),this.source=null):this.sourceType==="canvas"&&(this.source.width=this.source.width,this.source=null),this._parent=null,this.gl&&!this._copiedFrom&&(t||this.sourceType!=="image"||!this.renderer.state.isActive)&&(this._canDraw=!1,this.renderer.cache.removeTexture(this),this.gl.activeTexture(this.gl.TEXTURE0+this.index),this.gl.bindTexture(this.gl.TEXTURE_2D,null),this.gl.deleteTexture(this._sampler.texture))}}class dl{constructor(t,e="anonymous"){if(this.type="TextureLoader",t=t&&t.renderer||t,!t||t.type!=="Renderer")Xt(this.type+": Renderer not passed as first argument",t);else if(!t.gl){Xt(this.type+": Renderer WebGL context is undefined",t);return}this.renderer=t,this.gl=this.renderer.gl,this.crossOrigin=e,this.elements=[]}_addElement(t,e,i,s){const r={source:t,texture:e,load:this._sourceLoaded.bind(this,t,e,i),error:this._sourceLoadError.bind(this,t,s)};return this.elements.push(r),r}_sourceLoadError(t,e,i){e&&e(t,i)}_sourceLoaded(t,e,i){e._sourceLoaded||(e._onSourceLoaded(t),this._parent&&(this._increment&&this._increment(),this.renderer.nextRender.add(()=>this._parent._onLoadingCallback&&this._parent._onLoadingCallback(e))),i&&i(e))}_getSourceType(t){let e;return typeof t=="string"?t.match(/\.(jpeg|jpg|jfif|pjpeg|pjp|gif|bmp|png|webp|svg|avif|apng)$/)!==null?e="image":t.match(/\.(webm|mp4|mpg|mpeg|avi|ogg|ogm|ogv|mov|av1)$/)!==null&&(e="video"):t.tagName.toUpperCase()==="IMG"?e="image":t.tagName.toUpperCase()==="VIDEO"?e="video":t.tagName.toUpperCase()==="CANVAS"&&(e="canvas"),e}_createImage(t){if(typeof t=="string"||!t.hasAttribute("crossOrigin")){const e=new Image;return e.crossOrigin=this.crossOrigin,typeof t=="string"?e.src=t:(e.src=t.src,t.hasAttribute("data-sampler")&&e.setAttribute("data-sampler",t.getAttribute("data-sampler"))),e}else return t}_createVideo(t){if(typeof t=="string"||t.getAttribute("crossOrigin")===null){const e=document.createElement("video");return e.crossOrigin=this.crossOrigin,typeof t=="string"?e.src=t:(e.src=t.src,t.hasAttribute("data-sampler")&&e.setAttribute("data-sampler",t.getAttribute("data-sampler"))),e}else return t}loadSource(t,e,i,s){switch(this._getSourceType(t)){case"image":this.loadImage(t,e,i,s);break;case"video":this.loadVideo(t,e,i,s);break;case"canvas":this.loadCanvas(t,e,i);break;default:this._sourceLoadError(t,s,"this source could not be converted into a texture: "+t);break}}loadSources(t,e,i,s){for(let r=0;r<t.length;r++)this.loadSource(t[r],e,i,s)}loadImage(t,e={},i,s){const r=this.renderer.cache.getTextureFromSource(t);let n=Object.assign({},e);if(this._parent&&(n=Object.assign(n,this._parent._texturesOptions)),n.loader=this,r){n.sampler=typeof t!="string"&&t.hasAttribute("data-sampler")?t.getAttribute("data-sampler"):n.sampler,n.fromTexture=r;const u=new Ds(this.renderer,n);this._sourceLoaded(r.source,u,i),this._parent&&this._addToParent(u,r.source,"image");return}const a=this._createImage(t);n.sampler=a.hasAttribute("data-sampler")?a.getAttribute("data-sampler"):n.sampler;const h=new Ds(this.renderer,n),l=this._addElement(a,h,i,s);a.complete?this._sourceLoaded(a,h,i):a.decode?a.decode().then(this._sourceLoaded.bind(this,a,h,i)).catch(()=>{a.addEventListener("load",l.load,!1),a.addEventListener("error",l.error,!1)}):(a.addEventListener("load",l.load,!1),a.addEventListener("error",l.error,!1)),this._parent&&this._addToParent(h,a,"image")}loadImages(t,e,i,s){for(let r=0;r<t.length;r++)this.loadImage(t[r],e,i,s)}loadVideo(t,e={},i,s){const r=this._createVideo(t);r.preload=!0,r.muted=!0,r.loop=!0,r.setAttribute("playsinline",""),r.crossOrigin=this.crossOrigin;let n=Object.assign({},e);this._parent&&(n=Object.assign(e,this._parent._texturesOptions)),n.loader=this,n.sampler=r.hasAttribute("data-sampler")?r.getAttribute("data-sampler"):n.sampler;const a=new Ds(this.renderer,n),h=this._addElement(r,a,i,s);r.addEventListener("canplaythrough",h.load,!1),r.addEventListener("error",h.error,!1),r.readyState>=r.HAVE_FUTURE_DATA&&i&&this._sourceLoaded(r,a,i),r.load(),this._addToParent&&this._addToParent(a,r,"video"),"requestVideoFrameCallback"in HTMLVideoElement.prototype&&(h.videoFrameCallback=a._videoFrameCallback.bind(a),a._videoFrameCallbackID=r.requestVideoFrameCallback(h.videoFrameCallback))}loadVideos(t,e,i,s){for(let r=0;r<t.length;r++)this.loadVideo(t[r],e,i,s)}loadCanvas(t,e={},i){let s=Object.assign({},e);this._parent&&(s=Object.assign(e,this._parent._texturesOptions)),s.loader=this,s.sampler=t.hasAttribute("data-sampler")?t.getAttribute("data-sampler"):s.sampler;const r=new Ds(this.renderer,s);this._addElement(t,r,i,null),this._sourceLoaded(t,r,i),this._parent&&this._addToParent(r,t,"canvas")}loadCanvases(t,e,i){for(let s=0;s<t.length;s++)this.loadCanvas(t[s],e,i)}_removeSource(t){const e=this.elements.find(i=>i.texture.uuid===t.uuid);e&&(t.sourceType==="image"?e.source.removeEventListener("load",e.load,!1):t.sourceType==="video"&&(e.videoFrameCallback&&t._videoFrameCallbackID&&e.source.cancelVideoFrameCallback(t._videoFrameCallbackID),e.source.removeEventListener("canplaythrough",e.load,!1),e.source.pause(),e.source.removeAttribute("src"),e.source.load()),e.source.removeEventListener("error",e.error,!1))}}class fl extends dl{constructor(t,e,{sourcesLoaded:i=0,sourcesToLoad:s=0,complete:r=!1,onComplete:n=()=>{}}={}){super(t,e.crossOrigin),this.type="PlaneTextureLoader",this._parent=e,this._parent.type!=="Plane"&&this._parent.type!=="PingPongPlane"&&this._parent.type!=="ShaderPass"&&(V(this.type+": Wrong parent type assigned to this loader"),this._parent=null),this.sourcesLoaded=i,this.sourcesToLoad=s,this.complete=r,this.onComplete=n}_setLoaderSize(t){this.sourcesToLoad=t,this.sourcesToLoad===0&&(this.complete=!0,this.renderer.nextRender.add(()=>this.onComplete&&this.onComplete()))}_increment(){this.sourcesLoaded++,this.sourcesLoaded>=this.sourcesToLoad&&!this.complete&&(this.complete=!0,this.renderer.nextRender.add(()=>this.onComplete&&this.onComplete()))}_addSourceToParent(t,e){if(e==="image"){const i=this._parent.images;!i.find(r=>r.src===t.src)&&i.push(t)}else if(e==="video"){const i=this._parent.videos;!i.find(r=>r.src===t.src)&&i.push(t)}else if(e==="canvas"){const i=this._parent.canvases;!i.find(r=>r.isSameNode(t))&&i.push(t)}}_addToParent(t,e,i){this._addSourceToParent(e,i),this._parent&&t.addParent(this._parent)}}class pl{constructor(t,e="Mesh",{vertexShaderID:i,fragmentShaderID:s,vertexShader:r,fragmentShader:n,uniforms:a={},widthSegments:h=1,heightSegments:l=1,renderOrder:u=0,depthTest:f=!0,cullFace:c="back",texturesOptions:d={},crossOrigin:_="anonymous"}={}){if(this.type=e,t=t&&t.renderer||t,(!t||t.type!=="Renderer")&&(Xt(this.type+": Curtains not passed as first argument or Curtains Renderer is missing",t),setTimeout(()=>{this._onErrorCallback&&this._onErrorCallback()},0)),this.renderer=t,this.gl=this.renderer.gl,!this.gl){this.renderer.production||Xt(this.type+": Unable to create a "+this.type+" because the Renderer WebGL context is not defined"),setTimeout(()=>{this._onErrorCallback&&this._onErrorCallback()},0);return}this._canDraw=!1,this.renderOrder=u,this._depthTest=f,this.cullFace=c,this.cullFace!=="back"&&this.cullFace!=="front"&&this.cullFace!=="none"&&(this.cullFace="back"),this.textures=[],this._texturesOptions=Object.assign({premultiplyAlpha:!1,anisotropy:1,floatingPoint:"none",wrapS:this.gl.CLAMP_TO_EDGE,wrapT:this.gl.CLAMP_TO_EDGE,minFilter:this.gl.LINEAR,magFilter:this.gl.LINEAR},d),this.crossOrigin=_,!r&&i&&document.getElementById(i)&&(r=document.getElementById(i).innerHTML),!n&&s&&document.getElementById(s)&&(n=document.getElementById(s).innerHTML),this._initMesh(),h=parseInt(h),l=parseInt(l),this._geometry=new ll(this.renderer,{width:h,height:l}),this._program=new Ca(this.renderer,{parent:this,vertexShader:r,fragmentShader:n}),this._program.compiled?(this._program.createUniforms(a),this.uniforms=this._program.uniformsManager.uniforms,this._geometry.setProgram(this._program),this.renderer.onSceneChange()):this.renderer.nextRender.add(()=>this._onErrorCallback&&this._onErrorCallback())}_initMesh(){this.uuid=Ra(),this.loader=new fl(this.renderer,this,{sourcesLoaded:0,initSourcesToLoad:0,complete:!1,onComplete:()=>{this._onReadyCallback&&this._onReadyCallback(),this.renderer.needRender()}}),this.images=[],this.videos=[],this.canvases=[],this.userData={},this._canDraw=!0}_restoreContext(){this._canDraw=!1,this._matrices&&(this._matrices=null),this._program=new Ca(this.renderer,{parent:this,vertexShader:this._program.vsCode,fragmentShader:this._program.fsCode}),this._program.compiled&&(this._geometry.restoreContext(this._program),this._program.createUniforms(this.uniforms),this.uniforms=this._program.uniformsManager.uniforms,this._programRestored())}setRenderTarget(t){if(!t||t.type!=="RenderTarget"){this.renderer.production||V(this.type+": Could not set the render target because the argument passed is not a RenderTarget class object",t);return}this.type==="Plane"&&this.renderer.scene.removePlane(this),this.target=t,this.type==="Plane"&&this.renderer.scene.addPlane(this)}setRenderOrder(t=0){t=isNaN(t)?this.renderOrder:parseInt(t),t!==this.renderOrder&&(this.renderOrder=t,this.renderer.scene.setPlaneRenderOrder(this))}createTexture(t={}){const e=new Ds(this.renderer,Object.assign(t,this._texturesOptions));return e.addParent(this),e}addTexture(t){if(!t||t.type!=="Texture"){this.renderer.production||V(this.type+": cannot add ",t," to this "+this.type+" because it is not a valid texture");return}t.addParent(this)}loadSources(t,e={},i,s){for(let r=0;r<t.length;r++)this.loadSource(t[r],e,i,s)}loadSource(t,e={},i,s){this.loader.loadSource(t,Object.assign(e,this._texturesOptions),r=>{i&&i(r)},(r,n)=>{this.renderer.production||V(this.type+": this HTML tag could not be converted into a texture:",r.tagName),s&&s(r,n)})}loadImage(t,e={},i,s){this.loader.loadImage(t,Object.assign(e,this._texturesOptions),r=>{i&&i(r)},(r,n)=>{this.renderer.production||V(this.type+`: There has been an error:
`,n,`
while loading this image:
`,r),s&&s(r,n)})}loadVideo(t,e={},i,s){this.loader.loadVideo(t,Object.assign(e,this._texturesOptions),r=>{i&&i(r)},(r,n)=>{this.renderer.production||V(this.type+`: There has been an error:
`,n,`
while loading this video:
`,r),s&&s(r,n)})}loadCanvas(t,e={},i){this.loader.loadCanvas(t,Object.assign(e,this._texturesOptions),s=>{i&&i(s)})}loadImages(t,e={},i,s){for(let r=0;r<t.length;r++)this.loadImage(t[r],e,i,s)}loadVideos(t,e={},i,s){for(let r=0;r<t.length;r++)this.loadVideo(t[r],e,i,s)}loadCanvases(t,e={},i){for(let s=0;s<t.length;s++)this.loadCanvas(t[s],e,i)}playVideos(){for(let t=0;t<this.textures.length;t++){const e=this.textures[t];if(e.sourceType==="video"){const i=e.source.play();i!==void 0&&i.catch(s=>{this.renderer.production||V(this.type+": Could not play the video : ",s)})}}}_draw(){this.renderer.setDepthTest(this._depthTest),this.renderer.setFaceCulling(this.cullFace),this._program.updateUniforms(),this._geometry.bindBuffers(),this.renderer.state.forceBufferUpdate=!1;for(let t=0;t<this.textures.length;t++)if(this.textures[t]._draw(),this.textures[t]._sampler.isActive&&!this.textures[t]._sampler.isTextureBound)return;this._geometry.draw(),this.renderer.state.activeTexture=null,this._onAfterRenderCallback&&this._onAfterRenderCallback()}onError(t){return t&&(this._onErrorCallback=t),this}onLoading(t){return t&&(this._onLoadingCallback=t),this}onReady(t){return t&&(this._onReadyCallback=t),this}onRender(t){return t&&(this._onRenderCallback=t),this}onAfterRender(t){return t&&(this._onAfterRenderCallback=t),this}remove(){this._canDraw=!1,this.target&&this.renderer.bindFrameBuffer(null),this._dispose(),this.type==="Plane"?this.renderer.removePlane(this):this.type==="ShaderPass"&&(this.target&&(this.target._shaderPass=null,this.target.remove(),this.target=null),this.renderer.removeShaderPass(this))}_dispose(){if(this.gl){this._geometry&&this._geometry.dispose(),this.target&&this.type==="ShaderPass"&&(this.renderer.removeRenderTarget(this.target),this.textures.shift());for(let t=0;t<this.textures.length;t++)this.textures[t]._dispose();this.textures=[]}}}const Aa=new ti,_l=new ti;class gl extends pl{constructor(t,e,i="DOMMesh",{widthSegments:s,heightSegments:r,renderOrder:n,depthTest:a,cullFace:h,uniforms:l,vertexShaderID:u,fragmentShaderID:f,vertexShader:c,fragmentShader:d,texturesOptions:_,crossOrigin:p}={}){u=u||e&&e.getAttribute("data-vs-id"),f=f||e&&e.getAttribute("data-fs-id"),super(t,i,{widthSegments:s,heightSegments:r,renderOrder:n,depthTest:a,cullFace:h,uniforms:l,vertexShaderID:u,fragmentShaderID:f,vertexShader:c,fragmentShader:d,texturesOptions:_,crossOrigin:p}),this.gl&&(this.htmlElement=e,(!this.htmlElement||this.htmlElement.length===0)&&(this.renderer.production||V(this.type+": The HTML element you specified does not currently exists in the DOM")),this._setDocumentSizes())}_setDocumentSizes(){let t=this.htmlElement.getBoundingClientRect();this._boundingRect||(this._boundingRect={}),this._boundingRect.document={width:t.width*this.renderer.pixelRatio,height:t.height*this.renderer.pixelRatio,top:t.top*this.renderer.pixelRatio,left:t.left*this.renderer.pixelRatio}}getBoundingRect(){return{width:this._boundingRect.document.width,height:this._boundingRect.document.height,top:this._boundingRect.document.top,left:this._boundingRect.document.left,right:this._boundingRect.document.left+this._boundingRect.document.width,bottom:this._boundingRect.document.top+this._boundingRect.document.height}}resize(){this._setDocumentSizes(),this.type==="Plane"&&(this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._setWorldSizes(),this._applyWorldPositions());for(let t=0;t<this.textures.length;t++)this.textures[t].resize();this.renderer.nextRender.add(()=>this._onAfterResizeCallback&&this._onAfterResizeCallback())}mouseToPlaneCoords(t){const e=this.scale?this.scale:_l.set(1,1),i=Aa.set((this._boundingRect.document.width-this._boundingRect.document.width*e.x)/2,(this._boundingRect.document.height-this._boundingRect.document.height*e.y)/2),s={width:this._boundingRect.document.width*e.x/this.renderer.pixelRatio,height:this._boundingRect.document.height*e.y/this.renderer.pixelRatio,top:(this._boundingRect.document.top+i.y)/this.renderer.pixelRatio,left:(this._boundingRect.document.left+i.x)/this.renderer.pixelRatio};return Aa.set((t.x-s.left)/s.width*2-1,1-(t.y-s.top)/s.height*2)}onAfterResize(t){return t&&(this._onAfterResizeCallback=t),this}}class ml{constructor({fov:t=50,near:e=.1,far:i=150,width:s,height:r,pixelRatio:n=1}={}){this.position=new nt,this.projectionMatrix=new Ne,this.worldMatrix=new Ne,this.viewMatrix=new Ne,this._shouldUpdate=!1,this.setSize(),this.setPerspective(t,e,i,s,r,n)}setFov(t){t=isNaN(t)?this.fov:parseFloat(t),t=Math.max(1,Math.min(t,179)),t!==this.fov&&(this.fov=t,this.setPosition(),this._shouldUpdate=!0),this.setCSSPerspective()}setNear(t){t=isNaN(t)?this.near:parseFloat(t),t=Math.max(t,.01),t!==this.near&&(this.near=t,this._shouldUpdate=!0)}setFar(t){t=isNaN(t)?this.far:parseFloat(t),t=Math.max(t,50),t!==this.far&&(this.far=t,this._shouldUpdate=!0)}setPixelRatio(t){t!==this.pixelRatio&&(this._shouldUpdate=!0),this.pixelRatio=t}setSize(t,e){(t!==this.width||e!==this.height)&&(this._shouldUpdate=!0),this.width=t,this.height=e}setPerspective(t,e,i,s,r,n){this.setPixelRatio(n),this.setSize(s,r),this.setFov(t),this.setNear(e),this.setFar(i),this._shouldUpdate&&this.updateProjectionMatrix()}setPosition(){this.position.set(0,0,1),this.worldMatrix.setFromArray([1,0,0,0,0,1,0,0,0,0,1,0,this.position.x,this.position.y,this.position.z,1]),this.viewMatrix=this.viewMatrix.copy(this.worldMatrix).getInverse()}setCSSPerspective(){this.CSSPerspective=Math.pow(Math.pow(this.width/(2*this.pixelRatio),2)+Math.pow(this.height/(2*this.pixelRatio),2),.5)/Math.tan(this.fov*.5*Math.PI/180)}getScreenRatiosFromFov(t=0){const e=this.position.z;t<e?t-=e:t+=e;const i=this.fov*Math.PI/180,s=2*Math.tan(i/2)*Math.abs(t);return{width:s*this.width/this.height,height:s}}updateProjectionMatrix(){const t=this.width/this.height,e=this.near*Math.tan(Math.PI/180*.5*this.fov),i=2*e,s=t*i,r=-.5*s,n=r+s,a=e-i,h=2*this.near/(n-r),l=2*this.near/(e-a),u=(n+r)/(n-r),f=(e+a)/(e-a),c=-(this.far+this.near)/(this.far-this.near),d=-2*this.far*this.near/(this.far-this.near);this.projectionMatrix.setFromArray([h,0,0,0,0,l,0,0,u,f,c,-1,0,0,d,0])}forceUpdate(){this._shouldUpdate=!0}cancelUpdate(){this._shouldUpdate=!1}}class mr{constructor(t=new Float32Array([0,0,0,1]),e="XYZ"){this.type="Quat",this.elements=t,this.axisOrder=e}setFromArray(t){return this.elements[0]=t[0],this.elements[1]=t[1],this.elements[2]=t[2],this.elements[3]=t[3],this}setAxisOrder(t){switch(t=t.toUpperCase(),t){case"XYZ":case"YXZ":case"ZXY":case"ZYX":case"YZX":case"XZY":this.axisOrder=t;break;default:this.axisOrder="XYZ"}return this}copy(t){return this.elements=t.elements,this.axisOrder=t.axisOrder,this}clone(){return new mr().copy(this)}equals(t){return this.elements[0]===t.elements[0]&&this.elements[1]===t.elements[1]&&this.elements[2]===t.elements[2]&&this.elements[3]===t.elements[3]&&this.axisOrder===t.axisOrder}setFromVec3(t){const e=t.x*.5,i=t.y*.5,s=t.z*.5,r=Math.cos(e),n=Math.cos(i),a=Math.cos(s),h=Math.sin(e),l=Math.sin(i),u=Math.sin(s);return this.axisOrder==="XYZ"?(this.elements[0]=h*n*a+r*l*u,this.elements[1]=r*l*a-h*n*u,this.elements[2]=r*n*u+h*l*a,this.elements[3]=r*n*a-h*l*u):this.axisOrder==="YXZ"?(this.elements[0]=h*n*a+r*l*u,this.elements[1]=r*l*a-h*n*u,this.elements[2]=r*n*u-h*l*a,this.elements[3]=r*n*a+h*l*u):this.axisOrder==="ZXY"?(this.elements[0]=h*n*a-r*l*u,this.elements[1]=r*l*a+h*n*u,this.elements[2]=r*n*u+h*l*a,this.elements[3]=r*n*a-h*l*u):this.axisOrder==="ZYX"?(this.elements[0]=h*n*a-r*l*u,this.elements[1]=r*l*a+h*n*u,this.elements[2]=r*n*u-h*l*a,this.elements[3]=r*n*a+h*l*u):this.axisOrder==="YZX"?(this.elements[0]=h*n*a+r*l*u,this.elements[1]=r*l*a+h*n*u,this.elements[2]=r*n*u-h*l*a,this.elements[3]=r*n*a-h*l*u):this.axisOrder==="XZY"&&(this.elements[0]=h*n*a-r*l*u,this.elements[1]=r*l*a-h*n*u,this.elements[2]=r*n*u+h*l*a,this.elements[3]=r*n*a+h*l*u),this}}const xl=new ti,yl=new nt,vl=new nt,bl=new nt,wl=new nt,Tl=new nt,Sl=new nt,xe=new nt,ye=new nt,Oa=new mr,Pl=new nt(.5,.5,0),Rl=new nt,El=new nt,Ml=new nt,Cl=new nt,Al=new ti;class Ol extends gl{constructor(t,e,{widthSegments:i,heightSegments:s,renderOrder:r,depthTest:n,cullFace:a,uniforms:h,vertexShaderID:l,fragmentShaderID:u,vertexShader:f,fragmentShader:c,texturesOptions:d,crossOrigin:_,alwaysDraw:p=!1,visible:g=!0,transparent:m=!1,drawCheckMargins:v={top:0,right:0,bottom:0,left:0},autoloadSources:T=!0,watchScroll:x=!0,fov:b=50}={}){super(t,e,"Plane",{widthSegments:i,heightSegments:s,renderOrder:r,depthTest:n,cullFace:a,uniforms:h,vertexShaderID:l,fragmentShaderID:u,vertexShader:f,fragmentShader:c,texturesOptions:d,crossOrigin:_}),this.gl&&(this.index=this.renderer.planes.length,this.target=null,this.alwaysDraw=p,this._shouldDraw=!0,this.visible=g,this._transparent=m,this.drawCheckMargins=v,this.autoloadSources=T,this.watchScroll=x,this._updateMVMatrix=!1,this.camera=new ml({fov:b,width:this.renderer._boundingRect.width,height:this.renderer._boundingRect.height,pixelRatio:this.renderer.pixelRatio}),this._program.compiled&&(this._initPlane(),this.renderer.scene.addPlane(this),this.renderer.planes.push(this)))}_programRestored(){this.target&&this.setRenderTarget(this.renderer.renderTargets[this.target.index]),this._initMatrices(),this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._setWorldSizes(),this._applyWorldPositions(),this.renderer.scene.addPlane(this);for(let t=0;t<this.textures.length;t++)this.textures[t]._parent=this,this.textures[t]._restoreContext();this._canDraw=!0}_initPlane(){this._initTransformValues(),this._initPositions(),this.setPerspective(this.camera.fov,this.camera.near,this.camera.far),this._initSources()}_initTransformValues(){this.rotation=new nt,this.rotation.onChange(()=>this._applyRotation()),this.quaternion=new mr,this.relativeTranslation=new nt,this.relativeTranslation.onChange(()=>this._setTranslation()),this._translation=new nt,this.scale=new nt(1),this.scale.onChange(()=>{this.scale.z=1,this._applyScale()}),this.transformOrigin=new nt(.5,.5,0),this.transformOrigin.onChange(()=>{this._setWorldTransformOrigin(),this._updateMVMatrix=!0})}resetPlane(t){this._initTransformValues(),this._setWorldTransformOrigin(),t!==null&&t?(this.htmlElement=t,this.resize()):!t&&!this.renderer.production&&V(this.type+": You are trying to reset a plane with a HTML element that does not exist. The old HTML element will be kept instead.")}removeRenderTarget(){this.target&&(this.renderer.scene.removePlane(this),this.target=null,this.renderer.scene.addPlane(this))}_initPositions(){this._initMatrices(),this._setWorldSizes(),this._applyWorldPositions()}_initMatrices(){const t=new Ne;this._matrices={world:{matrix:t},modelView:{name:"uMVMatrix",matrix:t,location:this.gl.getUniformLocation(this._program.program,"uMVMatrix")},projection:{name:"uPMatrix",matrix:t,location:this.gl.getUniformLocation(this._program.program,"uPMatrix")},modelViewProjection:{matrix:t}}}_setPerspectiveMatrix(){this.camera._shouldUpdate&&(this.renderer.useProgram(this._program),this.gl.uniformMatrix4fv(this._matrices.projection.location,!1,this._matrices.projection.matrix.elements)),this.camera.cancelUpdate()}setPerspective(t,e,i){this.camera.setPerspective(t,e,i,this.renderer._boundingRect.width,this.renderer._boundingRect.height,this.renderer.pixelRatio),this.renderer.state.isContextLost&&this.camera.forceUpdate(),this._matrices.projection.matrix=this.camera.projectionMatrix,this.camera._shouldUpdate&&(this._setWorldSizes(),this._applyWorldPositions(),this._translation.z=this.relativeTranslation.z/this.camera.CSSPerspective),this._updateMVMatrix=this.camera._shouldUpdate}_setMVMatrix(){this._updateMVMatrix&&(this._matrices.world.matrix=this._matrices.world.matrix.composeFromOrigin(this._translation,this.quaternion,this.scale,this._boundingRect.world.transformOrigin),this._matrices.world.matrix.scale({x:this._boundingRect.world.width,y:this._boundingRect.world.height,z:1}),this._matrices.modelView.matrix.copy(this._matrices.world.matrix),this._matrices.modelView.matrix.elements[14]-=this.camera.position.z,this._matrices.modelViewProjection.matrix=this._matrices.projection.matrix.multiply(this._matrices.modelView.matrix),this.alwaysDraw||this._shouldDrawCheck(),this.renderer.useProgram(this._program),this.gl.uniformMatrix4fv(this._matrices.modelView.location,!1,this._matrices.modelView.matrix.elements)),this._updateMVMatrix=!1}_setWorldTransformOrigin(){this._boundingRect.world.transformOrigin=new nt((this.transformOrigin.x*2-1)*this._boundingRect.world.width,-(this.transformOrigin.y*2-1)*this._boundingRect.world.height,this.transformOrigin.z)}_documentToWorldSpace(t){return vl.set(t.x*this.renderer.pixelRatio/this.renderer._boundingRect.width*this._boundingRect.world.ratios.width,-(t.y*this.renderer.pixelRatio/this.renderer._boundingRect.height)*this._boundingRect.world.ratios.height,t.z)}_setWorldSizes(){const t=this.camera.getScreenRatiosFromFov();this._boundingRect.world={width:this._boundingRect.document.width/this.renderer._boundingRect.width*t.width/2,height:this._boundingRect.document.height/this.renderer._boundingRect.height*t.height/2,ratios:t},this._setWorldTransformOrigin()}_setWorldPosition(){const t={x:this._boundingRect.document.width/2+this._boundingRect.document.left,y:this._boundingRect.document.height/2+this._boundingRect.document.top},e={x:this.renderer._boundingRect.width/2+this.renderer._boundingRect.left,y:this.renderer._boundingRect.height/2+this.renderer._boundingRect.top};this._boundingRect.world.top=(e.y-t.y)/this.renderer._boundingRect.height*this._boundingRect.world.ratios.height,this._boundingRect.world.left=(t.x-e.x)/this.renderer._boundingRect.width*this._boundingRect.world.ratios.width}setScale(t){if(!t.type||t.type!=="Vec2"){this.renderer.production||V(this.type+": Cannot set scale because the parameter passed is not of Vec2 type:",t);return}t.sanitizeNaNValuesWith(this.scale).max(xl.set(.001,.001)),(t.x!==this.scale.x||t.y!==this.scale.y)&&(this.scale.set(t.x,t.y,1),this._applyScale())}_applyScale(){for(let t=0;t<this.textures.length;t++)this.textures[t].resize();this._updateMVMatrix=!0}setRotation(t){if(!t.type||t.type!=="Vec3"){this.renderer.production||V(this.type+": Cannot set rotation because the parameter passed is not of Vec3 type:",t);return}t.sanitizeNaNValuesWith(this.rotation),t.equals(this.rotation)||(this.rotation.copy(t),this._applyRotation())}_applyRotation(){this.quaternion.setFromVec3(this.rotation),this._updateMVMatrix=!0}setTransformOrigin(t){if(!t.type||t.type!=="Vec3"){this.renderer.production||V(this.type+": Cannot set transform origin because the parameter passed is not of Vec3 type:",t);return}t.sanitizeNaNValuesWith(this.transformOrigin),t.equals(this.transformOrigin)||(this.transformOrigin.copy(t),this._setWorldTransformOrigin(),this._updateMVMatrix=!0)}_setTranslation(){let t=yl.set(0,0,0);this.relativeTranslation.equals(t)||(t=this._documentToWorldSpace(this.relativeTranslation)),this._translation.set(this._boundingRect.world.left+t.x,this._boundingRect.world.top+t.y,this.relativeTranslation.z/this.camera.CSSPerspective),this._updateMVMatrix=!0}setRelativeTranslation(t){if(!t.type||t.type!=="Vec3"){this.renderer.production||V(this.type+": Cannot set translation because the parameter passed is not of Vec3 type:",t);return}t.sanitizeNaNValuesWith(this.relativeTranslation),t.equals(this.relativeTranslation)||(this.relativeTranslation.copy(t),this._setTranslation())}_applyWorldPositions(){this._setWorldPosition(),this._setTranslation()}updatePosition(){this._setDocumentSizes(),this._applyWorldPositions()}updateScrollPosition(t,e){(t||e)&&(this._boundingRect.document.top+=e*this.renderer.pixelRatio,this._boundingRect.document.left+=t*this.renderer.pixelRatio,this._applyWorldPositions())}_getIntersection(t,e){let i=e.clone().sub(t),s=t.clone();for(;s.z>-1;)s.add(i);return s}_getNearPlaneIntersections(t,e,i){const s=this._matrices.modelViewProjection.matrix;if(i.length===1)i[0]===0?(e[0]=this._getIntersection(e[1],xe.set(.95,1,0).applyMat4(s)),e.push(this._getIntersection(e[3],ye.set(-1,-.95,0).applyMat4(s)))):i[0]===1?(e[1]=this._getIntersection(e[0],xe.set(-.95,1,0).applyMat4(s)),e.push(this._getIntersection(e[2],ye.set(1,-.95,0).applyMat4(s)))):i[0]===2?(e[2]=this._getIntersection(e[3],xe.set(-.95,-1,0).applyMat4(s)),e.push(this._getIntersection(e[1],ye.set(1,.95,0).applyMat4(s)))):i[0]===3&&(e[3]=this._getIntersection(e[2],xe.set(.95,-1,0).applyMat4(s)),e.push(this._getIntersection(e[0],ye.set(-1,.95,0).applyMat4(s))));else if(i.length===2)i[0]===0&&i[1]===1?(e[0]=this._getIntersection(e[3],xe.set(-1,-.95,0).applyMat4(s)),e[1]=this._getIntersection(e[2],ye.set(1,-.95,0).applyMat4(s))):i[0]===1&&i[1]===2?(e[1]=this._getIntersection(e[0],xe.set(-.95,1,0).applyMat4(s)),e[2]=this._getIntersection(e[3],ye.set(-.95,-1,0).applyMat4(s))):i[0]===2&&i[1]===3?(e[2]=this._getIntersection(e[1],xe.set(1,.95,0).applyMat4(s)),e[3]=this._getIntersection(e[0],ye.set(-1,.95,0).applyMat4(s))):i[0]===0&&i[1]===3&&(e[0]=this._getIntersection(e[1],xe.set(.95,1,0).applyMat4(s)),e[3]=this._getIntersection(e[2],ye.set(.95,-1,0).applyMat4(s)));else if(i.length===3){let r=0;for(let n=0;n<t.length;n++)i.includes(n)||(r=n);e=[e[r]],r===0?(e.push(this._getIntersection(e[0],xe.set(-.95,1,0).applyMat4(s))),e.push(this._getIntersection(e[0],ye.set(-1,.95,0).applyMat4(s)))):r===1?(e.push(this._getIntersection(e[0],xe.set(.95,1,0).applyMat4(s))),e.push(this._getIntersection(e[0],ye.set(1,.95,0).applyMat4(s)))):r===2?(e.push(this._getIntersection(e[0],xe.set(.95,-1,0).applyMat4(s))),e.push(this._getIntersection(e[0],ye.set(1,-.95,0).applyMat4(s)))):r===3&&(e.push(this._getIntersection(e[0],xe.set(-.95,-1,0).applyMat4(s))),e.push(this._getIntersection(e[0],ye.set(-1-.95,0).applyMat4(s))))}else for(let r=0;r<t.length;r++)e[r][0]=1e4,e[r][1]=1e4;return e}_getWorldCoords(){const t=[bl.set(-1,1,0),wl.set(1,1,0),Tl.set(1,-1,0),Sl.set(-1,-1,0)];let e=[],i=[];for(let h=0;h<t.length;h++){const l=t[h].applyMat4(this._matrices.modelViewProjection.matrix);e.push(l),Math.abs(l.z)>1&&i.push(h)}i.length&&(e=this._getNearPlaneIntersections(t,e,i));let s=1/0,r=-1/0,n=1/0,a=-1/0;for(let h=0;h<e.length;h++){const l=e[h];l.x<s&&(s=l.x),l.x>r&&(r=l.x),l.y<n&&(n=l.y),l.y>a&&(a=l.y)}return{top:a,right:r,bottom:n,left:s}}_computeWebGLBoundingRect(){const t=this._getWorldCoords();let e={top:1-(t.top+1)/2,right:(t.right+1)/2,bottom:1-(t.bottom+1)/2,left:(t.left+1)/2};e.width=e.right-e.left,e.height=e.bottom-e.top,this._boundingRect.worldToDocument={width:e.width*this.renderer._boundingRect.width,height:e.height*this.renderer._boundingRect.height,top:e.top*this.renderer._boundingRect.height+this.renderer._boundingRect.top,left:e.left*this.renderer._boundingRect.width+this.renderer._boundingRect.left,right:e.left*this.renderer._boundingRect.width+this.renderer._boundingRect.left+e.width*this.renderer._boundingRect.width,bottom:e.top*this.renderer._boundingRect.height+this.renderer._boundingRect.top+e.height*this.renderer._boundingRect.height}}getWebGLBoundingRect(){if(this._matrices.modelViewProjection)(!this._boundingRect.worldToDocument||this.alwaysDraw)&&this._computeWebGLBoundingRect();else return this._boundingRect.document;return this._boundingRect.worldToDocument}_getWebGLDrawRect(){return this._computeWebGLBoundingRect(),{top:this._boundingRect.worldToDocument.top-this.drawCheckMargins.top,right:this._boundingRect.worldToDocument.right+this.drawCheckMargins.right,bottom:this._boundingRect.worldToDocument.bottom+this.drawCheckMargins.bottom,left:this._boundingRect.worldToDocument.left-this.drawCheckMargins.left}}_shouldDrawCheck(){const t=this._getWebGLDrawRect();Math.round(t.right)<=this.renderer._boundingRect.left||Math.round(t.left)>=this.renderer._boundingRect.left+this.renderer._boundingRect.width||Math.round(t.bottom)<=this.renderer._boundingRect.top||Math.round(t.top)>=this.renderer._boundingRect.top+this.renderer._boundingRect.height?this._shouldDraw&&(this._shouldDraw=!1,this.renderer.nextRender.add(()=>this._onLeaveViewCallback&&this._onLeaveViewCallback())):(this._shouldDraw||this.renderer.nextRender.add(()=>this._onReEnterViewCallback&&this._onReEnterViewCallback()),this._shouldDraw=!0)}isDrawn(){return this._canDraw&&this.visible&&(this._shouldDraw||this.alwaysDraw)}enableDepthTest(t){this._depthTest=t}_initSources(){let t=0;if(this.autoloadSources){const e=this.htmlElement.getElementsByTagName("img"),i=this.htmlElement.getElementsByTagName("video"),s=this.htmlElement.getElementsByTagName("canvas");e.length&&this.loadImages(e),i.length&&this.loadVideos(i),s.length&&this.loadCanvases(s),t=e.length+i.length+s.length}this.loader._setLoaderSize(t),this._canDraw=!0}_startDrawing(){this._canDraw&&(this._onRenderCallback&&this._onRenderCallback(),this.target?this.renderer.bindFrameBuffer(this.target):this.renderer.state.scenePassIndex===null&&this.renderer.bindFrameBuffer(null),this._setPerspectiveMatrix(),this._setMVMatrix(),(this.alwaysDraw||this._shouldDraw)&&this.visible&&this._draw())}mouseToPlaneCoords(t){if(Oa.setAxisOrder(this.quaternion.axisOrder),Oa.equals(this.quaternion)&&Pl.equals(this.transformOrigin))return super.mouseToPlaneCoords(t);{const e={x:2*(t.x/(this.renderer._boundingRect.width/this.renderer.pixelRatio))-1,y:2*(1-t.y/(this.renderer._boundingRect.height/this.renderer.pixelRatio))-1},i=this.camera.position.clone(),s=Rl.set(e.x,e.y,-.5);s.unproject(this.camera),s.sub(i).normalize();const r=El.set(0,0,-1);r.applyQuat(this.quaternion).normalize();const n=Cl.set(0,0,0),a=r.dot(s);if(Math.abs(a)>=1e-4){const h=this._matrices.world.matrix.getInverse().multiply(this.camera.viewMatrix),l=this._boundingRect.world.transformOrigin.clone().add(this._translation),u=Ml.set(this._translation.x-l.x,this._translation.y-l.y,this._translation.z-l.z);u.applyQuat(this.quaternion),l.add(u);const f=r.dot(l.clone().sub(i))/a;n.copy(i.add(s.multiplyScalar(f))),n.applyMat4(h)}else n.set(1/0,1/0,1/0);return Al.set(n.x,n.y)}}onReEnterView(t){return t&&(this._onReEnterViewCallback=t),this}onLeaveView(t){return t&&(this._onLeaveViewCallback=t),this}}function ei(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function ka(o,t){o.prototype=Object.create(t.prototype),o.prototype.constructor=o,o.__proto__=t}/*!
 * GSAP 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var oe={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ns={duration:.5,overwrite:!1,delay:0},ln,Ft,xt,ve=1e8,tt=1/ve,un=Math.PI*2,kl=un/4,Dl=0,Da=Math.sqrt,Ll=Math.cos,Fl=Math.sin,Pt=function(t){return typeof t=="string"},lt=function(t){return typeof t=="function"},ii=function(t){return typeof t=="number"},cn=function(t){return typeof t>"u"},We=function(t){return typeof t=="object"},te=function(t){return t!==!1},La=function(){return typeof window<"u"},xr=function(t){return lt(t)||Pt(t)},Fa=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},zt=Array.isArray,dn=/(?:-?\.?\d|\.)+/gi,za=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,as=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,fn=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Ia=/[+-]=-?[.\d]+/,Ua=/[^,'"\[\]\s]+/gi,zl=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,at,be,pn,_n,he={},yr={},Va,Na=function(t){return(yr=Li(t,he))&&ce},gn=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},vr=function(t,e){return!e&&console.warn(t)},Wa=function(t,e){return t&&(he[t]=e)&&yr&&(yr[t]=e)||he},Ls=function(){return 0},Il={suppressEvents:!0,isStart:!0,kill:!1},br={suppressEvents:!0,kill:!1},Ul={suppressEvents:!0},mn={},pi=[],xn={},Ba,le={},yn={},Xa=30,wr=[],vn="",bn=function(t){var e=t[0],i,s;if(We(e)||lt(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(s=wr.length;s--&&!wr[s].targetTest(e););i=wr[s]}for(s=t.length;s--;)t[s]&&(t[s]._gsap||(t[s]._gsap=new mo(t[s],i)))||t.splice(s,1);return t},Di=function(t){return t._gsap||bn(Se(t))[0]._gsap},Ga=function(t,e,i){return(i=t[e])&&lt(i)?t[e]():cn(i)&&t.getAttribute&&t.getAttribute(e)||i},ee=function(t,e){return(t=t.split(",")).forEach(e)||t},_t=function(t){return Math.round(t*1e5)/1e5||0},Ot=function(t){return Math.round(t*1e7)/1e7||0},os=function(t,e){var i=e.charAt(0),s=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+s:i==="-"?t-s:i==="*"?t*s:t/s},Vl=function(t,e){for(var i=e.length,s=0;t.indexOf(e[s])<0&&++s<i;);return s<i},Tr=function(){var t=pi.length,e=pi.slice(0),i,s;for(xn={},pi.length=0,i=0;i<t;i++)s=e[i],s&&s._lazy&&(s.render(s._lazy[0],s._lazy[1],!0)._lazy=0)},Ya=function(t,e,i,s){pi.length&&!Ft&&Tr(),t.render(e,i,s||Ft&&e<0&&(t._initted||t._startAt)),pi.length&&!Ft&&Tr()},Ha=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(Ua).length<2?e:Pt(t)?t.trim():t},$a=function(t){return t},we=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},Nl=function(t){return function(e,i){for(var s in i)s in e||s==="duration"&&t||s==="ease"||(e[s]=i[s])}},Li=function(t,e){for(var i in e)t[i]=e[i];return t},qa=function o(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=We(e[i])?o(t[i]||(t[i]={}),e[i]):e[i]);return t},Sr=function(t,e){var i={},s;for(s in t)s in e||(i[s]=t[s]);return i},Fs=function(t){var e=t.parent||at,i=t.keyframes?Nl(zt(t.keyframes)):we;if(te(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},Wl=function(t,e){for(var i=t.length,s=i===e.length;s&&i--&&t[i]===e[i];);return i<0},ja=function(t,e,i,s,r){i===void 0&&(i="_first"),s===void 0&&(s="_last");var n=t[s],a;if(r)for(a=e[r];n&&n[r]>a;)n=n._prev;return n?(e._next=n._next,n._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[s]=e,e._prev=n,e.parent=e._dp=t,e},Pr=function(t,e,i,s){i===void 0&&(i="_first"),s===void 0&&(s="_last");var r=e._prev,n=e._next;r?r._next=n:t[i]===e&&(t[i]=n),n?n._prev=r:t[s]===e&&(t[s]=r),e._next=e._prev=e.parent=null},_i=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Fi=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Bl=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},wn=function(t,e,i,s){return t._startAt&&(Ft?t._startAt.revert(br):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,s))},Xl=function o(t){return!t||t._ts&&o(t.parent)},Za=function(t){return t._repeat?hs(t._tTime,t=t.duration()+t._rDelay)*t:0},hs=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},Rr=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Er=function(t){return t._end=Ot(t._start+(t._tDur/Math.abs(t._ts||t._rts||tt)||0))},Mr=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=Ot(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Er(t),i._dirty||Fi(i,t)),t},Qa=function(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=Rr(t.rawTime(),e),(!e._dur||Is(0,e.totalDuration(),i)-e._tTime>tt)&&e.render(i,!0)),Fi(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-tt}},Be=function(t,e,i,s){return e.parent&&_i(e),e._start=Ot((ii(i)?i:i||t!==at?Te(t,i,e):t._time)+e._delay),e._end=Ot(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),ja(t,e,"_first","_last",t._sort?"_start":0),Tn(e)||(t._recent=e),s||Qa(t,e),t._ts<0&&Mr(t,t._tTime),t},Ka=function(t,e){return(he.ScrollTrigger||gn("scrollTrigger",e))&&he.ScrollTrigger.create(e,t)},Ja=function(t,e,i,s,r){if(kn(t,e,r),!t._initted)return 1;if(!i&&t._pt&&!Ft&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&Ba!==ue.frame)return pi.push(t),t._lazy=[r,s],1},Gl=function o(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||o(e))},Tn=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},Yl=function(t,e,i,s){var r=t.ratio,n=e<0||!e&&(!t._start&&Gl(t)&&!(!t._initted&&Tn(t))||(t._ts<0||t._dp._ts<0)&&!Tn(t))?0:1,a=t._rDelay,h=0,l,u,f;if(a&&t._repeat&&(h=Is(0,t._tDur,e),u=hs(h,a),t._yoyo&&u&1&&(n=1-n),u!==hs(t._tTime,a)&&(r=1-n,t.vars.repeatRefresh&&t._initted&&t.invalidate())),n!==r||Ft||s||t._zTime===tt||!e&&t._zTime){if(!t._initted&&Ja(t,e,s,i,h))return;for(f=t._zTime,t._zTime=e||(i?tt:0),i||(i=e&&!f),t.ratio=n,t._from&&(n=1-n),t._time=0,t._tTime=h,l=t._pt;l;)l.r(n,l.d),l=l._next;e<0&&wn(t,e,i,!0),t._onUpdate&&!i&&Pe(t,"onUpdate"),h&&t._repeat&&!i&&t.parent&&Pe(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===n&&(n&&_i(t,1),!i&&!Ft&&(Pe(t,n?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},Hl=function(t,e,i){var s;if(i>e)for(s=t._first;s&&s._start<=i;){if(s.data==="isPause"&&s._start>e)return s;s=s._next}else for(s=t._last;s&&s._start>=i;){if(s.data==="isPause"&&s._start<e)return s;s=s._prev}},ls=function(t,e,i,s){var r=t._repeat,n=Ot(e)||0,a=t._tTime/t._tDur;return a&&!s&&(t._time*=n/t._dur),t._dur=n,t._tDur=r?r<0?1e10:Ot(n*(r+1)+t._rDelay*r):n,a>0&&!s&&Mr(t,t._tTime=t._tDur*a),t.parent&&Er(t),i||Fi(t.parent,t),t},to=function(t){return t instanceof ie?Fi(t):ls(t,t._dur)},$l={_start:0,endTime:Ls,totalDuration:Ls},Te=function o(t,e,i){var s=t.labels,r=t._recent||$l,n=t.duration()>=ve?r.endTime(!1):t._dur,a,h,l;return Pt(e)&&(isNaN(e)||e in s)?(h=e.charAt(0),l=e.substr(-1)==="%",a=e.indexOf("="),h==="<"||h===">"?(a>=0&&(e=e.replace(/=/,"")),(h==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(e.substr(1))||0)*(l?(a<0?r:i).totalDuration()/100:1)):a<0?(e in s||(s[e]=n),s[e]):(h=parseFloat(e.charAt(a-1)+e.substr(a+1)),l&&i&&(h=h/100*(zt(i)?i[0]:i).totalDuration()),a>1?o(t,e.substr(0,a-1),i)+h:n+h)):e==null?n:+e},zs=function(t,e,i){var s=ii(e[1]),r=(s?2:1)+(t<2?0:1),n=e[r],a,h;if(s&&(n.duration=e[1]),n.parent=i,t){for(a=n,h=i;h&&!("immediateRender"in a);)a=h.vars.defaults||{},h=te(h.vars.inherit)&&h.parent;n.immediateRender=te(a.immediateRender),t<2?n.runBackwards=1:n.startAt=e[r-1]}return new wt(e[0],n,e[r+1])},gi=function(t,e){return t||t===0?e(t):e},Is=function(t,e,i){return i<t?t:i>e?e:i},It=function(t,e){return!Pt(t)||!(e=zl.exec(t))?"":e[1]},ql=function(t,e,i){return gi(i,function(s){return Is(t,e,s)})},Sn=[].slice,eo=function(t,e){return t&&We(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&We(t[0]))&&!t.nodeType&&t!==be},jl=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(s){var r;return Pt(s)&&!e||eo(s,1)?(r=i).push.apply(r,Se(s)):i.push(s)})||i},Se=function(t,e,i){return xt&&!e&&xt.selector?xt.selector(t):Pt(t)&&!i&&(pn||!cs())?Sn.call((e||_n).querySelectorAll(t),0):zt(t)?jl(t,i):eo(t)?Sn.call(t,0):t?[t]:[]},Pn=function(t){return t=Se(t)[0]||vr("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return Se(e,i.querySelectorAll?i:i===t?vr("Invalid scope")||_n.createElement("div"):t)}},io=function(t){return t.sort(function(){return .5-Math.random()})},so=function(t){if(lt(t))return t;var e=We(t)?t:{each:t},i=zi(e.ease),s=e.from||0,r=parseFloat(e.base)||0,n={},a=s>0&&s<1,h=isNaN(s)||a,l=e.axis,u=s,f=s;return Pt(s)?u=f={center:.5,edges:.5,end:1}[s]||0:!a&&h&&(u=s[0],f=s[1]),function(c,d,_){var p=(_||e).length,g=n[p],m,v,T,x,b,P,w,E,R;if(!g){if(R=e.grid==="auto"?0:(e.grid||[1,ve])[1],!R){for(w=-ve;w<(w=_[R++].getBoundingClientRect().left)&&R<p;);R--}for(g=n[p]=[],m=h?Math.min(R,p)*u-.5:s%R,v=R===ve?0:h?p*f/R-.5:s/R|0,w=0,E=ve,P=0;P<p;P++)T=P%R-m,x=v-(P/R|0),g[P]=b=l?Math.abs(l==="y"?x:T):Da(T*T+x*x),b>w&&(w=b),b<E&&(E=b);s==="random"&&io(g),g.max=w-E,g.min=E,g.v=p=(parseFloat(e.amount)||parseFloat(e.each)*(R>p?p-1:l?l==="y"?p/R:R:Math.max(R,p/R))||0)*(s==="edges"?-1:1),g.b=p<0?r-p:r,g.u=It(e.amount||e.each)||0,i=i&&p<0?po(i):i}return p=(g[c]-g.min)/g.max||0,Ot(g.b+(i?i(p):p)*g.v)+g.u}},Rn=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var s=Ot(Math.round(parseFloat(i)/t)*t*e);return(s-s%1)/e+(ii(i)?0:It(i))}},ro=function(t,e){var i=zt(t),s,r;return!i&&We(t)&&(s=i=t.radius||ve,t.values?(t=Se(t.values),(r=!ii(t[0]))&&(s*=s)):t=Rn(t.increment)),gi(e,i?lt(t)?function(n){return r=t(n),Math.abs(r-n)<=s?r:n}:function(n){for(var a=parseFloat(r?n.x:n),h=parseFloat(r?n.y:0),l=ve,u=0,f=t.length,c,d;f--;)r?(c=t[f].x-a,d=t[f].y-h,c=c*c+d*d):c=Math.abs(t[f]-a),c<l&&(l=c,u=f);return u=!s||l<=s?t[u]:n,r||u===n||ii(n)?u:u+It(n)}:Rn(t))},no=function(t,e,i,s){return gi(zt(t)?!e:i===!0?!!(i=0):!s,function(){return zt(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(s=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*s)/s})},Zl=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(s){return e.reduce(function(r,n){return n(r)},s)}},Ql=function(t,e){return function(i){return t(parseFloat(i))+(e||It(i))}},Kl=function(t,e,i){return oo(t,e,0,1,i)},ao=function(t,e,i){return gi(i,function(s){return t[~~e(s)]})},Jl=function o(t,e,i){var s=e-t;return zt(t)?ao(t,o(0,t.length),e):gi(i,function(r){return(s+(r-t)%s)%s+t})},tu=function o(t,e,i){var s=e-t,r=s*2;return zt(t)?ao(t,o(0,t.length-1),e):gi(i,function(n){return n=(r+(n-t)%r)%r||0,t+(n>s?r-n:n)})},Us=function(t){for(var e=0,i="",s,r,n,a;~(s=t.indexOf("random(",e));)n=t.indexOf(")",s),a=t.charAt(s+7)==="[",r=t.substr(s+7,n-s-7).match(a?Ua:dn),i+=t.substr(e,s-e)+no(a?r:+r[0],a?0:+r[1],+r[2]||1e-5),e=n+1;return i+t.substr(e,t.length-e)},oo=function(t,e,i,s,r){var n=e-t,a=s-i;return gi(r,function(h){return i+((h-t)/n*a||0)})},eu=function o(t,e,i,s){var r=isNaN(t+e)?0:function(d){return(1-d)*t+d*e};if(!r){var n=Pt(t),a={},h,l,u,f,c;if(i===!0&&(s=1)&&(i=null),n)t={p:t},e={p:e};else if(zt(t)&&!zt(e)){for(u=[],f=t.length,c=f-2,l=1;l<f;l++)u.push(o(t[l-1],t[l]));f--,r=function(_){_*=f;var p=Math.min(c,~~_);return u[p](_-p)},i=e}else s||(t=Li(zt(t)?[]:{},t));if(!u){for(h in e)An.call(a,t,h,"get",e[h]);r=function(_){return Fn(_,a)||(n?t.p:t)}}}return gi(i,r)},ho=function(t,e,i){var s=t.labels,r=ve,n,a,h;for(n in s)a=s[n]-e,a<0==!!i&&a&&r>(a=Math.abs(a))&&(h=n,r=a);return h},Pe=function(t,e,i){var s=t.vars,r=s[e],n=xt,a=t._ctx,h,l,u;if(r)return h=s[e+"Params"],l=s.callbackScope||t,i&&pi.length&&Tr(),a&&(xt=a),u=h?r.apply(l,h):r.call(l),xt=n,u},Vs=function(t){return _i(t),t.scrollTrigger&&t.scrollTrigger.kill(!!Ft),t.progress()<1&&Pe(t,"onInterrupt"),t},us,iu=function(t){t=!t.name&&t.default||t;var e=t.name,i=lt(t),s=e&&!i&&t.init?function(){this._props=[]}:t,r={init:Ls,render:Fn,add:An,kill:xu,modifier:mu,rawVars:0},n={targetTest:0,get:0,getSetter:Ln,aliases:{},register:0};if(cs(),t!==s){if(le[e])return;we(s,we(Sr(t,r),n)),Li(s.prototype,Li(r,Sr(t,n))),le[s.prop=e]=s,t.targetTest&&(wr.push(s),mn[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Wa(e,s),t.register&&t.register(ce,s,se)},et=255,Ns={aqua:[0,et,et],lime:[0,et,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,et],navy:[0,0,128],white:[et,et,et],olive:[128,128,0],yellow:[et,et,0],orange:[et,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[et,0,0],pink:[et,192,203],cyan:[0,et,et],transparent:[et,et,et,0]},En=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*et+.5|0},lo=function(t,e,i){var s=t?ii(t)?[t>>16,t>>8&et,t&et]:0:Ns.black,r,n,a,h,l,u,f,c,d,_;if(!s){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Ns[t])s=Ns[t];else if(t.charAt(0)==="#"){if(t.length<6&&(r=t.charAt(1),n=t.charAt(2),a=t.charAt(3),t="#"+r+r+n+n+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return s=parseInt(t.substr(1,6),16),[s>>16,s>>8&et,s&et,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),s=[t>>16,t>>8&et,t&et]}else if(t.substr(0,3)==="hsl"){if(s=_=t.match(dn),!e)h=+s[0]%360/360,l=+s[1]/100,u=+s[2]/100,n=u<=.5?u*(l+1):u+l-u*l,r=u*2-n,s.length>3&&(s[3]*=1),s[0]=En(h+1/3,r,n),s[1]=En(h,r,n),s[2]=En(h-1/3,r,n);else if(~t.indexOf("="))return s=t.match(za),i&&s.length<4&&(s[3]=1),s}else s=t.match(dn)||Ns.transparent;s=s.map(Number)}return e&&!_&&(r=s[0]/et,n=s[1]/et,a=s[2]/et,f=Math.max(r,n,a),c=Math.min(r,n,a),u=(f+c)/2,f===c?h=l=0:(d=f-c,l=u>.5?d/(2-f-c):d/(f+c),h=f===r?(n-a)/d+(n<a?6:0):f===n?(a-r)/d+2:(r-n)/d+4,h*=60),s[0]=~~(h+.5),s[1]=~~(l*100+.5),s[2]=~~(u*100+.5)),i&&s.length<4&&(s[3]=1),s},uo=function(t){var e=[],i=[],s=-1;return t.split(mi).forEach(function(r){var n=r.match(as)||[];e.push.apply(e,n),i.push(s+=n.length+1)}),e.c=i,e},co=function(t,e,i){var s="",r=(t+s).match(mi),n=e?"hsla(":"rgba(",a=0,h,l,u,f;if(!r)return t;if(r=r.map(function(c){return(c=lo(c,e,1))&&n+(e?c[0]+","+c[1]+"%,"+c[2]+"%,"+c[3]:c.join(","))+")"}),i&&(u=uo(t),h=i.c,h.join(s)!==u.c.join(s)))for(l=t.replace(mi,"1").split(as),f=l.length-1;a<f;a++)s+=l[a]+(~h.indexOf(a)?r.shift()||n+"0,0,0,0)":(u.length?u:r.length?r:i).shift());if(!l)for(l=t.split(mi),f=l.length-1;a<f;a++)s+=l[a]+r[a];return s+l[f]},mi=function(){var o="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Ns)o+="|"+t+"\\b";return new RegExp(o+")","gi")}(),su=/hsl[a]?\(/,fo=function(t){var e=t.join(" "),i;if(mi.lastIndex=0,mi.test(e))return i=su.test(e),t[1]=co(t[1],i),t[0]=co(t[0],i,uo(t[1])),!0},Ws,ue=function(){var o=Date.now,t=500,e=33,i=o(),s=i,r=1e3/240,n=r,a=[],h,l,u,f,c,d,_=function p(g){var m=o()-s,v=g===!0,T,x,b,P;if(m>t&&(i+=m-e),s+=m,b=s-i,T=b-n,(T>0||v)&&(P=++f.frame,c=b-f.time*1e3,f.time=b=b/1e3,n+=T+(T>=r?4:r-T),x=1),v||(h=l(p)),x)for(d=0;d<a.length;d++)a[d](b,c,P,g)};return f={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(g){return c/(1e3/(g||60))},wake:function(){Va&&(!pn&&La()&&(be=pn=window,_n=be.document||{},he.gsap=ce,(be.gsapVersions||(be.gsapVersions=[])).push(ce.version),Na(yr||be.GreenSockGlobals||!be.gsap&&be||{}),u=be.requestAnimationFrame),h&&f.sleep(),l=u||function(g){return setTimeout(g,n-f.time*1e3+1|0)},Ws=1,_(2))},sleep:function(){(u?be.cancelAnimationFrame:clearTimeout)(h),Ws=0,l=Ls},lagSmoothing:function(g,m){t=g||1/0,e=Math.min(m||33,t)},fps:function(g){r=1e3/(g||240),n=f.time*1e3+r},add:function(g,m,v){var T=m?function(x,b,P,w){g(x,b,P,w),f.remove(T)}:g;return f.remove(g),a[v?"unshift":"push"](T),cs(),T},remove:function(g,m){~(m=a.indexOf(g))&&a.splice(m,1)&&d>=m&&d--},_listeners:a},f}(),cs=function(){return!Ws&&ue.wake()},$={},ru=/^[\d.\-M][\d.\-,\s]/,nu=/["']/g,au=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),s=i[0],r=1,n=i.length,a,h,l;r<n;r++)h=i[r],a=r!==n-1?h.lastIndexOf(","):h.length,l=h.substr(0,a),e[s]=isNaN(l)?l.replace(nu,"").trim():+l,s=h.substr(a+1).trim();return e},ou=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),s=t.indexOf("(",e);return t.substring(e,~s&&s<i?t.indexOf(")",i+1):i)},hu=function(t){var e=(t+"").split("("),i=$[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[au(e[1])]:ou(t).split(",").map(Ha)):$._CE&&ru.test(t)?$._CE("",t):i},po=function(t){return function(e){return 1-t(1-e)}},_o=function o(t,e){for(var i=t._first,s;i;)i instanceof ie?o(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?o(i.timeline,e):(s=i._ease,i._ease=i._yEase,i._yEase=s,i._yoyo=e)),i=i._next},zi=function(t,e){return t&&(lt(t)?t:$[t]||hu(t))||e},Ii=function(t,e,i,s){i===void 0&&(i=function(h){return 1-e(1-h)}),s===void 0&&(s=function(h){return h<.5?e(h*2)/2:1-e((1-h)*2)/2});var r={easeIn:e,easeOut:i,easeInOut:s},n;return ee(t,function(a){$[a]=he[a]=r,$[n=a.toLowerCase()]=i;for(var h in r)$[n+(h==="easeIn"?".in":h==="easeOut"?".out":".inOut")]=$[a+"."+h]=r[h]}),r},go=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},Mn=function o(t,e,i){var s=e>=1?e:1,r=(i||(t?.3:.45))/(e<1?e:1),n=r/un*(Math.asin(1/s)||0),a=function(u){return u===1?1:s*Math.pow(2,-10*u)*Fl((u-n)*r)+1},h=t==="out"?a:t==="in"?function(l){return 1-a(1-l)}:go(a);return r=un/r,h.config=function(l,u){return o(t,l,u)},h},Cn=function o(t,e){e===void 0&&(e=1.70158);var i=function(n){return n?--n*n*((e+1)*n+e)+1:0},s=t==="out"?i:t==="in"?function(r){return 1-i(1-r)}:go(i);return s.config=function(r){return o(t,r)},s};ee("Linear,Quad,Cubic,Quart,Quint,Strong",function(o,t){var e=t<5?t+1:t;Ii(o+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})}),$.Linear.easeNone=$.none=$.Linear.easeIn,Ii("Elastic",Mn("in"),Mn("out"),Mn()),function(o,t){var e=1/t,i=2*e,s=2.5*e,r=function(a){return a<e?o*a*a:a<i?o*Math.pow(a-1.5/t,2)+.75:a<s?o*(a-=2.25/t)*a+.9375:o*Math.pow(a-2.625/t,2)+.984375};Ii("Bounce",function(n){return 1-r(1-n)},r)}(7.5625,2.75),Ii("Expo",function(o){return o?Math.pow(2,10*(o-1)):0}),Ii("Circ",function(o){return-(Da(1-o*o)-1)}),Ii("Sine",function(o){return o===1?1:-Ll(o*kl)+1}),Ii("Back",Cn("in"),Cn("out"),Cn()),$.SteppedEase=$.steps=he.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,s=t+(e?0:1),r=e?1:0,n=1-tt;return function(a){return((s*Is(0,n,a)|0)+r)*i}}},ns.ease=$["quad.out"],ee("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(o){return vn+=o+","+o+"Params,"});var mo=function(t,e){this.id=Dl++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Ga,this.set=e?e.getSetter:Ln},ds=function(){function o(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,ls(this,+e.duration,1,1),this.data=e.data,xt&&(this._ctx=xt,xt.data.push(this)),Ws||ue.wake()}var t=o.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,ls(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,s){if(cs(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(Mr(this,i),!r._dp||r.parent||Qa(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Be(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!s||this._initted&&Math.abs(this._zTime)===tt||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),Ya(this,i,s)),this},t.time=function(i,s){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Za(this))%(this._dur+this._rDelay)||(i?this._dur:0),s):this._time},t.totalProgress=function(i,s){return arguments.length?this.totalTime(this.totalDuration()*i,s):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},t.progress=function(i,s){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Za(this),s):this.duration()?Math.min(1,this._time/this._dur):this.ratio},t.iteration=function(i,s){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*r,s):this._repeat?hs(this._tTime,r)+1:1},t.timeScale=function(i){if(!arguments.length)return this._rts===-tt?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?Rr(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-tt?0:this._rts,this.totalTime(Is(-this._delay,this._tDur,s),!0),Er(this),Bl(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(cs(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==tt&&(this._tTime-=tt)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var s=this.parent||this._dp;return s&&(s._sort||!this.parent)&&Be(s,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(te(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var s=this.parent||this._dp;return s?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Rr(s.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=Ul);var s=Ft;return Ft=i,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Ft=s,this},t.globalTime=function(i){for(var s=this,r=arguments.length?i:s.rawTime();s;)r=s._start+r/(s._ts||1),s=s._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(i):r},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,to(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var s=this._time;return this._rDelay=i,to(this),s?this.time(s):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,s){return this.totalTime(Te(this,i),te(s))},t.restart=function(i,s){return this.play().totalTime(i?-this._delay:0,te(s))},t.play=function(i,s){return i!=null&&this.seek(i,s),this.reversed(!1).paused(!1)},t.reverse=function(i,s){return i!=null&&this.seek(i||this.totalDuration(),s),this.reversed(!0).paused(!1)},t.pause=function(i,s){return i!=null&&this.seek(i,s),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-tt:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-tt,this},t.isActive=function(){var i=this.parent||this._dp,s=this._start,r;return!!(!i||this._ts&&this._initted&&i.isActive()&&(r=i.rawTime(!0))>=s&&r<this.endTime(!0)-tt)},t.eventCallback=function(i,s,r){var n=this.vars;return arguments.length>1?(s?(n[i]=s,r&&(n[i+"Params"]=r),i==="onUpdate"&&(this._onUpdate=s)):delete n[i],this):n[i]},t.then=function(i){var s=this;return new Promise(function(r){var n=lt(i)?i:$a,a=function(){var l=s.then;s.then=null,lt(n)&&(n=n(s))&&(n.then||n===s)&&(s.then=l),r(n),s.then=l};s._initted&&s.totalProgress()===1&&s._ts>=0||!s._tTime&&s._ts<0?a():s._prom=a})},t.kill=function(){Vs(this)},o}();we(ds.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-tt,_prom:0,_ps:!1,_rts:1});var ie=function(o){ka(t,o);function t(i,s){var r;return i===void 0&&(i={}),r=o.call(this,i)||this,r.labels={},r.smoothChildTiming=!!i.smoothChildTiming,r.autoRemoveChildren=!!i.autoRemoveChildren,r._sort=te(i.sortChildren),at&&Be(i.parent||at,ei(r),s),i.reversed&&r.reverse(),i.paused&&r.paused(!0),i.scrollTrigger&&Ka(ei(r),i.scrollTrigger),r}var e=t.prototype;return e.to=function(s,r,n){return zs(0,arguments,this),this},e.from=function(s,r,n){return zs(1,arguments,this),this},e.fromTo=function(s,r,n,a){return zs(2,arguments,this),this},e.set=function(s,r,n){return r.duration=0,r.parent=this,Fs(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new wt(s,r,Te(this,n),1),this},e.call=function(s,r,n){return Be(this,wt.delayedCall(0,s,r),n)},e.staggerTo=function(s,r,n,a,h,l,u){return n.duration=r,n.stagger=n.stagger||a,n.onComplete=l,n.onCompleteParams=u,n.parent=this,new wt(s,n,Te(this,h)),this},e.staggerFrom=function(s,r,n,a,h,l,u){return n.runBackwards=1,Fs(n).immediateRender=te(n.immediateRender),this.staggerTo(s,r,n,a,h,l,u)},e.staggerFromTo=function(s,r,n,a,h,l,u,f){return a.startAt=n,Fs(a).immediateRender=te(a.immediateRender),this.staggerTo(s,r,a,h,l,u,f)},e.render=function(s,r,n){var a=this._time,h=this._dirty?this.totalDuration():this._tDur,l=this._dur,u=s<=0?0:Ot(s),f=this._zTime<0!=s<0&&(this._initted||!l),c,d,_,p,g,m,v,T,x,b,P,w;if(this!==at&&u>h&&s>=0&&(u=h),u!==this._tTime||n||f){if(a!==this._time&&l&&(u+=this._time-a,s+=this._time-a),c=u,x=this._start,T=this._ts,m=!T,f&&(l||(a=this._zTime),(s||!r)&&(this._zTime=s)),this._repeat){if(P=this._yoyo,g=l+this._rDelay,this._repeat<-1&&s<0)return this.totalTime(g*100+s,r,n);if(c=Ot(u%g),u===h?(p=this._repeat,c=l):(p=~~(u/g),p&&p===u/g&&(c=l,p--),c>l&&(c=l)),b=hs(this._tTime,g),!a&&this._tTime&&b!==p&&(b=p),P&&p&1&&(c=l-c,w=1),p!==b&&!this._lock){var E=P&&b&1,R=E===(P&&p&1);if(p<b&&(E=!E),a=E?0:l,this._lock=1,this.render(a||(w?0:Ot(p*g)),r,!l)._lock=0,this._tTime=u,!r&&this.parent&&Pe(this,"onRepeat"),this.vars.repeatRefresh&&!w&&(this.invalidate()._lock=1),a&&a!==this._time||m!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(l=this._dur,h=this._tDur,R&&(this._lock=2,a=E?l:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!w&&this.invalidate()),this._lock=0,!this._ts&&!m)return this;_o(this,w)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(v=Hl(this,Ot(a),Ot(c)),v&&(u-=c-(c=v._start))),this._tTime=u,this._time=c,this._act=!T,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=s,a=0),!a&&c&&!r&&(Pe(this,"onStart"),this._tTime!==u))return this;if(c>=a&&s>=0)for(d=this._first;d;){if(_=d._next,(d._act||c>=d._start)&&d._ts&&v!==d){if(d.parent!==this)return this.render(s,r,n);if(d.render(d._ts>0?(c-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(c-d._start)*d._ts,r,n),c!==this._time||!this._ts&&!m){v=0,_&&(u+=this._zTime=-tt);break}}d=_}else{d=this._last;for(var M=s<0?s:c;d;){if(_=d._prev,(d._act||M<=d._end)&&d._ts&&v!==d){if(d.parent!==this)return this.render(s,r,n);if(d.render(d._ts>0?(M-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(M-d._start)*d._ts,r,n||Ft&&(d._initted||d._startAt)),c!==this._time||!this._ts&&!m){v=0,_&&(u+=this._zTime=M?-tt:tt);break}}d=_}}if(v&&!r&&(this.pause(),v.render(c>=a?0:-tt)._zTime=c>=a?1:-1,this._ts))return this._start=x,Er(this),this.render(s,r,n);this._onUpdate&&!r&&Pe(this,"onUpdate",!0),(u===h&&this._tTime>=this.totalDuration()||!u&&a)&&(x===this._start||Math.abs(T)!==Math.abs(this._ts))&&(this._lock||((s||!l)&&(u===h&&this._ts>0||!u&&this._ts<0)&&_i(this,1),!r&&!(s<0&&!a)&&(u||a||!h)&&(Pe(this,u===h&&s>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<h&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(s,r){var n=this;if(ii(r)||(r=Te(this,r,s)),!(s instanceof ds)){if(zt(s))return s.forEach(function(a){return n.add(a,r)}),this;if(Pt(s))return this.addLabel(s,r);if(lt(s))s=wt.delayedCall(0,s);else return this}return this!==s?Be(this,s,r):this},e.getChildren=function(s,r,n,a){s===void 0&&(s=!0),r===void 0&&(r=!0),n===void 0&&(n=!0),a===void 0&&(a=-ve);for(var h=[],l=this._first;l;)l._start>=a&&(l instanceof wt?r&&h.push(l):(n&&h.push(l),s&&h.push.apply(h,l.getChildren(!0,r,n)))),l=l._next;return h},e.getById=function(s){for(var r=this.getChildren(1,1,1),n=r.length;n--;)if(r[n].vars.id===s)return r[n]},e.remove=function(s){return Pt(s)?this.removeLabel(s):lt(s)?this.killTweensOf(s):(Pr(this,s),s===this._recent&&(this._recent=this._last),Fi(this))},e.totalTime=function(s,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ot(ue.time-(this._ts>0?s/this._ts:(this.totalDuration()-s)/-this._ts))),o.prototype.totalTime.call(this,s,r),this._forcing=0,this):this._tTime},e.addLabel=function(s,r){return this.labels[s]=Te(this,r),this},e.removeLabel=function(s){return delete this.labels[s],this},e.addPause=function(s,r,n){var a=wt.delayedCall(0,r||Ls,n);return a.data="isPause",this._hasPause=1,Be(this,a,Te(this,s))},e.removePause=function(s){var r=this._first;for(s=Te(this,s);r;)r._start===s&&r.data==="isPause"&&_i(r),r=r._next},e.killTweensOf=function(s,r,n){for(var a=this.getTweensOf(s,n),h=a.length;h--;)xi!==a[h]&&a[h].kill(s,r);return this},e.getTweensOf=function(s,r){for(var n=[],a=Se(s),h=this._first,l=ii(r),u;h;)h instanceof wt?Vl(h._targets,a)&&(l?(!xi||h._initted&&h._ts)&&h.globalTime(0)<=r&&h.globalTime(h.totalDuration())>r:!r||h.isActive())&&n.push(h):(u=h.getTweensOf(a,r)).length&&n.push.apply(n,u),h=h._next;return n},e.tweenTo=function(s,r){r=r||{};var n=this,a=Te(n,s),h=r,l=h.startAt,u=h.onStart,f=h.onStartParams,c=h.immediateRender,d,_=wt.to(n,we({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:r.duration||Math.abs((a-(l&&"time"in l?l.time:n._time))/n.timeScale())||tt,onStart:function(){if(n.pause(),!d){var g=r.duration||Math.abs((a-(l&&"time"in l?l.time:n._time))/n.timeScale());_._dur!==g&&ls(_,g,0,1).render(_._time,!0,!0),d=1}u&&u.apply(_,f||[])}},r));return c?_.render(0):_},e.tweenFromTo=function(s,r,n){return this.tweenTo(r,we({startAt:{time:Te(this,s)}},n))},e.recent=function(){return this._recent},e.nextLabel=function(s){return s===void 0&&(s=this._time),ho(this,Te(this,s))},e.previousLabel=function(s){return s===void 0&&(s=this._time),ho(this,Te(this,s),1)},e.currentLabel=function(s){return arguments.length?this.seek(s,!0):this.previousLabel(this._time+tt)},e.shiftChildren=function(s,r,n){n===void 0&&(n=0);for(var a=this._first,h=this.labels,l;a;)a._start>=n&&(a._start+=s,a._end+=s),a=a._next;if(r)for(l in h)h[l]>=n&&(h[l]+=s);return Fi(this)},e.invalidate=function(s){var r=this._first;for(this._lock=0;r;)r.invalidate(s),r=r._next;return o.prototype.invalidate.call(this,s)},e.clear=function(s){s===void 0&&(s=!0);for(var r=this._first,n;r;)n=r._next,this.remove(r),r=n;return this._dp&&(this._time=this._tTime=this._pTime=0),s&&(this.labels={}),Fi(this)},e.totalDuration=function(s){var r=0,n=this,a=n._last,h=ve,l,u,f;if(arguments.length)return n.timeScale((n._repeat<0?n.duration():n.totalDuration())/(n.reversed()?-s:s));if(n._dirty){for(f=n.parent;a;)l=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>h&&n._sort&&a._ts&&!n._lock?(n._lock=1,Be(n,a,u-a._delay,1)._lock=0):h=u,u<0&&a._ts&&(r-=u,(!f&&!n._dp||f&&f.smoothChildTiming)&&(n._start+=u/n._ts,n._time-=u,n._tTime-=u),n.shiftChildren(-u,!1,-1/0),h=0),a._end>r&&a._ts&&(r=a._end),a=l;ls(n,n===at&&n._time>r?n._time:r,1,1),n._dirty=0}return n._tDur},t.updateRoot=function(s){if(at._ts&&(Ya(at,Rr(s,at)),Ba=ue.frame),ue.frame>=Xa){Xa+=oe.autoSleep||120;var r=at._first;if((!r||!r._ts)&&oe.autoSleep&&ue._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||ue.sleep()}}},t}(ds);we(ie.prototype,{_lock:0,_hasPause:0,_forcing:0});var lu=function(t,e,i,s,r,n,a){var h=new se(this._pt,t,e,0,1,To,null,r),l=0,u=0,f,c,d,_,p,g,m,v;for(h.b=i,h.e=s,i+="",s+="",(m=~s.indexOf("random("))&&(s=Us(s)),n&&(v=[i,s],n(v,t,e),i=v[0],s=v[1]),c=i.match(fn)||[];f=fn.exec(s);)_=f[0],p=s.substring(l,f.index),d?d=(d+1)%5:p.substr(-5)==="rgba("&&(d=1),_!==c[u++]&&(g=parseFloat(c[u-1])||0,h._pt={_next:h._pt,p:p||u===1?p:",",s:g,c:_.charAt(1)==="="?os(g,_)-g:parseFloat(_)-g,m:d&&d<4?Math.round:0},l=fn.lastIndex);return h.c=l<s.length?s.substring(l,s.length):"",h.fp=a,(Ia.test(s)||m)&&(h.e=0),this._pt=h,h},An=function(t,e,i,s,r,n,a,h,l,u){lt(s)&&(s=s(r||0,t,n));var f=t[e],c=i!=="get"?i:lt(f)?l?t[e.indexOf("set")||!lt(t["get"+e.substr(3)])?e:"get"+e.substr(3)](l):t[e]():f,d=lt(f)?l?pu:bo:Dn,_;if(Pt(s)&&(~s.indexOf("random(")&&(s=Us(s)),s.charAt(1)==="="&&(_=os(c,s)+(It(c)||0),(_||_===0)&&(s=_))),!u||c!==s||On)return!isNaN(c*s)&&s!==""?(_=new se(this._pt,t,e,+c||0,s-(c||0),typeof f=="boolean"?gu:wo,0,d),l&&(_.fp=l),a&&_.modifier(a,this,t),this._pt=_):(!f&&!(e in t)&&gn(e,s),lu.call(this,t,e,c,s,d,h||oe.stringFilter,l))},uu=function(t,e,i,s,r){if(lt(t)&&(t=Bs(t,r,e,i,s)),!We(t)||t.style&&t.nodeType||zt(t)||Fa(t))return Pt(t)?Bs(t,r,e,i,s):t;var n={},a;for(a in t)n[a]=Bs(t[a],r,e,i,s);return n},xo=function(t,e,i,s,r,n){var a,h,l,u;if(le[t]&&(a=new le[t]).init(r,a.rawVars?e[t]:uu(e[t],s,r,n,i),i,s,n)!==!1&&(i._pt=h=new se(i._pt,r,t,0,1,a.render,a,0,a.priority),i!==us))for(l=i._ptLookup[i._targets.indexOf(r)],u=a._props.length;u--;)l[a._props[u]]=h;return a},xi,On,kn=function o(t,e,i){var s=t.vars,r=s.ease,n=s.startAt,a=s.immediateRender,h=s.lazy,l=s.onUpdate,u=s.onUpdateParams,f=s.callbackScope,c=s.runBackwards,d=s.yoyoEase,_=s.keyframes,p=s.autoRevert,g=t._dur,m=t._startAt,v=t._targets,T=t.parent,x=T&&T.data==="nested"?T.vars.targets:v,b=t._overwrite==="auto"&&!ln,P=t.timeline,w,E,R,M,A,k,W,U,F,O,X,N,J;if(P&&(!_||!r)&&(r="none"),t._ease=zi(r,ns.ease),t._yEase=d?po(zi(d===!0?r:d,ns.ease)):0,d&&t._yoyo&&!t._repeat&&(d=t._yEase,t._yEase=t._ease,t._ease=d),t._from=!P&&!!s.runBackwards,!P||_&&!s.stagger){if(U=v[0]?Di(v[0]).harness:0,N=U&&s[U.prop],w=Sr(s,mn),m&&(m._zTime<0&&m.progress(1),e<0&&c&&a&&!p?m.render(-1,!0):m.revert(c&&g?br:Il),m._lazy=0),n){if(_i(t._startAt=wt.set(v,we({data:"isStart",overwrite:!1,parent:T,immediateRender:!0,lazy:!m&&te(h),startAt:null,delay:0,onUpdate:l,onUpdateParams:u,callbackScope:f,stagger:0},n))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Ft||!a&&!p)&&t._startAt.revert(br),a&&g&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(c&&g&&!m){if(e&&(a=!1),R=we({overwrite:!1,data:"isFromStart",lazy:a&&!m&&te(h),immediateRender:a,stagger:0,parent:T},w),N&&(R[U.prop]=N),_i(t._startAt=wt.set(v,R)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(Ft?t._startAt.revert(br):t._startAt.render(-1,!0)),t._zTime=e,!a)o(t._startAt,tt,tt);else if(!e)return}for(t._pt=t._ptCache=0,h=g&&te(h)||h&&!g,E=0;E<v.length;E++){if(A=v[E],W=A._gsap||bn(v)[E]._gsap,t._ptLookup[E]=O={},xn[W.id]&&pi.length&&Tr(),X=x===v?E:x.indexOf(A),U&&(F=new U).init(A,N||w,t,X,x)!==!1&&(t._pt=M=new se(t._pt,A,F.name,0,1,F.render,F,0,F.priority),F._props.forEach(function(y){O[y]=M}),F.priority&&(k=1)),!U||N)for(R in w)le[R]&&(F=xo(R,w,t,X,A,x))?F.priority&&(k=1):O[R]=M=An.call(t,A,R,"get",w[R],X,x,0,s.stringFilter);t._op&&t._op[E]&&t.kill(A,t._op[E]),b&&t._pt&&(xi=t,at.killTweensOf(A,O,t.globalTime(e)),J=!t.parent,xi=0),t._pt&&h&&(xn[W.id]=1)}k&&So(t),t._onInit&&t._onInit(t)}t._onUpdate=l,t._initted=(!t._op||t._pt)&&!J,_&&e<=0&&P.render(ve,!0,!0)},cu=function(t,e,i,s,r,n,a){var h=(t._pt&&t._ptCache||(t._ptCache={}))[e],l,u,f,c;if(!h)for(h=t._ptCache[e]=[],f=t._ptLookup,c=t._targets.length;c--;){if(l=f[c][e],l&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==e&&l.fp!==e;)l=l._next;if(!l)return On=1,t.vars[e]="+=0",kn(t,a),On=0,1;h.push(l)}for(c=h.length;c--;)u=h[c],l=u._pt||u,l.s=(s||s===0)&&!r?s:l.s+(s||0)+n*l.c,l.c=i-l.s,u.e&&(u.e=_t(i)+It(u.e)),u.b&&(u.b=l.s+It(u.b))},du=function(t,e){var i=t[0]?Di(t[0]).harness:0,s=i&&i.aliases,r,n,a,h;if(!s)return e;r=Li({},e);for(n in s)if(n in r)for(h=s[n].split(","),a=h.length;a--;)r[h[a]]=r[n];return r},fu=function(t,e,i,s){var r=e.ease||s||"power1.inOut",n,a;if(zt(e))a=i[t]||(i[t]=[]),e.forEach(function(h,l){return a.push({t:l/(e.length-1)*100,v:h,e:r})});else for(n in e)a=i[n]||(i[n]=[]),n==="ease"||a.push({t:parseFloat(t),v:e[n],e:r})},Bs=function(t,e,i,s,r){return lt(t)?t.call(e,i,s,r):Pt(t)&&~t.indexOf("random(")?Us(t):t},yo=vn+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",vo={};ee(yo+",id,stagger,delay,duration,paused,scrollTrigger",function(o){return vo[o]=1});var wt=function(o){ka(t,o);function t(i,s,r,n){var a;typeof s=="number"&&(r.duration=s,s=r,r=null),a=o.call(this,n?s:Fs(s))||this;var h=a.vars,l=h.duration,u=h.delay,f=h.immediateRender,c=h.stagger,d=h.overwrite,_=h.keyframes,p=h.defaults,g=h.scrollTrigger,m=h.yoyoEase,v=s.parent||at,T=(zt(i)||Fa(i)?ii(i[0]):"length"in s)?[i]:Se(i),x,b,P,w,E,R,M,A;if(a._targets=T.length?bn(T):vr("GSAP target "+i+" not found. https://greensock.com",!oe.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=d,_||c||xr(l)||xr(u)){if(s=a.vars,x=a.timeline=new ie({data:"nested",defaults:p||{},targets:v&&v.data==="nested"?v.vars.targets:T}),x.kill(),x.parent=x._dp=ei(a),x._start=0,c||xr(l)||xr(u)){if(w=T.length,M=c&&so(c),We(c))for(E in c)~yo.indexOf(E)&&(A||(A={}),A[E]=c[E]);for(b=0;b<w;b++)P=Sr(s,vo),P.stagger=0,m&&(P.yoyoEase=m),A&&Li(P,A),R=T[b],P.duration=+Bs(l,ei(a),b,R,T),P.delay=(+Bs(u,ei(a),b,R,T)||0)-a._delay,!c&&w===1&&P.delay&&(a._delay=u=P.delay,a._start+=u,P.delay=0),x.to(R,P,M?M(b,R,T):0),x._ease=$.none;x.duration()?l=u=0:a.timeline=0}else if(_){Fs(we(x.vars.defaults,{ease:"none"})),x._ease=zi(_.ease||s.ease||"none");var k=0,W,U,F;if(zt(_))_.forEach(function(O){return x.to(T,O,">")}),x.duration();else{P={};for(E in _)E==="ease"||E==="easeEach"||fu(E,_[E],P,_.easeEach);for(E in P)for(W=P[E].sort(function(O,X){return O.t-X.t}),k=0,b=0;b<W.length;b++)U=W[b],F={ease:U.e,duration:(U.t-(b?W[b-1].t:0))/100*l},F[E]=U.v,x.to(T,F,k),k+=F.duration;x.duration()<l&&x.to({},{duration:l-x.duration()})}}l||a.duration(l=x.duration())}else a.timeline=0;return d===!0&&!ln&&(xi=ei(a),at.killTweensOf(T),xi=0),Be(v,ei(a),r),s.reversed&&a.reverse(),s.paused&&a.paused(!0),(f||!l&&!_&&a._start===Ot(v._time)&&te(f)&&Xl(ei(a))&&v.data!=="nested")&&(a._tTime=-tt,a.render(Math.max(0,-u)||0)),g&&Ka(ei(a),g),a}var e=t.prototype;return e.render=function(s,r,n){var a=this._time,h=this._tDur,l=this._dur,u=s<0,f=s>h-tt&&!u?h:s<tt?0:s,c,d,_,p,g,m,v,T,x;if(!l)Yl(this,s,r,n);else if(f!==this._tTime||!s||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u){if(c=f,T=this.timeline,this._repeat){if(p=l+this._rDelay,this._repeat<-1&&u)return this.totalTime(p*100+s,r,n);if(c=Ot(f%p),f===h?(_=this._repeat,c=l):(_=~~(f/p),_&&_===f/p&&(c=l,_--),c>l&&(c=l)),m=this._yoyo&&_&1,m&&(x=this._yEase,c=l-c),g=hs(this._tTime,p),c===a&&!n&&this._initted)return this._tTime=f,this;_!==g&&(T&&this._yEase&&_o(T,m),this.vars.repeatRefresh&&!m&&!this._lock&&(this._lock=n=1,this.render(Ot(p*_),!0).invalidate()._lock=0))}if(!this._initted){if(Ja(this,u?s:c,n,r,f))return this._tTime=0,this;if(a!==this._time)return this;if(l!==this._dur)return this.render(s,r,n)}if(this._tTime=f,this._time=c,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=v=(x||this._ease)(c/l),this._from&&(this.ratio=v=1-v),c&&!a&&!r&&(Pe(this,"onStart"),this._tTime!==f))return this;for(d=this._pt;d;)d.r(v,d.d),d=d._next;T&&T.render(s<0?s:!c&&m?-tt:T._dur*T._ease(c/this._dur),r,n)||this._startAt&&(this._zTime=s),this._onUpdate&&!r&&(u&&wn(this,s,r,n),Pe(this,"onUpdate")),this._repeat&&_!==g&&this.vars.onRepeat&&!r&&this.parent&&Pe(this,"onRepeat"),(f===this._tDur||!f)&&this._tTime===f&&(u&&!this._onUpdate&&wn(this,s,!0,!0),(s||!l)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&_i(this,1),!r&&!(u&&!a)&&(f||a||m)&&(Pe(this,f===h?"onComplete":"onReverseComplete",!0),this._prom&&!(f<h&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(s){return(!s||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(s),o.prototype.invalidate.call(this,s)},e.resetTo=function(s,r,n,a){Ws||ue.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),l;return this._initted||kn(this,h),l=this._ease(h/this._dur),cu(this,s,r,n,a,l,h)?this.resetTo(s,r,n,a):(Mr(this,0),this.parent||ja(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(s,r){if(r===void 0&&(r="all"),!s&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?Vs(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(s,r,xi&&xi.vars.overwrite!==!0)._first||Vs(this),this.parent&&n!==this.timeline.totalDuration()&&ls(this,this._dur*this.timeline._tDur/n,0,1),this}var a=this._targets,h=s?Se(s):a,l=this._ptLookup,u=this._pt,f,c,d,_,p,g,m;if((!r||r==="all")&&Wl(a,h))return r==="all"&&(this._pt=0),Vs(this);for(f=this._op=this._op||[],r!=="all"&&(Pt(r)&&(p={},ee(r,function(v){return p[v]=1}),r=p),r=du(a,r)),m=a.length;m--;)if(~h.indexOf(a[m])){c=l[m],r==="all"?(f[m]=r,_=c,d={}):(d=f[m]=f[m]||{},_=r);for(p in _)g=c&&c[p],g&&((!("kill"in g.d)||g.d.kill(p)===!0)&&Pr(this,g,"_pt"),delete c[p]),d!=="all"&&(d[p]=1)}return this._initted&&!this._pt&&u&&Vs(this),this},t.to=function(s,r){return new t(s,r,arguments[2])},t.from=function(s,r){return zs(1,arguments)},t.delayedCall=function(s,r,n,a){return new t(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:s,onComplete:r,onReverseComplete:r,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:a})},t.fromTo=function(s,r,n){return zs(2,arguments)},t.set=function(s,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new t(s,r)},t.killTweensOf=function(s,r,n){return at.killTweensOf(s,r,n)},t}(ds);we(wt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),ee("staggerTo,staggerFrom,staggerFromTo",function(o){wt[o]=function(){var t=new ie,e=Sn.call(arguments,0);return e.splice(o==="staggerFromTo"?5:4,0,0),t[o].apply(t,e)}});var Dn=function(t,e,i){return t[e]=i},bo=function(t,e,i){return t[e](i)},pu=function(t,e,i,s){return t[e](s.fp,i)},_u=function(t,e,i){return t.setAttribute(e,i)},Ln=function(t,e){return lt(t[e])?bo:cn(t[e])&&t.setAttribute?_u:Dn},wo=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},gu=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},To=function(t,e){var i=e._pt,s="";if(!t&&e.b)s=e.b;else if(t===1&&e.e)s=e.e;else{for(;i;)s=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+s,i=i._next;s+=e.c}e.set(e.t,e.p,s,e)},Fn=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},mu=function(t,e,i,s){for(var r=this._pt,n;r;)n=r._next,r.p===s&&r.modifier(t,e,i),r=n},xu=function(t){for(var e=this._pt,i,s;e;)s=e._next,e.p===t&&!e.op||e.op===t?Pr(this,e,"_pt"):e.dep||(i=1),e=s;return!i},yu=function(t,e,i,s){s.mSet(t,e,s.m.call(s.tween,i,s.mt),s)},So=function(t){for(var e=t._pt,i,s,r,n;e;){for(i=e._next,s=r;s&&s.pr>e.pr;)s=s._next;(e._prev=s?s._prev:n)?e._prev._next=e:r=e,(e._next=s)?s._prev=e:n=e,e=i}t._pt=r},se=function(){function o(e,i,s,r,n,a,h,l,u){this.t=i,this.s=r,this.c=n,this.p=s,this.r=a||wo,this.d=h||this,this.set=l||Dn,this.pr=u||0,this._next=e,e&&(e._prev=this)}var t=o.prototype;return t.modifier=function(i,s,r){this.mSet=this.mSet||this.set,this.set=yu,this.m=i,this.mt=r,this.tween=s},o}();ee(vn+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(o){return mn[o]=1}),he.TweenMax=he.TweenLite=wt,he.TimelineLite=he.TimelineMax=ie,at=new ie({sortChildren:!1,defaults:ns,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),oe.stringFilter=fo;var fs=[],Cr={},vu=[],Po=0,zn=function(t){return(Cr[t]||vu).map(function(e){return e()})},In=function(){var t=Date.now(),e=[];t-Po>2&&(zn("matchMediaInit"),fs.forEach(function(i){var s=i.queries,r=i.conditions,n,a,h,l;for(a in s)n=be.matchMedia(s[a]).matches,n&&(h=1),n!==r[a]&&(r[a]=n,l=1);l&&(i.revert(),h&&e.push(i))}),zn("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i)}),Po=t,zn("matchMedia"))},Ro=function(){function o(e,i){this.selector=i&&Pn(i),this.data=[],this._r=[],this.isReverted=!1,e&&this.add(e)}var t=o.prototype;return t.add=function(i,s,r){lt(i)&&(r=s,s=i,i=lt);var n=this,a=function(){var l=xt,u=n.selector,f;return l&&l!==n&&l.data.push(n),r&&(n.selector=Pn(r)),xt=n,f=s.apply(n,arguments),lt(f)&&n._r.push(f),xt=l,n.selector=u,n.isReverted=!1,f};return n.last=a,i===lt?a(n):i?n[i]=a:a},t.ignore=function(i){var s=xt;xt=null,i(this),xt=s},t.getTweens=function(){var i=[];return this.data.forEach(function(s){return s instanceof o?i.push.apply(i,s.getTweens()):s instanceof wt&&!(s.parent&&s.parent.data==="nested")&&i.push(s)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,s){var r=this;if(i){var n=this.getTweens();this.data.forEach(function(h){h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(l){return n.splice(n.indexOf(l),1)}))}),n.map(function(h){return{g:h.globalTime(0),t:h}}).sort(function(h,l){return l.g-h.g||-1}).forEach(function(h){return h.t.revert(i)}),this.data.forEach(function(h){return!(h instanceof ds)&&h.revert&&h.revert(i)}),this._r.forEach(function(h){return h(i,r)}),this.isReverted=!0}else this.data.forEach(function(h){return h.kill&&h.kill()});if(this.clear(),s){var a=fs.indexOf(this);~a&&fs.splice(a,1)}},t.revert=function(i){this.kill(i||{})},o}(),bu=function(){function o(e){this.contexts=[],this.scope=e}var t=o.prototype;return t.add=function(i,s,r){We(i)||(i={matches:i});var n=new Ro(0,r||this.scope),a=n.conditions={},h,l,u;this.contexts.push(n),s=n.add("onMatch",s),n.queries=i;for(l in i)l==="all"?u=1:(h=be.matchMedia(i[l]),h&&(fs.indexOf(n)<0&&fs.push(n),(a[l]=h.matches)&&(u=1),h.addListener?h.addListener(In):h.addEventListener("change",In)));return u&&s(n),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(s){return s.kill(i,!0)})},o}(),Ar={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(s){return iu(s)})},timeline:function(t){return new ie(t)},getTweensOf:function(t,e){return at.getTweensOf(t,e)},getProperty:function(t,e,i,s){Pt(t)&&(t=Se(t)[0]);var r=Di(t||{}).get,n=i?$a:Ha;return i==="native"&&(i=""),t&&(e?n((le[e]&&le[e].get||r)(t,e,i,s)):function(a,h,l){return n((le[a]&&le[a].get||r)(t,a,h,l))})},quickSetter:function(t,e,i){if(t=Se(t),t.length>1){var s=t.map(function(u){return ce.quickSetter(u,e,i)}),r=s.length;return function(u){for(var f=r;f--;)s[f](u)}}t=t[0]||{};var n=le[e],a=Di(t),h=a.harness&&(a.harness.aliases||{})[e]||e,l=n?function(u){var f=new n;us._pt=0,f.init(t,i?u+i:u,us,0,[t]),f.render(1,f),us._pt&&Fn(1,us)}:a.set(t,h);return n?l:function(u){return l(t,h,i?u+i:u,a,1)}},quickTo:function(t,e,i){var s,r=ce.to(t,Li((s={},s[e]="+=0.1",s.paused=!0,s),i||{})),n=function(h,l,u){return r.resetTo(e,h,l,u)};return n.tween=r,n},isTweening:function(t){return at.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=zi(t.ease,ns.ease)),qa(ns,t||{})},config:function(t){return qa(oe,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,s=t.plugins,r=t.defaults,n=t.extendTimeline;(s||"").split(",").forEach(function(a){return a&&!le[a]&&!he[a]&&vr(e+" effect requires "+a+" plugin.")}),yn[e]=function(a,h,l){return i(Se(a),we(h||{},r),l)},n&&(ie.prototype[e]=function(a,h,l){return this.add(yn[e](a,We(h)?h:(l=h)&&{},this),l)})},registerEase:function(t,e){$[t]=zi(e)},parseEase:function(t,e){return arguments.length?zi(t,e):$},getById:function(t){return at.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new ie(t),s,r;for(i.smoothChildTiming=te(t.smoothChildTiming),at.remove(i),i._dp=0,i._time=i._tTime=at._time,s=at._first;s;)r=s._next,(e||!(!s._dur&&s instanceof wt&&s.vars.onComplete===s._targets[0]))&&Be(i,s,s._start-s._delay),s=r;return Be(at,i,0),i},context:function(t,e){return t?new Ro(t,e):xt},matchMedia:function(t){return new bu(t)},matchMediaRefresh:function(){return fs.forEach(function(t){var e=t.conditions,i,s;for(s in e)e[s]&&(e[s]=!1,i=1);i&&t.revert()})||In()},addEventListener:function(t,e){var i=Cr[t]||(Cr[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=Cr[t],s=i&&i.indexOf(e);s>=0&&i.splice(s,1)},utils:{wrap:Jl,wrapYoyo:tu,distribute:so,random:no,snap:ro,normalize:Kl,getUnit:It,clamp:ql,splitColor:lo,toArray:Se,selector:Pn,mapRange:oo,pipe:Zl,unitize:Ql,interpolate:eu,shuffle:io},install:Na,effects:yn,ticker:ue,updateRoot:ie.updateRoot,plugins:le,globalTimeline:at,core:{PropTween:se,globals:Wa,Tween:wt,Timeline:ie,Animation:ds,getCache:Di,_removeLinkedListItem:Pr,reverting:function(){return Ft},context:function(t){return t&&xt&&(xt.data.push(t),t._ctx=xt),xt},suppressOverwrites:function(t){return ln=t}}};ee("to,from,fromTo,delayedCall,set,killTweensOf",function(o){return Ar[o]=wt[o]}),ue.add(ie.updateRoot),us=Ar.to({},{duration:0});var wu=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},Tu=function(t,e){var i=t._targets,s,r,n;for(s in e)for(r=i.length;r--;)n=t._ptLookup[r][s],n&&(n=n.d)&&(n._pt&&(n=wu(n,s)),n&&n.modifier&&n.modifier(e[s],t,i[r],s))},Un=function(t,e){return{name:t,rawVars:1,init:function(s,r,n){n._onInit=function(a){var h,l;if(Pt(r)&&(h={},ee(r,function(u){return h[u]=1}),r=h),e){h={};for(l in r)h[l]=e(r[l]);r=h}Tu(a,r)}}}},ce=Ar.registerPlugin({name:"attr",init:function(t,e,i,s,r){var n,a,h;this.tween=i;for(n in e)h=t.getAttribute(n)||"",a=this.add(t,"setAttribute",(h||0)+"",e[n],s,r,0,0,n),a.op=n,a.b=h,this._props.push(n)},render:function(t,e){for(var i=e._pt;i;)Ft?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},Un("roundProps",Rn),Un("modifiers"),Un("snap",ro))||Ar;wt.version=ie.version=ce.version="3.11.4",Va=1,La()&&cs(),$.Power0,$.Power1,$.Power2,$.Power3,$.Power4,$.Linear,$.Quad,$.Cubic,$.Quart,$.Quint,$.Strong,$.Elastic,$.Back,$.SteppedEase,$.Bounce,$.Sine,$.Expo,$.Circ;/*!
 * CSSPlugin 3.11.4
 * https://greensock.com
 *
 * Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var Eo,yi,ps,Vn,Ui,Mo,Nn,Su=function(){return typeof window<"u"},si={},Vi=180/Math.PI,_s=Math.PI/180,gs=Math.atan2,Co=1e8,Wn=/([A-Z])/g,Pu=/(left|right|width|margin|padding|x)/i,Ru=/[\s,\(]\S/,ri={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Bn=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Eu=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},Mu=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},Cu=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},Ao=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Oo=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},Au=function(t,e,i){return t.style[e]=i},Ou=function(t,e,i){return t.style.setProperty(e,i)},ku=function(t,e,i){return t._gsap[e]=i},Du=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},Lu=function(t,e,i,s,r){var n=t._gsap;n.scaleX=n.scaleY=i,n.renderTransform(r,n)},Fu=function(t,e,i,s,r){var n=t._gsap;n[e]=i,n.renderTransform(r,n)},ot="transform",Ce=ot+"Origin",zu=function(t,e){var i=this,s=this.target,r=s.style;if(t in si){if(this.tfm=this.tfm||{},t!=="transform"&&(t=ri[t]||t,~t.indexOf(",")?t.split(",").forEach(function(n){return i.tfm[n]=ni(s,n)}):this.tfm[t]=s._gsap.x?s._gsap[t]:ni(s,t)),this.props.indexOf(ot)>=0)return;s._gsap.svg&&(this.svgo=s.getAttribute("data-svg-origin"),this.props.push(Ce,e,"")),t=ot}(r||e)&&this.props.push(t,e,r[t])},ko=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Iu=function(){var t=this.props,e=this.target,i=e.style,s=e._gsap,r,n;for(r=0;r<t.length;r+=3)t[r+1]?e[t[r]]=t[r+2]:t[r+2]?i[t[r]]=t[r+2]:i.removeProperty(t[r].replace(Wn,"-$1").toLowerCase());if(this.tfm){for(n in this.tfm)s[n]=this.tfm[n];s.svg&&(s.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),r=Nn(),r&&!r.isStart&&!i[ot]&&(ko(i),s.uncache=1)}},Do=function(t,e){var i={target:t,props:[],revert:Iu,save:zu};return e&&e.split(",").forEach(function(s){return i.save(s)}),i},Lo,Xn=function(t,e){var i=yi.createElementNS?yi.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):yi.createElement(t);return i.style?i:yi.createElement(t)},Xe=function o(t,e,i){var s=getComputedStyle(t);return s[e]||s.getPropertyValue(e.replace(Wn,"-$1").toLowerCase())||s.getPropertyValue(e)||!i&&o(t,ms(e)||e,1)||""},Fo="O,Moz,ms,Ms,Webkit".split(","),ms=function(t,e,i){var s=e||Ui,r=s.style,n=5;if(t in r&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);n--&&!(Fo[n]+t in r););return n<0?null:(n===3?"ms":n>=0?Fo[n]:"")+t},Gn=function(){Su()&&window.document&&(Eo=window,yi=Eo.document,ps=yi.documentElement,Ui=Xn("div")||{style:{}},Xn("div"),ot=ms(ot),Ce=ot+"Origin",Ui.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Lo=!!ms("perspective"),Nn=ce.core.reverting,Vn=1)},Yn=function o(t){var e=Xn("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,r=this.style.cssText,n;if(ps.appendChild(e),e.appendChild(this),this.style.display="block",t)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=o}catch{}else this._gsapBBox&&(n=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),ps.removeChild(e),this.style.cssText=r,n},zo=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},Io=function(t){var e;try{e=t.getBBox()}catch{e=Yn.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Yn||(e=Yn.call(t,!0)),e&&!e.width&&!e.x&&!e.y?{x:+zo(t,["x","cx","x1"])||0,y:+zo(t,["y","cy","y1"])||0,width:0,height:0}:e},Uo=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&Io(t))},Xs=function(t,e){if(e){var i=t.style;e in si&&e!==Ce&&(e=ot),i.removeProperty?((e.substr(0,2)==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(e.replace(Wn,"-$1").toLowerCase())):i.removeAttribute(e)}},vi=function(t,e,i,s,r,n){var a=new se(t._pt,e,i,0,1,n?Oo:Ao);return t._pt=a,a.b=s,a.e=r,t._props.push(i),a},Vo={deg:1,rad:1,turn:1},Uu={grid:1,flex:1},bi=function o(t,e,i,s){var r=parseFloat(i)||0,n=(i+"").trim().substr((r+"").length)||"px",a=Ui.style,h=Pu.test(e),l=t.tagName.toLowerCase()==="svg",u=(l?"client":"offset")+(h?"Width":"Height"),f=100,c=s==="px",d=s==="%",_,p,g,m;return s===n||!r||Vo[s]||Vo[n]?r:(n!=="px"&&!c&&(r=o(t,e,i,"px")),m=t.getCTM&&Uo(t),(d||n==="%")&&(si[e]||~e.indexOf("adius"))?(_=m?t.getBBox()[h?"width":"height"]:t[u],_t(d?r/_*f:r/100*_)):(a[h?"width":"height"]=f+(c?n:s),p=~e.indexOf("adius")||s==="em"&&t.appendChild&&!l?t:t.parentNode,m&&(p=(t.ownerSVGElement||{}).parentNode),(!p||p===yi||!p.appendChild)&&(p=yi.body),g=p._gsap,g&&d&&g.width&&h&&g.time===ue.time&&!g.uncache?_t(r/g.width*f):((d||n==="%")&&!Uu[Xe(p,"display")]&&(a.position=Xe(t,"position")),p===t&&(a.position="static"),p.appendChild(Ui),_=Ui[u],p.removeChild(Ui),a.position="absolute",h&&d&&(g=Di(p),g.time=ue.time,g.width=p[u]),_t(c?_*r/f:_&&r?f/_*r:0))))},ni=function(t,e,i,s){var r;return Vn||Gn(),e in ri&&e!=="transform"&&(e=ri[e],~e.indexOf(",")&&(e=e.split(",")[0])),si[e]&&e!=="transform"?(r=Ys(t,s),r=e!=="transformOrigin"?r[e]:r.svg?r.origin:kr(Xe(t,Ce))+" "+r.zOrigin+"px"):(r=t.style[e],(!r||r==="auto"||s||~(r+"").indexOf("calc("))&&(r=Or[e]&&Or[e](t,e,i)||Xe(t,e)||Ga(t,e)||(e==="opacity"?1:0))),i&&!~(r+"").trim().indexOf(" ")?bi(t,e,r,i)+i:r},Vu=function(t,e,i,s){if(!i||i==="none"){var r=ms(e,t,1),n=r&&Xe(t,r,1);n&&n!==i?(e=r,i=n):e==="borderColor"&&(i=Xe(t,"borderTopColor"))}var a=new se(this._pt,t.style,e,0,1,To),h=0,l=0,u,f,c,d,_,p,g,m,v,T,x,b;if(a.b=i,a.e=s,i+="",s+="",s==="auto"&&(t.style[e]=s,s=Xe(t,e)||s,t.style[e]=i),u=[i,s],fo(u),i=u[0],s=u[1],c=i.match(as)||[],b=s.match(as)||[],b.length){for(;f=as.exec(s);)g=f[0],v=s.substring(h,f.index),_?_=(_+1)%5:(v.substr(-5)==="rgba("||v.substr(-5)==="hsla(")&&(_=1),g!==(p=c[l++]||"")&&(d=parseFloat(p)||0,x=p.substr((d+"").length),g.charAt(1)==="="&&(g=os(d,g)+x),m=parseFloat(g),T=g.substr((m+"").length),h=as.lastIndex-T.length,T||(T=T||oe.units[e]||x,h===s.length&&(s+=T,a.e+=T)),x!==T&&(d=bi(t,e,p,T)||0),a._pt={_next:a._pt,p:v||l===1?v:",",s:d,c:m-d,m:_&&_<4||e==="zIndex"?Math.round:0});a.c=h<s.length?s.substring(h,s.length):""}else a.r=e==="display"&&s==="none"?Oo:Ao;return Ia.test(s)&&(a.e=0),this._pt=a,a},No={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Nu=function(t){var e=t.split(" "),i=e[0],s=e[1]||"50%";return(i==="top"||i==="bottom"||s==="left"||s==="right")&&(t=i,i=s,s=t),e[0]=No[i]||i,e[1]=No[s]||s,e.join(" ")},Wu=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,s=i.style,r=e.u,n=i._gsap,a,h,l;if(r==="all"||r===!0)s.cssText="",h=1;else for(r=r.split(","),l=r.length;--l>-1;)a=r[l],si[a]&&(h=1,a=a==="transformOrigin"?Ce:ot),Xs(i,a);h&&(Xs(i,ot),n&&(n.svg&&i.removeAttribute("transform"),Ys(i,1),n.uncache=1,ko(s)))}},Or={clearProps:function(t,e,i,s,r){if(r.data!=="isFromStart"){var n=t._pt=new se(t._pt,e,i,0,0,Wu);return n.u=s,n.pr=-10,n.tween=r,t._props.push(i),1}}},Gs=[1,0,0,1,0,0],Wo={},Bo=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Xo=function(t){var e=Xe(t,ot);return Bo(e)?Gs:e.substr(7).match(za).map(_t)},Hn=function(t,e){var i=t._gsap||Di(t),s=t.style,r=Xo(t),n,a,h,l;return i.svg&&t.getAttribute("transform")?(h=t.transform.baseVal.consolidate().matrix,r=[h.a,h.b,h.c,h.d,h.e,h.f],r.join(",")==="1,0,0,1,0,0"?Gs:r):(r===Gs&&!t.offsetParent&&t!==ps&&!i.svg&&(h=s.display,s.display="block",n=t.parentNode,(!n||!t.offsetParent)&&(l=1,a=t.nextElementSibling,ps.appendChild(t)),r=Xo(t),h?s.display=h:Xs(t,"display"),l&&(a?n.insertBefore(t,a):n?n.appendChild(t):ps.removeChild(t))),e&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},$n=function(t,e,i,s,r,n){var a=t._gsap,h=r||Hn(t,!0),l=a.xOrigin||0,u=a.yOrigin||0,f=a.xOffset||0,c=a.yOffset||0,d=h[0],_=h[1],p=h[2],g=h[3],m=h[4],v=h[5],T=e.split(" "),x=parseFloat(T[0])||0,b=parseFloat(T[1])||0,P,w,E,R;i?h!==Gs&&(w=d*g-_*p)&&(E=x*(g/w)+b*(-p/w)+(p*v-g*m)/w,R=x*(-_/w)+b*(d/w)-(d*v-_*m)/w,x=E,b=R):(P=Io(t),x=P.x+(~T[0].indexOf("%")?x/100*P.width:x),b=P.y+(~(T[1]||T[0]).indexOf("%")?b/100*P.height:b)),s||s!==!1&&a.smooth?(m=x-l,v=b-u,a.xOffset=f+(m*d+v*p)-m,a.yOffset=c+(m*_+v*g)-v):a.xOffset=a.yOffset=0,a.xOrigin=x,a.yOrigin=b,a.smooth=!!s,a.origin=e,a.originIsAbsolute=!!i,t.style[Ce]="0px 0px",n&&(vi(n,a,"xOrigin",l,x),vi(n,a,"yOrigin",u,b),vi(n,a,"xOffset",f,a.xOffset),vi(n,a,"yOffset",c,a.yOffset)),t.setAttribute("data-svg-origin",x+" "+b)},Ys=function(t,e){var i=t._gsap||new mo(t);if("x"in i&&!e&&!i.uncache)return i;var s=t.style,r=i.scaleX<0,n="px",a="deg",h=getComputedStyle(t),l=Xe(t,Ce)||"0",u,f,c,d,_,p,g,m,v,T,x,b,P,w,E,R,M,A,k,W,U,F,O,X,N,J,y,Et,Vt,Fe,Mt,Nt;return u=f=c=p=g=m=v=T=x=0,d=_=1,i.svg=!!(t.getCTM&&Uo(t)),h.translate&&((h.translate!=="none"||h.scale!=="none"||h.rotate!=="none")&&(s[ot]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[ot]!=="none"?h[ot]:"")),s.scale=s.rotate=s.translate="none"),w=Hn(t,i.svg),i.svg&&(i.uncache?(N=t.getBBox(),l=i.xOrigin-N.x+"px "+(i.yOrigin-N.y)+"px",X=""):X=!e&&t.getAttribute("data-svg-origin"),$n(t,X||l,!!X||i.originIsAbsolute,i.smooth!==!1,w)),b=i.xOrigin||0,P=i.yOrigin||0,w!==Gs&&(A=w[0],k=w[1],W=w[2],U=w[3],u=F=w[4],f=O=w[5],w.length===6?(d=Math.sqrt(A*A+k*k),_=Math.sqrt(U*U+W*W),p=A||k?gs(k,A)*Vi:0,v=W||U?gs(W,U)*Vi+p:0,v&&(_*=Math.abs(Math.cos(v*_s))),i.svg&&(u-=b-(b*A+P*W),f-=P-(b*k+P*U))):(Nt=w[6],Fe=w[7],y=w[8],Et=w[9],Vt=w[10],Mt=w[11],u=w[12],f=w[13],c=w[14],E=gs(Nt,Vt),g=E*Vi,E&&(R=Math.cos(-E),M=Math.sin(-E),X=F*R+y*M,N=O*R+Et*M,J=Nt*R+Vt*M,y=F*-M+y*R,Et=O*-M+Et*R,Vt=Nt*-M+Vt*R,Mt=Fe*-M+Mt*R,F=X,O=N,Nt=J),E=gs(-W,Vt),m=E*Vi,E&&(R=Math.cos(-E),M=Math.sin(-E),X=A*R-y*M,N=k*R-Et*M,J=W*R-Vt*M,Mt=U*M+Mt*R,A=X,k=N,W=J),E=gs(k,A),p=E*Vi,E&&(R=Math.cos(E),M=Math.sin(E),X=A*R+k*M,N=F*R+O*M,k=k*R-A*M,O=O*R-F*M,A=X,F=N),g&&Math.abs(g)+Math.abs(p)>359.9&&(g=p=0,m=180-m),d=_t(Math.sqrt(A*A+k*k+W*W)),_=_t(Math.sqrt(O*O+Nt*Nt)),E=gs(F,O),v=Math.abs(E)>2e-4?E*Vi:0,x=Mt?1/(Mt<0?-Mt:Mt):0),i.svg&&(X=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!Bo(Xe(t,ot)),X&&t.setAttribute("transform",X))),Math.abs(v)>90&&Math.abs(v)<270&&(r?(d*=-1,v+=p<=0?180:-180,p+=p<=0?180:-180):(_*=-1,v+=v<=0?180:-180)),e=e||i.uncache,i.x=u-((i.xPercent=u&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-u)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+n,i.y=f-((i.yPercent=f&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-f)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+n,i.z=c+n,i.scaleX=_t(d),i.scaleY=_t(_),i.rotation=_t(p)+a,i.rotationX=_t(g)+a,i.rotationY=_t(m)+a,i.skewX=v+a,i.skewY=T+a,i.transformPerspective=x+n,(i.zOrigin=parseFloat(l.split(" ")[2])||0)&&(s[Ce]=kr(l)),i.xOffset=i.yOffset=0,i.force3D=oe.force3D,i.renderTransform=i.svg?Xu:Lo?Go:Bu,i.uncache=0,i},kr=function(t){return(t=t.split(" "))[0]+" "+t[1]},qn=function(t,e,i){var s=It(e);return _t(parseFloat(e)+parseFloat(bi(t,"x",i+"px",s)))+s},Bu=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Go(t,e)},Ni="0deg",Hs="0px",Wi=") ",Go=function(t,e){var i=e||this,s=i.xPercent,r=i.yPercent,n=i.x,a=i.y,h=i.z,l=i.rotation,u=i.rotationY,f=i.rotationX,c=i.skewX,d=i.skewY,_=i.scaleX,p=i.scaleY,g=i.transformPerspective,m=i.force3D,v=i.target,T=i.zOrigin,x="",b=m==="auto"&&t&&t!==1||m===!0;if(T&&(f!==Ni||u!==Ni)){var P=parseFloat(u)*_s,w=Math.sin(P),E=Math.cos(P),R;P=parseFloat(f)*_s,R=Math.cos(P),n=qn(v,n,w*R*-T),a=qn(v,a,-Math.sin(P)*-T),h=qn(v,h,E*R*-T+T)}g!==Hs&&(x+="perspective("+g+Wi),(s||r)&&(x+="translate("+s+"%, "+r+"%) "),(b||n!==Hs||a!==Hs||h!==Hs)&&(x+=h!==Hs||b?"translate3d("+n+", "+a+", "+h+") ":"translate("+n+", "+a+Wi),l!==Ni&&(x+="rotate("+l+Wi),u!==Ni&&(x+="rotateY("+u+Wi),f!==Ni&&(x+="rotateX("+f+Wi),(c!==Ni||d!==Ni)&&(x+="skew("+c+", "+d+Wi),(_!==1||p!==1)&&(x+="scale("+_+", "+p+Wi),v.style[ot]=x||"translate(0, 0)"},Xu=function(t,e){var i=e||this,s=i.xPercent,r=i.yPercent,n=i.x,a=i.y,h=i.rotation,l=i.skewX,u=i.skewY,f=i.scaleX,c=i.scaleY,d=i.target,_=i.xOrigin,p=i.yOrigin,g=i.xOffset,m=i.yOffset,v=i.forceCSS,T=parseFloat(n),x=parseFloat(a),b,P,w,E,R;h=parseFloat(h),l=parseFloat(l),u=parseFloat(u),u&&(u=parseFloat(u),l+=u,h+=u),h||l?(h*=_s,l*=_s,b=Math.cos(h)*f,P=Math.sin(h)*f,w=Math.sin(h-l)*-c,E=Math.cos(h-l)*c,l&&(u*=_s,R=Math.tan(l-u),R=Math.sqrt(1+R*R),w*=R,E*=R,u&&(R=Math.tan(u),R=Math.sqrt(1+R*R),b*=R,P*=R)),b=_t(b),P=_t(P),w=_t(w),E=_t(E)):(b=f,E=c,P=w=0),(T&&!~(n+"").indexOf("px")||x&&!~(a+"").indexOf("px"))&&(T=bi(d,"x",n,"px"),x=bi(d,"y",a,"px")),(_||p||g||m)&&(T=_t(T+_-(_*b+p*w)+g),x=_t(x+p-(_*P+p*E)+m)),(s||r)&&(R=d.getBBox(),T=_t(T+s/100*R.width),x=_t(x+r/100*R.height)),R="matrix("+b+","+P+","+w+","+E+","+T+","+x+")",d.setAttribute("transform",R),v&&(d.style[ot]=R)},Gu=function(t,e,i,s,r){var n=360,a=Pt(r),h=parseFloat(r)*(a&&~r.indexOf("rad")?Vi:1),l=h-s,u=s+l+"deg",f,c;return a&&(f=r.split("_")[1],f==="short"&&(l%=n,l!==l%(n/2)&&(l+=l<0?n:-n)),f==="cw"&&l<0?l=(l+n*Co)%n-~~(l/n)*n:f==="ccw"&&l>0&&(l=(l-n*Co)%n-~~(l/n)*n)),t._pt=c=new se(t._pt,e,i,s,l,Eu),c.e=u,c.u="deg",t._props.push(i),c},Yo=function(t,e){for(var i in e)t[i]=e[i];return t},Yu=function(t,e,i){var s=Yo({},i._gsap),r="perspective,force3D,transformOrigin,svgOrigin",n=i.style,a,h,l,u,f,c,d,_;s.svg?(l=i.getAttribute("transform"),i.setAttribute("transform",""),n[ot]=e,a=Ys(i,1),Xs(i,ot),i.setAttribute("transform",l)):(l=getComputedStyle(i)[ot],n[ot]=e,a=Ys(i,1),n[ot]=l);for(h in si)l=s[h],u=a[h],l!==u&&r.indexOf(h)<0&&(d=It(l),_=It(u),f=d!==_?bi(i,h,l,_):parseFloat(l),c=parseFloat(u),t._pt=new se(t._pt,a,h,f,c-f,Bn),t._pt.u=_||0,t._props.push(h));Yo(a,s)};ee("padding,margin,Width,Radius",function(o,t){var e="Top",i="Right",s="Bottom",r="Left",n=(t<3?[e,i,s,r]:[e+r,e+i,s+i,s+r]).map(function(a){return t<2?o+a:"border"+a+o});Or[t>1?"border"+o:o]=function(a,h,l,u,f){var c,d;if(arguments.length<4)return c=n.map(function(_){return ni(a,_,l)}),d=c.join(" "),d.split(c[0]).length===5?c[0]:d;c=(u+"").split(" "),d={},n.forEach(function(_,p){return d[_]=c[p]=c[p]||c[(p-1)/2|0]}),a.init(h,d,f)}});var Ho={name:"css",register:Gn,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,s,r){var n=this._props,a=t.style,h=i.vars.startAt,l,u,f,c,d,_,p,g,m,v,T,x,b,P,w,E;Vn||Gn(),this.styles=this.styles||Do(t),E=this.styles.props,this.tween=i;for(p in e)if(p!=="autoRound"&&(u=e[p],!(le[p]&&xo(p,e,i,s,t,r)))){if(d=typeof u,_=Or[p],d==="function"&&(u=u.call(i,s,t,r),d=typeof u),d==="string"&&~u.indexOf("random(")&&(u=Us(u)),_)_(this,t,p,u,i)&&(w=1);else if(p.substr(0,2)==="--")l=(getComputedStyle(t).getPropertyValue(p)+"").trim(),u+="",mi.lastIndex=0,mi.test(l)||(g=It(l),m=It(u)),m?g!==m&&(l=bi(t,p,l,m)+m):g&&(u+=g),this.add(a,"setProperty",l,u,s,r,0,0,p),n.push(p),E.push(p,0,a[p]);else if(d!=="undefined"){if(h&&p in h?(l=typeof h[p]=="function"?h[p].call(i,s,t,r):h[p],Pt(l)&&~l.indexOf("random(")&&(l=Us(l)),It(l+"")||(l+=oe.units[p]||It(ni(t,p))||""),(l+"").charAt(1)==="="&&(l=ni(t,p))):l=ni(t,p),c=parseFloat(l),v=d==="string"&&u.charAt(1)==="="&&u.substr(0,2),v&&(u=u.substr(2)),f=parseFloat(u),p in ri&&(p==="autoAlpha"&&(c===1&&ni(t,"visibility")==="hidden"&&f&&(c=0),E.push("visibility",0,a.visibility),vi(this,a,"visibility",c?"inherit":"hidden",f?"inherit":"hidden",!f)),p!=="scale"&&p!=="transform"&&(p=ri[p],~p.indexOf(",")&&(p=p.split(",")[0]))),T=p in si,T){if(this.styles.save(p),x||(b=t._gsap,b.renderTransform&&!e.parseTransform||Ys(t,e.parseTransform),P=e.smoothOrigin!==!1&&b.smooth,x=this._pt=new se(this._pt,a,ot,0,1,b.renderTransform,b,0,-1),x.dep=1),p==="scale")this._pt=new se(this._pt,b,"scaleY",b.scaleY,(v?os(b.scaleY,v+f):f)-b.scaleY||0,Bn),this._pt.u=0,n.push("scaleY",p),p+="X";else if(p==="transformOrigin"){E.push(Ce,0,a[Ce]),u=Nu(u),b.svg?$n(t,u,0,P,0,this):(m=parseFloat(u.split(" ")[2])||0,m!==b.zOrigin&&vi(this,b,"zOrigin",b.zOrigin,m),vi(this,a,p,kr(l),kr(u)));continue}else if(p==="svgOrigin"){$n(t,u,1,P,0,this);continue}else if(p in Wo){Gu(this,b,p,c,v?os(c,v+u):u);continue}else if(p==="smoothOrigin"){vi(this,b,"smooth",b.smooth,u);continue}else if(p==="force3D"){b[p]=u;continue}else if(p==="transform"){Yu(this,u,t);continue}}else p in a||(p=ms(p)||p);if(T||(f||f===0)&&(c||c===0)&&!Ru.test(u)&&p in a)g=(l+"").substr((c+"").length),f||(f=0),m=It(u)||(p in oe.units?oe.units[p]:g),g!==m&&(c=bi(t,p,l,m)),this._pt=new se(this._pt,T?b:a,p,c,(v?os(c,v+f):f)-c,!T&&(m==="px"||p==="zIndex")&&e.autoRound!==!1?Cu:Bn),this._pt.u=m||0,g!==m&&m!=="%"&&(this._pt.b=l,this._pt.r=Mu);else if(p in a)Vu.call(this,t,p,l,v?v+u:u);else if(p in t)this.add(t,p,l||t[p],v?v+u:u,s,r);else if(p!=="parseTransform"){gn(p,u);continue}T||(p in a?E.push(p,0,a[p]):E.push(p,1,l||t[p])),n.push(p)}}w&&So(this)},render:function(t,e){if(e.tween._time||!Nn())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:ni,aliases:ri,getSetter:function(t,e,i){var s=ri[e];return s&&s.indexOf(",")<0&&(e=s),e in si&&e!==Ce&&(t._gsap.x||ni(t,"x"))?i&&Mo===i?e==="scale"?Du:ku:(Mo=i||{})&&(e==="scale"?Lu:Fu):t.style&&!cn(t.style[e])?Au:~e.indexOf("-")?Ou:Ln(t,e)},core:{_removeProperty:Xs,_getMatrix:Hn}};ce.utils.checkPrefix=ms,ce.core.getStyleSaver=Do,function(o,t,e,i){var s=ee(o+","+t+","+e,function(r){si[r]=1});ee(t,function(r){oe.units[r]="deg",Wo[r]=1}),ri[s[13]]=o+","+t,ee(i,function(r){var n=r.split(":");ri[n[1]]=s[n[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),ee("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(o){oe.units[o]="px"}),ce.registerPlugin(Ho);var Bi=ce.registerPlugin(Ho)||ce;Bi.core.Tween;function $o(o,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(o,i.key,i)}}function Hu(o,t,e){return t&&$o(o.prototype,t),e&&$o(o,e),o}/*!
 * Observer 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var kt,jn,de,wi,Ti,xs,qo,Xi,$s,jo,ai,Ae,Zo,Qo=function(){return kt||typeof window<"u"&&(kt=window.gsap)&&kt.registerPlugin&&kt},Ko=1,ys=[],Y=[],Ge=[],qs=Date.now,Zn=function(t,e){return e},$u=function(){var t=$s.core,e=t.bridge||{},i=t._scrollers,s=t._proxies;i.push.apply(i,Y),s.push.apply(s,Ge),Y=i,Ge=s,Zn=function(n,a){return e[n](a)}},Si=function(t,e){return~Ge.indexOf(t)&&Ge[Ge.indexOf(t)+1][e]},js=function(t){return!!~jo.indexOf(t)},re=function(t,e,i,s,r){return t.addEventListener(e,i,{passive:!s,capture:!!r})},Gt=function(t,e,i,s){return t.removeEventListener(e,i,!!s)},Dr="scrollLeft",Lr="scrollTop",Qn=function(){return ai&&ai.isPressed||Y.cache++},Fr=function(t,e){var i=function s(r){if(r||r===0){Ko&&(de.history.scrollRestoration="manual");var n=ai&&ai.isPressed;r=s.v=Math.round(r)||(ai&&ai.iOS?1:0),t(r),s.cacheID=Y.cache,n&&Zn("ss",r)}else(e||Y.cache!==s.cacheID||Zn("ref"))&&(s.cacheID=Y.cache,s.v=t());return s.v+s.offset};return i.offset=0,t&&i},Yt={s:Dr,p:"left",p2:"Left",os:"right",os2:"Right",d:"width",d2:"Width",a:"x",sc:Fr(function(o){return arguments.length?de.scrollTo(o,Tt.sc()):de.pageXOffset||wi[Dr]||Ti[Dr]||xs[Dr]||0})},Tt={s:Lr,p:"top",p2:"Top",os:"bottom",os2:"Bottom",d:"height",d2:"Height",a:"y",op:Yt,sc:Fr(function(o){return arguments.length?de.scrollTo(Yt.sc(),o):de.pageYOffset||wi[Lr]||Ti[Lr]||xs[Lr]||0})},ne=function(t){return kt.utils.toArray(t)[0]||(typeof t=="string"&&kt.config().nullTargetWarn!==!1?console.warn("Element not found:",t):null)},Pi=function(t,e){var i=e.s,s=e.sc;js(t)&&(t=wi.scrollingElement||Ti);var r=Y.indexOf(t),n=s===Tt.sc?1:2;!~r&&(r=Y.push(t)-1),Y[r+n]||t.addEventListener("scroll",Qn);var a=Y[r+n],h=a||(Y[r+n]=Fr(Si(t,i),!0)||(js(t)?s:Fr(function(l){return arguments.length?t[i]=l:t[i]})));return h.target=t,a||(h.smooth=kt.getProperty(t,"scrollBehavior")==="smooth"),h},Kn=function(t,e,i){var s=t,r=t,n=qs(),a=n,h=e||50,l=Math.max(500,h*3),u=function(_,p){var g=qs();p||g-n>h?(r=s,s=_,a=n,n=g):i?s+=_:s=r+(_-r)/(g-a)*(n-a)},f=function(){r=s=i?0:s,a=n=0},c=function(_){var p=a,g=r,m=qs();return(_||_===0)&&_!==s&&u(_),n===a||m-a>l?0:(s+(i?g:-g))/((i?m:n)-p)*1e3};return{update:u,reset:f,getVelocity:c}},Zs=function(t,e){return e&&!t._gsapAllow&&t.preventDefault(),t.changedTouches?t.changedTouches[0]:t},Jo=function(t){var e=Math.max.apply(Math,t),i=Math.min.apply(Math,t);return Math.abs(e)>=Math.abs(i)?e:i},th=function(){$s=kt.core.globals().ScrollTrigger,$s&&$s.core&&$u()},eh=function(t){return kt=t||Qo(),kt&&typeof document<"u"&&document.body&&(de=window,wi=document,Ti=wi.documentElement,xs=wi.body,jo=[de,wi,Ti,xs],kt.utils.clamp,Zo=kt.core.context||function(){},Xi="onpointerenter"in xs?"pointer":"mouse",qo=yt.isTouch=de.matchMedia&&de.matchMedia("(hover: none), (pointer: coarse)").matches?1:"ontouchstart"in de||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0?2:0,Ae=yt.eventTypes=("ontouchstart"in Ti?"touchstart,touchmove,touchcancel,touchend":"onpointerdown"in Ti?"pointerdown,pointermove,pointercancel,pointerup":"mousedown,mousemove,mouseup,mouseup").split(","),setTimeout(function(){return Ko=0},500),th(),jn=1),jn};Yt.op=Tt,Y.cache=0;var yt=function(){function o(e){this.init(e)}var t=o.prototype;return t.init=function(i){jn||eh(kt)||console.warn("Please gsap.registerPlugin(Observer)"),$s||th();var s=i.tolerance,r=i.dragMinimum,n=i.type,a=i.target,h=i.lineHeight,l=i.debounce,u=i.preventDefault,f=i.onStop,c=i.onStopDelay,d=i.ignore,_=i.wheelSpeed,p=i.event,g=i.onDragStart,m=i.onDragEnd,v=i.onDrag,T=i.onPress,x=i.onRelease,b=i.onRight,P=i.onLeft,w=i.onUp,E=i.onDown,R=i.onChangeX,M=i.onChangeY,A=i.onChange,k=i.onToggleX,W=i.onToggleY,U=i.onHover,F=i.onHoverEnd,O=i.onMove,X=i.ignoreCheck,N=i.isNormalizer,J=i.onGestureStart,y=i.onGestureEnd,Et=i.onWheel,Vt=i.onEnable,Fe=i.onDisable,Mt=i.onClick,Nt=i.scrollSpeed,st=i.capture,Wt=i.allowClicks,jt=i.lockAxis,hr=i.onLockAxis;this.target=a=ne(a)||Ti,this.vars=i,d&&(d=kt.utils.toArray(d)),s=s||1e-9,r=r||0,_=_||1,Nt=Nt||1,n=n||"wheel,touch,pointer",l=l!==!1,h||(h=parseFloat(de.getComputedStyle(xs).lineHeight)||22);var _e,Me,Q,Bt,ge,$e,Zt,S=this,li=0,ht=0,Ci=Pi(a,Yt),Ai=Pi(a,Tt),Cs=Ci(),Qt=Ai(),lr=~n.indexOf("touch")&&!~n.indexOf("pointer")&&Ae[0]==="pointerdown",Oi=js(a),mt=a.ownerDocument||wi,me=[0,0,0],Kt=[0,0,0],ur=0,Jt=function(){return ur=qs()},qe=function(L,C){return(S.event=L)&&d&&~d.indexOf(L.target)||C&&lr&&L.pointerType!=="touch"||X&&X(L,C)},cr=function(){S._vx.reset(),S._vy.reset(),Me.pause(),f&&f(S)},ki=function(){var L=S.deltaX=Jo(me),C=S.deltaY=Jo(Kt),z=Math.abs(L)>=s,I=Math.abs(C)>=s;A&&(z||I)&&A(S,L,C,me,Kt),z&&(b&&S.deltaX>0&&b(S),P&&S.deltaX<0&&P(S),R&&R(S),k&&S.deltaX<0!=li<0&&k(S),li=S.deltaX,me[0]=me[1]=me[2]=0),I&&(E&&S.deltaY>0&&E(S),w&&S.deltaY<0&&w(S),M&&M(S),W&&S.deltaY<0!=ht<0&&W(S),ht=S.deltaY,Kt[0]=Kt[1]=Kt[2]=0),(Bt||Q)&&(O&&O(S),Q&&(v(S),Q=!1),Bt=!1),$e&&!($e=!1)&&hr&&hr(S),ge&&(Et(S),ge=!1),_e=0},As=function(L,C,z){me[z]+=L,Kt[z]+=C,S._vx.update(L),S._vy.update(C),l?_e||(_e=requestAnimationFrame(ki)):ki()},ts=function(L,C){jt&&!Zt&&(S.axis=Zt=Math.abs(L)>Math.abs(C)?"x":"y",$e=!0),Zt!=="y"&&(me[2]+=L,S._vx.update(L,!0)),Zt!=="x"&&(Kt[2]+=C,S._vy.update(C,!0)),l?_e||(_e=requestAnimationFrame(ki)):ki()},es=function(L){if(!qe(L,1)){L=Zs(L,u);var C=L.clientX,z=L.clientY,I=C-S.x,B=z-S.y,Ct=S.isDragging;S.x=C,S.y=z,(Ct||Math.abs(S.startX-C)>=r||Math.abs(S.startY-z)>=r)&&(v&&(Q=!0),Ct||(S.isDragging=!0),ts(I,B),Ct||g&&g(S))}},K=S.onPress=function(Z){qe(Z,1)||(S.axis=Zt=null,Me.pause(),S.isPressed=!0,Z=Zs(Z),li=ht=0,S.startX=S.x=Z.clientX,S.startY=S.y=Z.clientY,S._vx.reset(),S._vy.reset(),re(N?a:mt,Ae[1],es,u,!0),S.deltaX=S.deltaY=0,T&&T(S))},ui=function(L){if(!qe(L,1)){Gt(N?a:mt,Ae[1],es,!0);var C=!isNaN(S.y-S.startY),z=S.isDragging&&(Math.abs(S.x-S.startX)>3||Math.abs(S.y-S.startY)>3),I=Zs(L);!z&&C&&(S._vx.reset(),S._vy.reset(),u&&Wt&&kt.delayedCall(.08,function(){if(qs()-ur>300&&!L.defaultPrevented){if(L.target.click)L.target.click();else if(mt.createEvent){var B=mt.createEvent("MouseEvents");B.initMouseEvent("click",!0,!0,de,1,I.screenX,I.screenY,I.clientX,I.clientY,!1,!1,!1,!1,0,null),L.target.dispatchEvent(B)}}})),S.isDragging=S.isGesturing=S.isPressed=!1,f&&!N&&Me.restart(!0),m&&z&&m(S),x&&x(S,z)}},ze=function(L){return L.touches&&L.touches.length>1&&(S.isGesturing=!0)&&J(L,S.isDragging)},Ie=function(){return(S.isGesturing=!1)||y(S)},je=function(L){if(!qe(L)){var C=Ci(),z=Ai();As((C-Cs)*Nt,(z-Qt)*Nt,1),Cs=C,Qt=z,f&&Me.restart(!0)}},Ze=function(L){if(!qe(L)){L=Zs(L,u),Et&&(ge=!0);var C=(L.deltaMode===1?h:L.deltaMode===2?de.innerHeight:1)*_;As(L.deltaX*C,L.deltaY*C,0),f&&!N&&Me.restart(!0)}},is=function(L){if(!qe(L)){var C=L.clientX,z=L.clientY,I=C-S.x,B=z-S.y;S.x=C,S.y=z,Bt=!0,(I||B)&&ts(I,B)}},Os=function(L){S.event=L,U(S)},ci=function(L){S.event=L,F(S)},dr=function(L){return qe(L)||Zs(L,u)&&Mt(S)};Me=S._dc=kt.delayedCall(c||.25,cr).pause(),S.deltaX=S.deltaY=0,S._vx=Kn(0,50,!0),S._vy=Kn(0,50,!0),S.scrollX=Ci,S.scrollY=Ai,S.isDragging=S.isGesturing=S.isPressed=!1,Zo(this),S.enable=function(Z){return S.isEnabled||(re(Oi?mt:a,"scroll",Qn),n.indexOf("scroll")>=0&&re(Oi?mt:a,"scroll",je,u,st),n.indexOf("wheel")>=0&&re(a,"wheel",Ze,u,st),(n.indexOf("touch")>=0&&qo||n.indexOf("pointer")>=0)&&(re(a,Ae[0],K,u,st),re(mt,Ae[2],ui),re(mt,Ae[3],ui),Wt&&re(a,"click",Jt,!1,!0),Mt&&re(a,"click",dr),J&&re(mt,"gesturestart",ze),y&&re(mt,"gestureend",Ie),U&&re(a,Xi+"enter",Os),F&&re(a,Xi+"leave",ci),O&&re(a,Xi+"move",is)),S.isEnabled=!0,Z&&Z.type&&K(Z),Vt&&Vt(S)),S},S.disable=function(){S.isEnabled&&(ys.filter(function(Z){return Z!==S&&js(Z.target)}).length||Gt(Oi?mt:a,"scroll",Qn),S.isPressed&&(S._vx.reset(),S._vy.reset(),Gt(N?a:mt,Ae[1],es,!0)),Gt(Oi?mt:a,"scroll",je,st),Gt(a,"wheel",Ze,st),Gt(a,Ae[0],K,st),Gt(mt,Ae[2],ui),Gt(mt,Ae[3],ui),Gt(a,"click",Jt,!0),Gt(a,"click",dr),Gt(mt,"gesturestart",ze),Gt(mt,"gestureend",Ie),Gt(a,Xi+"enter",Os),Gt(a,Xi+"leave",ci),Gt(a,Xi+"move",is),S.isEnabled=S.isPressed=S.isDragging=!1,Fe&&Fe(S))},S.kill=S.revert=function(){S.disable();var Z=ys.indexOf(S);Z>=0&&ys.splice(Z,1),ai===S&&(ai=0)},ys.push(S),N&&js(a)&&(ai=S),S.enable(p)},Hu(o,[{key:"velocityX",get:function(){return this._vx.getVelocity()}},{key:"velocityY",get:function(){return this._vy.getVelocity()}}]),o}();yt.version="3.11.4",yt.create=function(o){return new yt(o)},yt.register=eh,yt.getAll=function(){return ys.slice()},yt.getById=function(o){return ys.filter(function(t){return t.vars.id===o})[0]},Qo()&&kt.registerPlugin(yt);/*!
 * ScrollTrigger 3.11.4
 * https://greensock.com
 *
 * @license Copyright 2008-2022, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var D,vs,q,rt,Oe,ut,ih,zr,Ir,bs,Ur,Vr,Ut,Nr,Jn,Ht,sh,rh,ws,nh,ta,ah,fe,oh,hh,lh,Ri,ea,ia,sa,Wr=1,$t=Date.now,ra=$t(),Re=0,Br=0,uh=function(){return Nr=1},ch=function(){return Nr=0},Ye=function(t){return t},Qs=function(t){return Math.round(t*1e5)/1e5||0},dh=function(){return typeof window<"u"},fh=function(){return D||dh()&&(D=window.gsap)&&D.registerPlugin&&D},Gi=function(t){return!!~ih.indexOf(t)},ph=function(t){return Si(t,"getBoundingClientRect")||(Gi(t)?function(){return en.width=q.innerWidth,en.height=q.innerHeight,en}:function(){return oi(t)})},qu=function(t,e,i){var s=i.d,r=i.d2,n=i.a;return(n=Si(t,"getBoundingClientRect"))?function(){return n()[s]}:function(){return(e?q["inner"+r]:t["client"+r])||0}},ju=function(t,e){return!e||~Ge.indexOf(t)?ph(t):function(){return en}},Ei=function(t,e){var i=e.s,s=e.d2,r=e.d,n=e.a;return(i="scroll"+s)&&(n=Si(t,i))?n()-ph(t)()[r]:Gi(t)?(Oe[i]||ut[i])-(q["inner"+s]||Oe["client"+s]||ut["client"+s]):t[i]-t["offset"+s]},Xr=function(t,e){for(var i=0;i<ws.length;i+=3)(!e||~e.indexOf(ws[i+1]))&&t(ws[i],ws[i+1],ws[i+2])},ke=function(t){return typeof t=="string"},qt=function(t){return typeof t=="function"},Ks=function(t){return typeof t=="number"},Gr=function(t){return typeof t=="object"},Js=function(t,e,i){return t&&t.progress(e?0:1)&&i&&t.pause()},na=function(t,e){if(t.enabled){var i=e(t);i&&i.totalTime&&(t.callbackAnimation=i)}},Ts=Math.abs,_h="left",gh="top",aa="right",oa="bottom",Yi="width",Hi="height",tr="Right",er="Left",ir="Top",sr="Bottom",gt="padding",Ee="margin",Ss="Width",ha="Height",Dt="px",De=function(t){return q.getComputedStyle(t)},Zu=function(t){var e=De(t).position;t.style.position=e==="absolute"||e==="fixed"?e:"relative"},mh=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},oi=function(t,e){var i=e&&De(t)[Jn]!=="matrix(1, 0, 0, 1, 0, 0)"&&D.to(t,{x:0,y:0,xPercent:0,yPercent:0,rotation:0,rotationX:0,rotationY:0,scale:1,skewX:0,skewY:0}).progress(1),s=t.getBoundingClientRect();return i&&i.progress(0).kill(),s},la=function(t,e){var i=e.d2;return t["offset"+i]||t["client"+i]||0},xh=function(t){var e=[],i=t.labels,s=t.duration(),r;for(r in i)e.push(i[r]/s);return e},Qu=function(t){return function(e){return D.utils.snap(xh(t),e)}},ua=function(t){var e=D.utils.snap(t),i=Array.isArray(t)&&t.slice(0).sort(function(s,r){return s-r});return i?function(s,r,n){n===void 0&&(n=.001);var a;if(!r)return e(s);if(r>0){for(s-=n,a=0;a<i.length;a++)if(i[a]>=s)return i[a];return i[a-1]}else for(a=i.length,s+=n;a--;)if(i[a]<=s)return i[a];return i[0]}:function(s,r,n){n===void 0&&(n=.001);var a=e(s);return!r||Math.abs(a-s)<n||a-s<0==r<0?a:e(r<0?s-t:s+t)}},Ku=function(t){return function(e,i){return ua(xh(t))(e,i.direction)}},Yr=function(t,e,i,s){return i.split(",").forEach(function(r){return t(e,r,s)})},Lt=function(t,e,i,s,r){return t.addEventListener(e,i,{passive:!s,capture:!!r})},Rt=function(t,e,i,s){return t.removeEventListener(e,i,!!s)},Hr=function(t,e,i){return i&&i.wheelHandler&&t(e,"wheel",i)},yh={startColor:"green",endColor:"red",indent:0,fontSize:"16px",fontWeight:"normal"},$r={toggleActions:"play",anticipatePin:0},qr={top:0,left:0,center:.5,bottom:1,right:1},jr=function(t,e){if(ke(t)){var i=t.indexOf("="),s=~i?+(t.charAt(i-1)+1)*parseFloat(t.substr(i+1)):0;~i&&(t.indexOf("%")>i&&(s*=e/100),t=t.substr(0,i-1)),t=s+(t in qr?qr[t]*e:~t.indexOf("%")?parseFloat(t)*e/100:parseFloat(t)||0)}return t},Zr=function(t,e,i,s,r,n,a,h){var l=r.startColor,u=r.endColor,f=r.fontSize,c=r.indent,d=r.fontWeight,_=rt.createElement("div"),p=Gi(i)||Si(i,"pinType")==="fixed",g=t.indexOf("scroller")!==-1,m=p?ut:i,v=t.indexOf("start")!==-1,T=v?l:u,x="border-color:"+T+";font-size:"+f+";color:"+T+";font-weight:"+d+";pointer-events:none;white-space:nowrap;font-family:sans-serif,Arial;z-index:1000;padding:4px 8px;border-width:0;border-style:solid;";return x+="position:"+((g||h)&&p?"fixed;":"absolute;"),(g||h||!p)&&(x+=(s===Tt?aa:oa)+":"+(n+parseFloat(c))+"px;"),a&&(x+="box-sizing:border-box;text-align:left;width:"+a.offsetWidth+"px;"),_._isStart=v,_.setAttribute("class","gsap-marker-"+t+(e?" marker-"+e:"")),_.style.cssText=x,_.innerText=e||e===0?t+"-"+e:t,m.children[0]?m.insertBefore(_,m.children[0]):m.appendChild(_),_._offset=_["offset"+s.op.d2],Qr(_,0,s,v),_},Qr=function(t,e,i,s){var r={display:"block"},n=i[s?"os2":"p2"],a=i[s?"p2":"os2"];t._isFlipped=s,r[i.a+"Percent"]=s?-100:0,r[i.a]=s?"1px":0,r["border"+n+Ss]=1,r["border"+a+Ss]=0,r[i.p]=e+"px",D.set(t,r)},G=[],ca={},rr,vh=function(){return $t()-Re>34&&(rr||(rr=requestAnimationFrame(Mi)))},Ps=function(){(!fe||!fe.isPressed||fe.startX>ut.clientWidth)&&(Y.cache++,fe?rr||(rr=requestAnimationFrame(Mi)):Mi(),Re||qi("scrollStart"),Re=$t())},da=function(){lh=q.innerWidth,hh=q.innerHeight},nr=function(){Y.cache++,!Ut&&!ah&&!rt.fullscreenElement&&!rt.webkitFullscreenElement&&(!oh||lh!==q.innerWidth||Math.abs(q.innerHeight-hh)>q.innerHeight*.25)&&zr.restart(!0)},$i={},Ju=[],bh=function o(){return Rt(j,"scrollEnd",o)||Zi(!0)},qi=function(t){return $i[t]&&$i[t].map(function(e){return e()})||Ju},pe=[],wh=function(t){for(var e=0;e<pe.length;e+=5)(!t||pe[e+4]&&pe[e+4].query===t)&&(pe[e].style.cssText=pe[e+1],pe[e].getBBox&&pe[e].setAttribute("transform",pe[e+2]||""),pe[e+3].uncache=1)},fa=function(t,e){var i;for(Ht=0;Ht<G.length;Ht++)i=G[Ht],i&&(!e||i._ctx===e)&&(t?i.kill(1):i.revert(!0,!0));e&&wh(e),e||qi("revert")},Th=function(t,e){Y.cache++,(e||!Le)&&Y.forEach(function(i){return qt(i)&&i.cacheID++&&(i.rec=0)}),ke(t)&&(q.history.scrollRestoration=ia=t)},Le,ji=0,Sh,tc=function(){if(Sh!==ji){var t=Sh=ji;requestAnimationFrame(function(){return t===ji&&Zi(!0)})}},Zi=function(t,e){if(Re&&!t){Lt(j,"scrollEnd",bh);return}Le=j.isRefreshing=!0,Y.forEach(function(s){return qt(s)&&s.cacheID++&&(s.rec=s())});var i=qi("refreshInit");nh&&j.sort(),e||fa(),Y.forEach(function(s){qt(s)&&(s.smooth&&(s.target.style.scrollBehavior="auto"),s(0))}),G.slice(0).forEach(function(s){return s.refresh()}),G.forEach(function(s,r){if(s._subPinOffset&&s.pin){var n=s.vars.horizontal?"offsetWidth":"offsetHeight",a=s.pin[n];s.revert(!0,1),s.adjustPinSpacing(s.pin[n]-a),s.revert(!1,1)}}),G.forEach(function(s){return s.vars.end==="max"&&s.setPositions(s.start,Math.max(s.start+1,Ei(s.scroller,s._dir)))}),i.forEach(function(s){return s&&s.render&&s.render(-1)}),Y.forEach(function(s){qt(s)&&(s.smooth&&requestAnimationFrame(function(){return s.target.style.scrollBehavior="smooth"}),s.rec&&s(s.rec))}),Th(ia,1),zr.pause(),ji++,Mi(2),G.forEach(function(s){return qt(s.vars.onRefresh)&&s.vars.onRefresh(s)}),Le=j.isRefreshing=!1,qi("refresh")},Ph=0,Kr=1,ar,Mi=function(t){if(!Le||t===2){j.isUpdating=!0,ar&&ar.update(0);var e=G.length,i=$t(),s=i-ra>=50,r=e&&G[0].scroll();if(Kr=Ph>r?-1:1,Ph=r,s&&(Re&&!Nr&&i-Re>200&&(Re=0,qi("scrollEnd")),Ur=ra,ra=i),Kr<0){for(Ht=e;Ht-- >0;)G[Ht]&&G[Ht].update(0,s);Kr=1}else for(Ht=0;Ht<e;Ht++)G[Ht]&&G[Ht].update(0,s);j.isUpdating=!1}rr=0},pa=[_h,gh,oa,aa,Ee+sr,Ee+tr,Ee+ir,Ee+er,"display","flexShrink","float","zIndex","gridColumnStart","gridColumnEnd","gridRowStart","gridRowEnd","gridArea","justifySelf","alignSelf","placeSelf","order"],Jr=pa.concat([Yi,Hi,"boxSizing","max"+Ss,"max"+ha,"position",Ee,gt,gt+ir,gt+tr,gt+sr,gt+er]),ec=function(t,e,i){Rs(i);var s=t._gsap;if(s.spacerIsNative)Rs(s.spacerState);else if(t._gsap.swappedIn){var r=e.parentNode;r&&(r.insertBefore(t,e),r.removeChild(e))}t._gsap.swappedIn=!1},_a=function(t,e,i,s){if(!t._gsap.swappedIn){for(var r=pa.length,n=e.style,a=t.style,h;r--;)h=pa[r],n[h]=i[h];n.position=i.position==="absolute"?"absolute":"relative",i.display==="inline"&&(n.display="inline-block"),a[oa]=a[aa]="auto",n.flexBasis=i.flexBasis||"auto",n.overflow="visible",n.boxSizing="border-box",n[Yi]=la(t,Yt)+Dt,n[Hi]=la(t,Tt)+Dt,n[gt]=a[Ee]=a[gh]=a[_h]="0",Rs(s),a[Yi]=a["max"+Ss]=i[Yi],a[Hi]=a["max"+ha]=i[Hi],a[gt]=i[gt],t.parentNode!==e&&(t.parentNode.insertBefore(e,t),e.appendChild(t)),t._gsap.swappedIn=!0}},ic=/([A-Z])/g,Rs=function(t){if(t){var e=t.t.style,i=t.length,s=0,r,n;for((t.t._gsap||D.core.getCache(t.t)).uncache=1;s<i;s+=2)n=t[s+1],r=t[s],n?e[r]=n:e[r]&&e.removeProperty(r.replace(ic,"-$1").toLowerCase())}},tn=function(t){for(var e=Jr.length,i=t.style,s=[],r=0;r<e;r++)s.push(Jr[r],i[Jr[r]]);return s.t=t,s},sc=function(t,e,i){for(var s=[],r=t.length,n=i?8:0,a;n<r;n+=2)a=t[n],s.push(a,a in e?e[a]:t[n+1]);return s.t=t.t,s},en={left:0,top:0},Rh=function(t,e,i,s,r,n,a,h,l,u,f,c,d){qt(t)&&(t=t(h)),ke(t)&&t.substr(0,3)==="max"&&(t=c+(t.charAt(4)==="="?jr("0"+t.substr(3),i):0));var _=d?d.time():0,p,g,m;if(d&&d.seek(0),Ks(t))a&&Qr(a,i,s,!0);else{qt(e)&&(e=e(h));var v=(t||"0").split(" "),T,x,b,P;m=ne(e)||ut,T=oi(m)||{},(!T||!T.left&&!T.top)&&De(m).display==="none"&&(P=m.style.display,m.style.display="block",T=oi(m),P?m.style.display=P:m.style.removeProperty("display")),x=jr(v[0],T[s.d]),b=jr(v[1]||"0",i),t=T[s.p]-l[s.p]-u+x+r-b,a&&Qr(a,b,s,i-b<20||a._isStart&&b>20),i-=i-b}if(n){var w=t+i,E=n._isStart;p="scroll"+s.d2,Qr(n,w,s,E&&w>20||!E&&(f?Math.max(ut[p],Oe[p]):n.parentNode[p])<=w+1),f&&(l=oi(a),f&&(n.style[s.op.p]=l[s.op.p]-s.op.m-n._offset+Dt))}return d&&m&&(p=oi(m),d.seek(c),g=oi(m),d._caScrollDist=p[s.p]-g[s.p],t=t/d._caScrollDist*c),d&&d.seek(_),d?t:Math.round(t)},rc=/(webkit|moz|length|cssText|inset)/i,Eh=function(t,e,i,s){if(t.parentNode!==e){var r=t.style,n,a;if(e===ut){t._stOrig=r.cssText,a=De(t);for(n in a)!+n&&!rc.test(n)&&a[n]&&typeof r[n]=="string"&&n!=="0"&&(r[n]=a[n]);r.top=i,r.left=s}else r.cssText=t._stOrig;D.core.getCache(t).uncache=1,e.appendChild(t)}},Mh=function(t,e){var i=Pi(t,e),s="_scroll"+e.p2,r,n,a=function h(l,u,f,c,d){var _=h.tween,p=u.onComplete,g={};return f=f||i(),d=c&&d||0,c=c||l-f,_&&_.kill(),r=Math.round(f),u[s]=l,u.modifiers=g,g[s]=function(m){return m=Math.round(i()),m!==r&&m!==n&&Math.abs(m-r)>3&&Math.abs(m-n)>3?(_.kill(),h.tween=0):m=f+c*_.ratio+d*_.ratio*_.ratio,n=r,r=Math.round(m)},u.onUpdate=function(){Y.cache++,Mi()},u.onComplete=function(){h.tween=0,p&&p.call(_)},_=h.tween=D.to(t,u),_};return t[s]=i,i.wheelHandler=function(){return a.tween&&a.tween.kill()&&(a.tween=0)},Lt(t,"wheel",i.wheelHandler),a},j=function(){function o(e,i){vs||o.register(D)||console.warn("Please gsap.registerPlugin(ScrollTrigger)"),this.init(e,i)}var t=o.prototype;return t.init=function(i,s){if(this.progress=this.start=0,this.vars&&this.kill(!0,!0),!Br){this.update=this.refresh=this.kill=Ye;return}i=mh(ke(i)||Ks(i)||i.nodeType?{trigger:i}:i,$r);var r=i,n=r.onUpdate,a=r.toggleClass,h=r.id,l=r.onToggle,u=r.onRefresh,f=r.scrub,c=r.trigger,d=r.pin,_=r.pinSpacing,p=r.invalidateOnRefresh,g=r.anticipatePin,m=r.onScrubComplete,v=r.onSnapComplete,T=r.once,x=r.snap,b=r.pinReparent,P=r.pinSpacer,w=r.containerAnimation,E=r.fastScrollEnd,R=r.preventOverlaps,M=i.horizontal||i.containerAnimation&&i.horizontal!==!1?Yt:Tt,A=!f&&f!==0,k=ne(i.scroller||q),W=D.core.getCache(k),U=Gi(k),F=("pinType"in i?i.pinType:Si(k,"pinType")||U&&"fixed")==="fixed",O=[i.onEnter,i.onLeave,i.onEnterBack,i.onLeaveBack],X=A&&i.toggleActions.split(" "),N="markers"in i?i.markers:$r.markers,J=U?0:parseFloat(De(k)["border"+M.p2+Ss])||0,y=this,Et=i.onRefreshInit&&function(){return i.onRefreshInit(y)},Vt=qu(k,U,M),Fe=ju(k,U),Mt=0,Nt=0,st=Pi(k,M),Wt,jt,hr,_e,Me,Q,Bt,ge,$e,Zt,S,li,ht,Ci,Ai,Cs,Qt,lr,Oi,mt,me,Kt,ur,Jt,qe,cr,ki,As,ts,es,K,ui,ze,Ie,je,Ze,is,Os,ci;if(ea(y),y._dir=M,g*=45,y.scroller=k,y.scroll=w?w.time.bind(w):st,_e=st(),y.vars=i,s=s||i.animation,"refreshPriority"in i&&(nh=1,i.refreshPriority===-9999&&(ar=y)),W.tweenScroll=W.tweenScroll||{top:Mh(k,Tt),left:Mh(k,Yt)},y.tweenTo=Wt=W.tweenScroll[M.p],y.scrubDuration=function(C){ui=Ks(C)&&C,ui?K?K.duration(C):K=D.to(s,{ease:"expo",totalProgress:"+=0.001",duration:ui,paused:!0,onComplete:function(){return m&&m(y)}}):(K&&K.progress(1).kill(),K=0)},s&&(s.vars.lazy=!1,s._initted||s.vars.immediateRender!==!1&&i.immediateRender!==!1&&s.duration()&&s.render(0,!0,!0),y.animation=s.pause(),s.scrollTrigger=y,y.scrubDuration(f),ts=0,h||(h=s.vars.id)),G.push(y),x&&((!Gr(x)||x.push)&&(x={snapTo:x}),"scrollBehavior"in ut.style&&D.set(U?[ut,Oe]:k,{scrollBehavior:"auto"}),Y.forEach(function(C){return qt(C)&&C.target===(U?rt.scrollingElement||Oe:k)&&(C.smooth=!1)}),hr=qt(x.snapTo)?x.snapTo:x.snapTo==="labels"?Qu(s):x.snapTo==="labelsDirectional"?Ku(s):x.directional!==!1?function(C,z){return ua(x.snapTo)(C,$t()-Nt<500?0:z.direction)}:D.utils.snap(x.snapTo),ze=x.duration||{min:.1,max:2},ze=Gr(ze)?bs(ze.min,ze.max):bs(ze,ze),Ie=D.delayedCall(x.delay||ui/2||.1,function(){var C=st(),z=$t()-Nt<500,I=Wt.tween;if((z||Math.abs(y.getVelocity())<10)&&!I&&!Nr&&Mt!==C){var B=(C-Q)/ht,Ct=s&&!A?s.totalProgress():B,H=z?0:(Ct-es)/($t()-Ur)*1e3||0,vt=D.utils.clamp(-B,1-B,Ts(H/2)*H/.185),ct=B+(x.inertia===!1?0:vt),Qe=bs(0,1,hr(ct,y)),it=Math.round(Q+Qe*ht),At=x,Ue=At.onStart,dt=At.onInterrupt,ft=At.onComplete;if(C<=Bt&&C>=Q&&it!==C){if(I&&!I._initted&&I.data<=Ts(it-C))return;x.inertia===!1&&(vt=Qe-B),Wt(it,{duration:ze(Ts(Math.max(Ts(ct-Ct),Ts(Qe-Ct))*.185/H/.05||0)),ease:x.ease||"power3",data:Ts(it-C),onInterrupt:function(){return Ie.restart(!0)&&dt&&dt(y)},onComplete:function(){y.update(),Mt=st(),ts=es=s&&!A?s.totalProgress():y.progress,v&&v(y),ft&&ft(y)}},C,vt*ht,it-C-vt*ht),Ue&&Ue(y,Wt.tween)}}else y.isActive&&Mt!==C&&Ie.restart(!0)}).pause()),h&&(ca[h]=y),c=y.trigger=ne(c||d),ci=c&&c._gsap&&c._gsap.stRevert,ci&&(ci=ci(y)),d=d===!0?c:ne(d),ke(a)&&(a={targets:c,className:a}),d&&(_===!1||_===Ee||(_=!_&&d.parentNode&&d.parentNode.style&&De(d.parentNode).display==="flex"?!1:gt),y.pin=d,jt=D.core.getCache(d),jt.spacer?Ci=jt.pinState:(P&&(P=ne(P),P&&!P.nodeType&&(P=P.current||P.nativeElement),jt.spacerIsNative=!!P,P&&(jt.spacerState=tn(P))),jt.spacer=Qt=P||rt.createElement("div"),Qt.classList.add("pin-spacer"),h&&Qt.classList.add("pin-spacer-"+h),jt.pinState=Ci=tn(d)),i.force3D!==!1&&D.set(d,{force3D:!0}),y.spacer=Qt=jt.spacer,As=De(d),ur=As[_+M.os2],Oi=D.getProperty(d),mt=D.quickSetter(d,M.a,Dt),_a(d,Qt,As),Cs=tn(d)),N){li=Gr(N)?mh(N,yh):yh,Zt=Zr("scroller-start",h,k,M,li,0),S=Zr("scroller-end",h,k,M,li,0,Zt),lr=Zt["offset"+M.op.d2];var dr=ne(Si(k,"content")||k);ge=this.markerStart=Zr("start",h,dr,M,li,lr,0,w),$e=this.markerEnd=Zr("end",h,dr,M,li,lr,0,w),w&&(Os=D.quickSetter([ge,$e],M.a,Dt)),!F&&!(Ge.length&&Si(k,"fixedMarkers")===!0)&&(Zu(U?ut:k),D.set([Zt,S],{force3D:!0}),qe=D.quickSetter(Zt,M.a,Dt),ki=D.quickSetter(S,M.a,Dt))}if(w){var Z=w.vars.onUpdate,L=w.vars.onUpdateParams;w.eventCallback("onUpdate",function(){y.update(0,0,1),Z&&Z.apply(L||[])})}y.previous=function(){return G[G.indexOf(y)-1]},y.next=function(){return G[G.indexOf(y)+1]},y.revert=function(C,z){if(!z)return y.kill(!0);var I=C!==!1||!y.enabled,B=Ut;I!==y.isReverted&&(I&&(Ze=Math.max(st(),y.scroll.rec||0),je=y.progress,is=s&&s.progress()),ge&&[ge,$e,Zt,S].forEach(function(Ct){return Ct.style.display=I?"none":"block"}),I&&(Ut=1,y.update(I)),d&&(!b||!y.isActive)&&(I?ec(d,Qt,Ci):_a(d,Qt,De(d),Jt)),I||y.update(I),Ut=B,y.isReverted=I)},y.refresh=function(C,z){if(!((Ut||!y.enabled)&&!z)){if(d&&C&&Re){Lt(o,"scrollEnd",bh);return}!Le&&Et&&Et(y),Ut=1,Nt=$t(),Wt.tween&&(Wt.tween.kill(),Wt.tween=0),K&&K.pause(),p&&s&&s.revert({kill:!1}).invalidate(),y.isReverted||y.revert(!0,!0),y._subPinOffset=!1;for(var I=Vt(),B=Fe(),Ct=w?w.duration():Ei(k,M),H=0,vt=0,ct=i.end,Qe=i.endTrigger||c,it=i.start||(i.start===0||!c?0:d?"0 0":"0 100%"),At=y.pinnedContainer=i.pinnedContainer&&ne(i.pinnedContainer),Ue=c&&Math.max(0,G.indexOf(y))||0,dt=Ue,ft,bt,ks,ss,St,pt,di,Sa,$h,fr,Ke;dt--;)pt=G[dt],pt.end||pt.refresh(0,1)||(Ut=1),di=pt.pin,di&&(di===c||di===d)&&!pt.isReverted&&(fr||(fr=[]),fr.unshift(pt),pt.revert(!0,!0)),pt!==G[dt]&&(Ue--,dt--);for(qt(it)&&(it=it(y)),Q=Rh(it,c,I,M,st(),ge,Zt,y,B,J,F,Ct,w)||(d?-.001:0),qt(ct)&&(ct=ct(y)),ke(ct)&&!ct.indexOf("+=")&&(~ct.indexOf(" ")?ct=(ke(it)?it.split(" ")[0]:"")+ct:(H=jr(ct.substr(2),I),ct=ke(it)?it:Q+H,Qe=c)),Bt=Math.max(Q,Rh(ct||(Qe?"100% 0":Ct),Qe,I,M,st()+H,$e,S,y,B,J,F,Ct,w))||-.001,ht=Bt-Q||(Q-=.01)&&.001,H=0,dt=Ue;dt--;)pt=G[dt],di=pt.pin,di&&pt.start-pt._pinPush<=Q&&!w&&pt.end>0&&(ft=pt.end-pt.start,(di===c&&pt.start-pt._pinPush<Q||di===At)&&!Ks(it)&&(H+=ft*(1-pt.progress)),di===d&&(vt+=ft));if(Q+=H,Bt+=H,y._pinPush=vt,ge&&H&&(ft={},ft[M.a]="+="+H,At&&(ft[M.p]="-="+st()),D.set([ge,$e],ft)),d)ft=De(d),ss=M===Tt,ks=st(),me=parseFloat(Oi(M.a))+vt,!Ct&&Bt>1&&(Ke=(U?rt.scrollingElement||Oe:k).style,Ke={style:Ke,value:Ke["overflow"+M.a.toUpperCase()]},Ke["overflow"+M.a.toUpperCase()]="scroll"),_a(d,Qt,ft),Cs=tn(d),bt=oi(d,!0),Sa=F&&Pi(k,ss?Yt:Tt)(),_&&(Jt=[_+M.os2,ht+vt+Dt],Jt.t=Qt,dt=_===gt?la(d,M)+ht+vt:0,dt&&Jt.push(M.d,dt+Dt),Rs(Jt),At&&G.forEach(function(pr){pr.pin===At&&pr.vars.pinSpacing!==!1&&(pr._subPinOffset=!0)}),F&&st(Ze)),F&&(St={top:bt.top+(ss?ks-Q:Sa)+Dt,left:bt.left+(ss?Sa:ks-Q)+Dt,boxSizing:"border-box",position:"fixed"},St[Yi]=St["max"+Ss]=Math.ceil(bt.width)+Dt,St[Hi]=St["max"+ha]=Math.ceil(bt.height)+Dt,St[Ee]=St[Ee+ir]=St[Ee+tr]=St[Ee+sr]=St[Ee+er]="0",St[gt]=ft[gt],St[gt+ir]=ft[gt+ir],St[gt+tr]=ft[gt+tr],St[gt+sr]=ft[gt+sr],St[gt+er]=ft[gt+er],Ai=sc(Ci,St,b),Le&&st(0)),s?($h=s._initted,ta(1),s.render(s.duration(),!0,!0),Kt=Oi(M.a)-me+ht+vt,cr=Math.abs(ht-Kt)>1,F&&cr&&Ai.splice(Ai.length-2,2),s.render(0,!0,!0),$h||s.invalidate(!0),s.parent||s.totalTime(s.totalTime()),ta(0)):Kt=ht,Ke&&(Ke.value?Ke.style["overflow"+M.a.toUpperCase()]=Ke.value:Ke.style.removeProperty("overflow-"+M.a));else if(c&&st()&&!w)for(bt=c.parentNode;bt&&bt!==ut;)bt._pinOffset&&(Q-=bt._pinOffset,Bt-=bt._pinOffset),bt=bt.parentNode;fr&&fr.forEach(function(pr){return pr.revert(!1,!0)}),y.start=Q,y.end=Bt,_e=Me=Le?Ze:st(),!w&&!Le&&(_e<Ze&&st(Ze),y.scroll.rec=0),y.revert(!1,!0),Ie&&(Mt=-1,y.isActive&&st(Q+ht*je),Ie.restart(!0)),Ut=0,s&&A&&(s._initted||is)&&s.progress()!==is&&s.progress(is,!0).render(s.time(),!0,!0),(je!==y.progress||w)&&(s&&!A&&s.totalProgress(je,!0),y.progress=(_e-Q)/ht===je?0:je),d&&_&&(Qt._pinOffset=Math.round(y.progress*Kt)),u&&!Le&&u(y)}},y.getVelocity=function(){return(st()-Me)/($t()-Ur)*1e3||0},y.endAnimation=function(){Js(y.callbackAnimation),s&&(K?K.progress(1):s.paused()?A||Js(s,y.direction<0,1):Js(s,s.reversed()))},y.labelToScroll=function(C){return s&&s.labels&&(Q||y.refresh()||Q)+s.labels[C]/s.duration()*ht||0},y.getTrailing=function(C){var z=G.indexOf(y),I=y.direction>0?G.slice(0,z).reverse():G.slice(z+1);return(ke(C)?I.filter(function(B){return B.vars.preventOverlaps===C}):I).filter(function(B){return y.direction>0?B.end<=Q:B.start>=Bt})},y.update=function(C,z,I){if(!(w&&!I&&!C)){var B=Le?Ze:y.scroll(),Ct=C?0:(B-Q)/ht,H=Ct<0?0:Ct>1?1:Ct||0,vt=y.progress,ct,Qe,it,At,Ue,dt,ft,bt;if(z&&(Me=_e,_e=w?st():B,x&&(es=ts,ts=s&&!A?s.totalProgress():H)),g&&!H&&d&&!Ut&&!Wr&&Re&&Q<B+(B-Me)/($t()-Ur)*g&&(H=1e-4),H!==vt&&y.enabled){if(ct=y.isActive=!!H&&H<1,Qe=!!vt&&vt<1,dt=ct!==Qe,Ue=dt||!!H!=!!vt,y.direction=H>vt?1:-1,y.progress=H,Ue&&!Ut&&(it=H&&!vt?0:H===1?1:vt===1?2:3,A&&(At=!dt&&X[it+1]!=="none"&&X[it+1]||X[it],bt=s&&(At==="complete"||At==="reset"||At in s))),R&&(dt||bt)&&(bt||f||!s)&&(qt(R)?R(y):y.getTrailing(R).forEach(function(pt){return pt.endAnimation()})),A||(K&&!Ut&&!Wr?(K._dp._time-K._start!==K._time&&K.render(K._dp._time-K._start),K.resetTo?K.resetTo("totalProgress",H,s._tTime/s._tDur):(K.vars.totalProgress=H,K.invalidate().restart())):s&&s.totalProgress(H,!!Ut)),d){if(C&&_&&(Qt.style[_+M.os2]=ur),!F)mt(Qs(me+Kt*H));else if(Ue){if(ft=!C&&H>vt&&Bt+1>B&&B+1>=Ei(k,M),b)if(!C&&(ct||ft)){var ks=oi(d,!0),ss=B-Q;Eh(d,ut,ks.top+(M===Tt?ss:0)+Dt,ks.left+(M===Tt?0:ss)+Dt)}else Eh(d,Qt);Rs(ct||ft?Ai:Cs),cr&&H<1&&ct||mt(me+(H===1&&!ft?Kt:0))}}x&&!Wt.tween&&!Ut&&!Wr&&Ie.restart(!0),a&&(dt||T&&H&&(H<1||!sa))&&Ir(a.targets).forEach(function(pt){return pt.classList[ct||T?"add":"remove"](a.className)}),n&&!A&&!C&&n(y),Ue&&!Ut?(A&&(bt&&(At==="complete"?s.pause().totalProgress(1):At==="reset"?s.restart(!0).pause():At==="restart"?s.restart(!0):s[At]()),n&&n(y)),(dt||!sa)&&(l&&dt&&na(y,l),O[it]&&na(y,O[it]),T&&(H===1?y.kill(!1,1):O[it]=0),dt||(it=H===1?1:3,O[it]&&na(y,O[it]))),E&&!ct&&Math.abs(y.getVelocity())>(Ks(E)?E:2500)&&(Js(y.callbackAnimation),K?K.progress(1):Js(s,At==="reverse"?1:!H,1))):A&&n&&!Ut&&n(y)}if(ki){var St=w?B/w.duration()*(w._caScrollDist||0):B;qe(St+(Zt._isFlipped?1:0)),ki(St)}Os&&Os(-B/w.duration()*(w._caScrollDist||0))}},y.enable=function(C,z){y.enabled||(y.enabled=!0,Lt(k,"resize",nr),Lt(U?rt:k,"scroll",Ps),Et&&Lt(o,"refreshInit",Et),C!==!1&&(y.progress=je=0,_e=Me=Mt=st()),z!==!1&&y.refresh())},y.getTween=function(C){return C&&Wt?Wt.tween:K},y.setPositions=function(C,z){d&&(me+=C-Q,Kt+=z-C-ht,_===gt&&y.adjustPinSpacing(z-C-ht)),y.start=Q=C,y.end=Bt=z,ht=z-C,y.update()},y.adjustPinSpacing=function(C){if(Jt){var z=Jt.indexOf(M.d)+1;Jt[z]=parseFloat(Jt[z])+C+Dt,Jt[1]=parseFloat(Jt[1])+C+Dt,Rs(Jt)}},y.disable=function(C,z){if(y.enabled&&(C!==!1&&y.revert(!0,!0),y.enabled=y.isActive=!1,z||K&&K.pause(),Ze=0,jt&&(jt.uncache=1),Et&&Rt(o,"refreshInit",Et),Ie&&(Ie.pause(),Wt.tween&&Wt.tween.kill()&&(Wt.tween=0)),!U)){for(var I=G.length;I--;)if(G[I].scroller===k&&G[I]!==y)return;Rt(k,"resize",nr),Rt(k,"scroll",Ps)}},y.kill=function(C,z){y.disable(C,z),K&&!z&&K.kill(),h&&delete ca[h];var I=G.indexOf(y);I>=0&&G.splice(I,1),I===Ht&&Kr>0&&Ht--,I=0,G.forEach(function(B){return B.scroller===y.scroller&&(I=1)}),I||Le||(y.scroll.rec=0),s&&(s.scrollTrigger=null,C&&s.revert({kill:!1}),z||s.kill()),ge&&[ge,$e,Zt,S].forEach(function(B){return B.parentNode&&B.parentNode.removeChild(B)}),ar===y&&(ar=0),d&&(jt&&(jt.uncache=1),I=0,G.forEach(function(B){return B.pin===d&&I++}),I||(jt.spacer=0)),i.onKill&&i.onKill(y)},y.enable(!1,!1),ci&&ci(y),!s||!s.add||ht?y.refresh():D.delayedCall(.01,function(){return Q||Bt||y.refresh()})&&(ht=.01)&&(Q=Bt=0),d&&tc()},o.register=function(i){return vs||(D=i||fh(),dh()&&window.document&&o.enable(),vs=Br),vs},o.defaults=function(i){if(i)for(var s in i)$r[s]=i[s];return $r},o.disable=function(i,s){Br=0,G.forEach(function(n){return n[s?"kill":"disable"](i)}),Rt(q,"wheel",Ps),Rt(rt,"scroll",Ps),clearInterval(Vr),Rt(rt,"touchcancel",Ye),Rt(ut,"touchstart",Ye),Yr(Rt,rt,"pointerdown,touchstart,mousedown",uh),Yr(Rt,rt,"pointerup,touchend,mouseup",ch),zr.kill(),Xr(Rt);for(var r=0;r<Y.length;r+=3)Hr(Rt,Y[r],Y[r+1]),Hr(Rt,Y[r],Y[r+2])},o.enable=function(){if(q=window,rt=document,Oe=rt.documentElement,ut=rt.body,D&&(Ir=D.utils.toArray,bs=D.utils.clamp,ea=D.core.context||Ye,ta=D.core.suppressOverwrites||Ye,ia=q.history.scrollRestoration||"auto",D.core.globals("ScrollTrigger",o),ut)){Br=1,yt.register(D),o.isTouch=yt.isTouch,Ri=yt.isTouch&&/(iPad|iPhone|iPod|Mac)/g.test(navigator.userAgent),Lt(q,"wheel",Ps),ih=[q,rt,Oe,ut],D.matchMedia?(o.matchMedia=function(h){var l=D.matchMedia(),u;for(u in h)l.add(u,h[u]);return l},D.addEventListener("matchMediaInit",function(){return fa()}),D.addEventListener("matchMediaRevert",function(){return wh()}),D.addEventListener("matchMedia",function(){Zi(0,1),qi("matchMedia")}),D.matchMedia("(orientation: portrait)",function(){return da(),da})):console.warn("Requires GSAP 3.11.0 or later"),da(),Lt(rt,"scroll",Ps);var i=ut.style,s=i.borderTopStyle,r=D.core.Animation.prototype,n,a;for(r.revert||Object.defineProperty(r,"revert",{value:function(){return this.time(-.01,!0)}}),i.borderTopStyle="solid",n=oi(ut),Tt.m=Math.round(n.top+Tt.sc())||0,Yt.m=Math.round(n.left+Yt.sc())||0,s?i.borderTopStyle=s:i.removeProperty("border-top-style"),Vr=setInterval(vh,250),D.delayedCall(.5,function(){return Wr=0}),Lt(rt,"touchcancel",Ye),Lt(ut,"touchstart",Ye),Yr(Lt,rt,"pointerdown,touchstart,mousedown",uh),Yr(Lt,rt,"pointerup,touchend,mouseup",ch),Jn=D.utils.checkPrefix("transform"),Jr.push(Jn),vs=$t(),zr=D.delayedCall(.2,Zi).pause(),ws=[rt,"visibilitychange",function(){var h=q.innerWidth,l=q.innerHeight;rt.hidden?(sh=h,rh=l):(sh!==h||rh!==l)&&nr()},rt,"DOMContentLoaded",Zi,q,"load",Zi,q,"resize",nr],Xr(Lt),G.forEach(function(h){return h.enable(0,1)}),a=0;a<Y.length;a+=3)Hr(Rt,Y[a],Y[a+1]),Hr(Rt,Y[a],Y[a+2])}},o.config=function(i){"limitCallbacks"in i&&(sa=!!i.limitCallbacks);var s=i.syncInterval;s&&clearInterval(Vr)||(Vr=s)&&setInterval(vh,s),"ignoreMobileResize"in i&&(oh=o.isTouch===1&&i.ignoreMobileResize),"autoRefreshEvents"in i&&(Xr(Rt)||Xr(Lt,i.autoRefreshEvents||"none"),ah=(i.autoRefreshEvents+"").indexOf("resize")===-1)},o.scrollerProxy=function(i,s){var r=ne(i),n=Y.indexOf(r),a=Gi(r);~n&&Y.splice(n,a?6:2),s&&(a?Ge.unshift(q,s,ut,s,Oe,s):Ge.unshift(r,s))},o.clearMatchMedia=function(i){G.forEach(function(s){return s._ctx&&s._ctx.query===i&&s._ctx.kill(!0,!0)})},o.isInViewport=function(i,s,r){var n=(ke(i)?ne(i):i).getBoundingClientRect(),a=n[r?Yi:Hi]*s||0;return r?n.right-a>0&&n.left+a<q.innerWidth:n.bottom-a>0&&n.top+a<q.innerHeight},o.positionInViewport=function(i,s,r){ke(i)&&(i=ne(i));var n=i.getBoundingClientRect(),a=n[r?Yi:Hi],h=s==null?a/2:s in qr?qr[s]*a:~s.indexOf("%")?parseFloat(s)*a/100:parseFloat(s)||0;return r?(n.left+h)/q.innerWidth:(n.top+h)/q.innerHeight},o.killAll=function(i){if(G.slice(0).forEach(function(r){return r.vars.id!=="ScrollSmoother"&&r.kill()}),i!==!0){var s=$i.killAll||[];$i={},s.forEach(function(r){return r()})}},o}();j.version="3.11.4",j.saveStyles=function(o){return o?Ir(o).forEach(function(t){if(t&&t.style){var e=pe.indexOf(t);e>=0&&pe.splice(e,5),pe.push(t,t.style.cssText,t.getBBox&&t.getAttribute("transform"),D.core.getCache(t),ea())}}):pe},j.revert=function(o,t){return fa(!o,t)},j.create=function(o,t){return new j(o,t)},j.refresh=function(o){return o?nr():(vs||j.register())&&Zi(!0)},j.update=function(o){return++Y.cache&&Mi(o===!0?2:0)},j.clearScrollMemory=Th,j.maxScroll=function(o,t){return Ei(o,t?Yt:Tt)},j.getScrollFunc=function(o,t){return Pi(ne(o),t?Yt:Tt)},j.getById=function(o){return ca[o]},j.getAll=function(){return G.filter(function(o){return o.vars.id!=="ScrollSmoother"})},j.isScrolling=function(){return!!Re},j.snapDirectional=ua,j.addEventListener=function(o,t){var e=$i[o]||($i[o]=[]);~e.indexOf(t)||e.push(t)},j.removeEventListener=function(o,t){var e=$i[o],i=e&&e.indexOf(t);i>=0&&e.splice(i,1)},j.batch=function(o,t){var e=[],i={},s=t.interval||.016,r=t.batchMax||1e9,n=function(l,u){var f=[],c=[],d=D.delayedCall(s,function(){u(f,c),f=[],c=[]}).pause();return function(_){f.length||d.restart(!0),f.push(_.trigger),c.push(_),r<=f.length&&d.progress(1)}},a;for(a in t)i[a]=a.substr(0,2)==="on"&&qt(t[a])&&a!=="onRefreshInit"?n(a,t[a]):t[a];return qt(r)&&(r=r(),Lt(j,"refresh",function(){return r=t.batchMax()})),Ir(o).forEach(function(h){var l={};for(a in i)l[a]=i[a];l.trigger=h,e.push(j.create(l))}),e};var Ch=function(t,e,i,s){return e>s?t(s):e<0&&t(0),i>s?(s-e)/(i-e):i<0?e/(e-i):1},ga=function o(t,e){e===!0?t.style.removeProperty("touch-action"):t.style.touchAction=e===!0?"auto":e?"pan-"+e+(yt.isTouch?" pinch-zoom":""):"none",t===Oe&&o(ut,e)},sn={auto:1,scroll:1},nc=function(t){var e=t.event,i=t.target,s=t.axis,r=(e.changedTouches?e.changedTouches[0]:e).target,n=r._gsap||D.core.getCache(r),a=$t(),h;if(!n._isScrollT||a-n._isScrollT>2e3){for(;r&&r!==ut&&(r.scrollHeight<=r.clientHeight&&r.scrollWidth<=r.clientWidth||!(sn[(h=De(r)).overflowY]||sn[h.overflowX]));)r=r.parentNode;n._isScroll=r&&r!==i&&!Gi(r)&&(sn[(h=De(r)).overflowY]||sn[h.overflowX]),n._isScrollT=a}(n._isScroll||s==="x")&&(e.stopPropagation(),e._gsapAllow=!0)},Ah=function(t,e,i,s){return yt.create({target:t,capture:!0,debounce:!1,lockAxis:!0,type:e,onWheel:s=s&&nc,onPress:s,onDrag:s,onScroll:s,onEnable:function(){return i&&Lt(rt,yt.eventTypes[0],kh,!1,!0)},onDisable:function(){return Rt(rt,yt.eventTypes[0],kh,!0)}})},ac=/(input|label|select|textarea)/i,Oh,kh=function(t){var e=ac.test(t.target.tagName);(e||Oh)&&(t._gsapAllow=!0,Oh=e)},oc=function(t){Gr(t)||(t={}),t.preventDefault=t.isNormalizer=t.allowClicks=!0,t.type||(t.type="wheel,touch"),t.debounce=!!t.debounce,t.id=t.id||"normalizer";var e=t,i=e.normalizeScrollX,s=e.momentum,r=e.allowNestedScroll,n,a,h=ne(t.target)||Oe,l=D.core.globals().ScrollSmoother,u=l&&l.get(),f=Ri&&(t.content&&ne(t.content)||u&&t.content!==!1&&!u.smooth()&&u.content()),c=Pi(h,Tt),d=Pi(h,Yt),_=1,p=(yt.isTouch&&q.visualViewport?q.visualViewport.scale*q.visualViewport.width:q.outerWidth)/q.innerWidth,g=0,m=qt(s)?function(){return s(n)}:function(){return s||2.8},v,T,x=Ah(h,t.type,!0,r),b=function(){return T=!1},P=Ye,w=Ye,E=function(){a=Ei(h,Tt),w=bs(Ri?1:0,a),i&&(P=bs(0,Ei(h,Yt))),v=ji},R=function(){f._gsap.y=Qs(parseFloat(f._gsap.y)+c.offset)+"px",f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+parseFloat(f._gsap.y)+", 0, 1)",c.offset=c.cacheID=0},M=function(){if(T){requestAnimationFrame(b);var X=Qs(n.deltaY/2),N=w(c.v-X);if(f&&N!==c.v+c.offset){c.offset=N-c.v;var J=Qs((parseFloat(f&&f._gsap.y)||0)-c.offset);f.style.transform="matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, "+J+", 0, 1)",f._gsap.y=J+"px",c.cacheID=Y.cache,Mi()}return!0}c.offset&&R(),T=!0},A,k,W,U,F=function(){E(),A.isActive()&&A.vars.scrollY>a&&(c()>a?A.progress(1)&&c(a):A.resetTo("scrollY",a))};return f&&D.set(f,{y:"+=0"}),t.ignoreCheck=function(O){return Ri&&O.type==="touchmove"&&M()||_>1.05&&O.type!=="touchstart"||n.isGesturing||O.touches&&O.touches.length>1},t.onPress=function(){var O=_;_=Qs((q.visualViewport&&q.visualViewport.scale||1)/p),A.pause(),O!==_&&ga(h,_>1.01?!0:i?!1:"x"),k=d(),W=c(),E(),v=ji},t.onRelease=t.onGestureStart=function(O,X){if(c.offset&&R(),!X)U.restart(!0);else{Y.cache++;var N=m(),J,y;i&&(J=d(),y=J+N*.05*-O.velocityX/.227,N*=Ch(d,J,y,Ei(h,Yt)),A.vars.scrollX=P(y)),J=c(),y=J+N*.05*-O.velocityY/.227,N*=Ch(c,J,y,Ei(h,Tt)),A.vars.scrollY=w(y),A.invalidate().duration(N).play(.01),(Ri&&A.vars.scrollY>=a||J>=a-1)&&D.to({},{onUpdate:F,duration:N})}},t.onWheel=function(){A._ts&&A.pause(),$t()-g>1e3&&(v=0,g=$t())},t.onChange=function(O,X,N,J,y){if(ji!==v&&E(),X&&i&&d(P(J[2]===X?k+(O.startX-O.x):d()+X-J[1])),N){c.offset&&R();var Et=y[2]===N,Vt=Et?W+O.startY-O.y:c()+N-y[1],Fe=w(Vt);Et&&Vt!==Fe&&(W+=Fe-Vt),c(Fe)}(N||X)&&Mi()},t.onEnable=function(){ga(h,i?!1:"x"),j.addEventListener("refresh",F),Lt(q,"resize",F),c.smooth&&(c.target.style.scrollBehavior="auto",c.smooth=d.smooth=!1),x.enable()},t.onDisable=function(){ga(h,!0),Rt(q,"resize",F),j.removeEventListener("refresh",F),x.kill()},t.lockAxis=t.lockAxis!==!1,n=new yt(t),n.iOS=Ri,Ri&&!c()&&c(1),Ri&&D.ticker.add(Ye),U=n._dc,A=D.to(n,{ease:"power4",paused:!0,scrollX:i?"+=0.1":"+=0",scrollY:"+=0.1",onComplete:U.vars.onComplete}),n};j.sort=function(o){return G.sort(o||function(t,e){return(t.vars.refreshPriority||0)*-1e6+t.start-(e.start+(e.vars.refreshPriority||0)*-1e6)})},j.observe=function(o){return new yt(o)},j.normalizeScroll=function(o){if(typeof o>"u")return fe;if(o===!0&&fe)return fe.enable();if(o===!1)return fe&&fe.kill();var t=o instanceof yt?o:oc(o);return fe&&fe.target===t.target&&fe.kill(),Gi(t.target)&&(fe=t),t},j.core={_getVelocityProp:Kn,_inputObserver:Ah,_scrollers:Y,_proxies:Ge,bridge:{ss:function(){Re||qi("scrollStart"),Re=$t()},ref:function(){return Ut}}},fh()&&D.registerPlugin(j),(()=>{function o(...i){const s=i.length;for(let r=0;r<s;r++){const n=i[r];n.nodeType===1||n.nodeType===11?this.appendChild(n):this.appendChild(document.createTextNode(String(n)))}}function t(...i){for(;this.lastChild;)this.removeChild(this.lastChild);i.length&&this.append(...i)}function e(...i){const s=this.parentNode;let r=i.length;if(s)for(r||s.removeChild(this);r--;){let n=i[r];typeof n!="object"?n=this.ownerDocument.createTextNode(n):n.parentNode&&n.parentNode.removeChild(n),r?s.insertBefore(this.previousSibling,n):s.replaceChild(n,this)}}typeof Element<"u"&&(Element.prototype.append||(Element.prototype.append=o,DocumentFragment.prototype.append=o),Element.prototype.replaceChildren||(Element.prototype.replaceChildren=t,DocumentFragment.prototype.replaceChildren=t),Element.prototype.replaceWith||(Element.prototype.replaceWith=e,DocumentFragment.prototype.replaceWith=e))})();function Qi(o,t){return Object.getOwnPropertyNames(Object(o)).reduce((e,i)=>{const s=Object.getOwnPropertyDescriptor(Object(o),i),r=Object.getOwnPropertyDescriptor(Object(t),i);return Object.defineProperty(e,i,r||s)},{})}function or(o){return typeof o=="string"}function ma(o){return Array.isArray(o)}function rn(o={}){const t=Qi(o);let e;return t.types!==void 0?e=t.types:t.split!==void 0&&(e=t.split),e!==void 0&&(t.types=(or(e)||ma(e)?String(e):"").split(",").map(i=>String(i).trim()).filter(i=>/((line)|(word)|(char))/i.test(i))),(t.absolute||t.position)&&(t.absolute=t.absolute||/absolute/.test(o.position)),t}function xa(o){const t=or(o)||ma(o)?String(o):"";return{none:!t,lines:/line/i.test(t),words:/word/i.test(t),chars:/char/i.test(t)}}function nn(o){return o!==null&&typeof o=="object"}function hc(o){return nn(o)&&/^(1|3|11)$/.test(o.nodeType)}function lc(o){return typeof o=="number"&&o>-1&&o%1===0}function uc(o){return nn(o)&&lc(o.length)}function Ki(o){return ma(o)?o:o==null?[]:uc(o)?Array.prototype.slice.call(o):[o]}function Dh(o){let t=o;return or(o)&&(/^(#[a-z]\w+)$/.test(o.trim())?t=document.getElementById(o.trim().slice(1)):t=document.querySelectorAll(o)),Ki(t).reduce((e,i)=>[...e,...Ki(i).filter(hc)],[])}const{entries:cc,keys:Xc,values:Gc}=Object,an="_splittype",hi={};let dc=0;function He(o,t,e){if(!nn(o))return console.warn("[data.set] owner is not an object"),null;const i=o[an]||(o[an]=++dc),s=hi[i]||(hi[i]={});return e===void 0?t&&Object.getPrototypeOf(t)===Object.prototype&&(hi[i]={...s,...t}):t!==void 0&&(s[t]=e),e}function Ji(o,t){const e=nn(o)?o[an]:null,i=e&&hi[e]||{};return t===void 0?i:i[t]}function Lh(o){const t=o&&o[an];t&&(delete o[t],delete hi[t])}function fc(){cc(hi).forEach(([o,{isRoot:t,isSplit:e}])=>{(!t||!e)&&(hi[o]=null,delete hi[o])})}function pc(o,t=" "){return(o?String(o):"").trim().replace(/\s+/g," ").split(t)}const ya="\\ud800-\\udfff",Fh="\\u0300-\\u036f\\ufe20-\\ufe23",zh="\\u20d0-\\u20f0",Ih="\\ufe0e\\ufe0f",_c=`[${ya}]`,va=`[${Fh}${zh}]`,ba="\\ud83c[\\udffb-\\udfff]",gc=`(?:${va}|${ba})`,Uh=`[^${ya}]`,Vh="(?:\\ud83c[\\udde6-\\uddff]){2}",Nh="[\\ud800-\\udbff][\\udc00-\\udfff]",Wh="\\u200d",Bh=`${gc}?`,Xh=`[${Ih}]?`,mc="(?:"+Wh+"(?:"+[Uh,Vh,Nh].join("|")+")"+Xh+Bh+")*",xc=Xh+Bh+mc,yc=`(?:${[`${Uh}${va}?`,va,Vh,Nh,_c].join("|")}
)`,vc=RegExp(`${ba}(?=${ba})|${yc}${xc}`,"g"),bc=RegExp(`[${[Wh,ya,Fh,zh,Ih].join("")}]`);function wc(o){return o.split("")}function Gh(o){return bc.test(o)}function Tc(o){return o.match(vc)||[]}function Sc(o){return Gh(o)?Tc(o):wc(o)}function Pc(o){return o==null?"":String(o)}function Rc(o,t=""){return o=Pc(o),o&&or(o)&&!t&&Gh(o)?Sc(o):o.split(t)}function wa(o,t){const e=document.createElement(o);return t&&Object.keys(t).forEach(i=>{const s=t[i],r=or(s)?s.trim():s;r===null||r===""||(i==="children"?e.append(...Ki(r)):e.setAttribute(i,r))}),e}var Ta={splitClass:"",lineClass:"line",wordClass:"word",charClass:"char",types:["lines","words","chars"],absolute:!1,tagName:"div"};function Ec(o,t){t=Qi(Ta,t);const e=xa(t.types),i=t.tagName,s=o.nodeValue,r=document.createDocumentFragment();let n=[],a=[];return/^\s/.test(s)&&r.append(" "),n=pc(s).reduce((h,l,u,f)=>{let c,d;return e.chars&&(d=Rc(l).map(_=>{const p=wa(i,{class:`${t.splitClass} ${t.charClass}`,style:"display: inline-block;",children:_});return He(p,"isChar",!0),a=[...a,p],p})),e.words||e.lines?(c=wa(i,{class:`${t.wordClass} ${t.splitClass}`,style:`display: inline-block; ${e.words&&t.absolute?"position: relative;":""}`,children:e.chars?d:l}),He(c,{isWord:!0,isWordStart:!0,isWordEnd:!0}),r.appendChild(c)):d.forEach(_=>{r.appendChild(_)}),u<f.length-1&&r.append(" "),e.words?h.concat(c):h},[]),/\s$/.test(s)&&r.append(" "),o.replaceWith(r),{words:n,chars:a}}function Yh(o,t){const e=o.nodeType,i={words:[],chars:[]};if(!/(1|3|11)/.test(e))return i;if(e===3&&/\S/.test(o.nodeValue))return Ec(o,t);const s=Ki(o.childNodes);if(s.length&&(He(o,"isSplit",!0),!Ji(o).isRoot)){o.style.display="inline-block",o.style.position="relative";const r=o.nextSibling,n=o.previousSibling,a=o.textContent||"",h=r?r.textContent:" ",l=n?n.textContent:" ";He(o,{isWordEnd:/\s$/.test(a)||/^\s/.test(h),isWordStart:/^\s/.test(a)||/\s$/.test(l)})}return s.reduce((r,n)=>{const{words:a,chars:h}=Yh(n,t);return{words:[...r.words,...a],chars:[...r.chars,...h]}},i)}function Mc(o,t,e,i){if(!e.absolute)return{top:t?o.offsetTop:null};const s=o.offsetParent,[r,n]=i;let a=0,h=0;if(s&&s!==document.body){const p=s.getBoundingClientRect();a=p.x+r,h=p.y+n}const{width:l,height:u,x:f,y:c}=o.getBoundingClientRect(),d=c+n-h,_=f+r-a;return{width:l,height:u,top:d,left:_}}function Hh(o){Ji(o).isWord?(Lh(o),o.replaceWith(...o.childNodes)):Ki(o.children).forEach(t=>Hh(t))}const Cc=()=>document.createDocumentFragment();function Ac(o,t,e){const i=xa(t.types),s=t.tagName,r=o.getElementsByTagName("*"),n=[];let a=[],h=null,l,u,f,c=[];const d=o.parentElement,_=o.nextElementSibling,p=Cc(),g=window.getComputedStyle(o),m=g.textAlign,T=parseFloat(g.fontSize)*.2;return t.absolute&&(f={left:o.offsetLeft,top:o.offsetTop,width:o.offsetWidth},u=o.offsetWidth,l=o.offsetHeight,He(o,{cssWidth:o.style.width,cssHeight:o.style.height})),Ki(r).forEach(x=>{const b=x.parentElement===o,{width:P,height:w,top:E,left:R}=Mc(x,b,t,e);/^br$/i.test(x.nodeName)||(i.lines&&b&&((h===null||E-h>=T)&&(h=E,n.push(a=[])),a.push(x)),t.absolute&&He(x,{top:E,left:R,width:P,height:w}))}),d&&d.removeChild(o),i.lines&&(c=n.map(x=>{const b=wa(s,{class:`${t.splitClass} ${t.lineClass}`,style:`display: block; text-align: ${m}; width: 100%;`});He(b,"isLine",!0);const P={height:0,top:1e4};return p.appendChild(b),x.forEach((w,E,R)=>{const{isWordEnd:M,top:A,height:k}=Ji(w),W=R[E+1];P.height=Math.max(P.height,k),P.top=Math.min(P.top,A),b.appendChild(w),M&&Ji(W).isWordStart&&b.append(" ")}),t.absolute&&He(b,{height:P.height,top:P.top}),b}),i.words||Hh(p),o.replaceChildren(p)),t.absolute&&(o.style.width=`${o.style.width||u}px`,o.style.height=`${l}px`,Ki(r).forEach(x=>{const{isLine:b,top:P,left:w,width:E,height:R}=Ji(x),M=Ji(x.parentElement),A=!b&&M.isLine;x.style.top=`${A?P-M.top:P}px`,x.style.left=b?`${f.left}px`:`${w-(A?f.left:0)}px`,x.style.height=`${R}px`,x.style.width=b?`${f.width}px`:`${E}px`,x.style.position="absolute"})),d&&(_?d.insertBefore(o,_):d.appendChild(o)),c}let Es=Qi(Ta,{});class Ms{static get data(){return hi}static get defaults(){return Es}static set defaults(t){Es=Qi(Es,rn(t))}static setDefaults(t){return Es=Qi(Es,rn(t)),Ta}static revert(t){Dh(t).forEach(e=>{const{isSplit:i,html:s,cssWidth:r,cssHeight:n}=Ji(e);i&&(e.innerHTML=s,e.style.width=r||"",e.style.height=n||"",Lh(e))})}static create(t,e){return new Ms(t,e)}constructor(t,e){this.isSplit=!1,this.settings=Qi(Es,rn(e)),this.elements=Dh(t),this.split()}split(t){this.revert(),this.elements.forEach(s=>{He(s,"html",s.innerHTML)}),this.lines=[],this.words=[],this.chars=[];const e=[window.pageXOffset,window.pageYOffset];t!==void 0&&(this.settings=Qi(this.settings,rn(t)));const i=xa(this.settings.types);i.none||(this.elements.forEach(s=>{He(s,"isRoot",!0);const{words:r,chars:n}=Yh(s,this.settings);this.words=[...this.words,...r],this.chars=[...this.chars,...n]}),this.elements.forEach(s=>{if(i.lines||this.settings.absolute){const r=Ac(s,this.settings,e);this.lines=[...this.lines,...r]}}),this.isSplit=!0,window.scrollTo(e[0],e[1]),fc())}revert(){this.isSplit&&(this.lines=null,this.words=null,this.chars=null,this.isSplit=!1),Ms.revert(this.elements)}}var Oc=`precision mediump float;

varying vec3 vVertexPosition;\r
varying vec2 vTextureCoord;

varying float distanceZ;

uniform sampler2D planeTexture;

void main(void) {

    
    vec3 color = vec3(0.2, 0.3, 0.7);\r
    color.r = texture2D(planeTexture, vTextureCoord).r;\r
    color.g = texture2D(planeTexture, vTextureCoord).g;\r
    color.b = texture2D(planeTexture, vTextureCoord).b;\r
    if (distanceZ > 0.0) {\r
        color += 0.145 * distanceZ * 30.0;\r
    }

    gl_FragColor = vec4(color, 1.0);\r
}`,kc=`precision mediump float;

attribute vec3 aVertexPosition;\r
attribute vec2 aTextureCoord;

uniform mat4 uMVMatrix;\r
uniform mat4 uPMatrix;\r
uniform mat4 planeTextureMatrix;\r
uniform float time;

varying vec3 vVertexPosition;\r
varying vec2 vTextureCoord;\r
varying float distanceZ;

uniform float uScrollEffect;

void main() {\r
    vec3 vertexPosition = aVertexPosition;

    vertexPosition.z += cos(time + -uScrollEffect * 0.02 + vertexPosition.y * 2.5) * (uScrollEffect * 0.001);\r
    vertexPosition.y += sin(-uScrollEffect / 300.0);

    gl_Position = uPMatrix * uMVMatrix * vec4(vertexPosition, 1.0);

    
    distanceZ = vertexPosition.z;\r
    vVertexPosition = vertexPosition;\r
    vTextureCoord = (planeTextureMatrix * vec4(aTextureCoord, 0.0, 1.0)).xy;\r
}`;Bi.registerPlugin(j);class Dc{constructor(){rs(this,"curtains");rs(this,"lenis");rs(this,"planes",[]);rs(this,"scrollEffect",0);rs(this,"DOM",{h1:document.querySelector("h1"),planeElements:[...document.querySelectorAll('[data-animation="image"]')],heroImage:document.querySelector(".project_header_img"),heroWebGlPlane:null,paragraphs:[...document.querySelectorAll('[data-animation="paragraph"]')],wheel:document.querySelector(".wheel_icon"),wheelWrapper:document.querySelector(".wheel_wrapper"),pageWrap:document.querySelector(".page-wrapper")});rs(this,"animationState",{});this.init()}async init(){await this.createLoaderAnimation(),this.createCurtains(),this.setupCurtains(),this.createLenis(),this.createPlanes(),this.createPageAnimations()}createLoaderAnimation(){return new Promise(e=>{this.animationState.pageLoaderTimeline=Bi.timeline(),this.animationState.pageLoaderTimeline.set(this.DOM.wheelWrapper,{xPercent:-50,yPercent:-50,x:innerWidth/2,y:innerHeight/2,scale:1.2}),this.animationState.pageLoaderTimeline.to(this.DOM.wheelWrapper,{autoAlpha:1,rotation:360*3,duration:2}),this.animationState.pageLoaderTimeline.to(this.DOM.wheelWrapper,{xPercent:0,yPercent:-100,x:20,y:innerHeight-20,scale:.75,duration:1,onComplete:e})})}createCurtains(){this.curtains=new sl({container:"canvas",pixelRatio:Math.min(1.5,window.devicePixelRatio),watchScroll:!1})}setupCurtains(){this.curtains.onRender(()=>{this.scrollEffect=this.curtains.lerp(this.scrollEffect,0,.075)}).onScroll(()=>{const t=this.curtains.getScrollDeltas();t.y=-t.y,t.y>60?t.y=60:t.y<-60&&(t.y=-60),Math.abs(t.y)>Math.abs(this.scrollEffect)&&(this.scrollEffect=this.curtains.lerp(this.scrollEffect,t.y,.5))}).onError(()=>{document.body.classList.add("no-curtains","planes-loaded")}).onContextLost(()=>{this.curtains.restoreContext()})}createLenis(){this.curtains.disableDrawing(),this.lenis=new jh({duration:2.5,easing:t=>Math.min(1,1.001-Math.pow(2,-10*t)),direction:"vertical",gestureDirection:"vertical",smooth:!0,mouseMultiplier:1,smoothTouch:!1,touchMultiplier:2,infinite:!1}),this.lenis.on("scroll",({scroll:t})=>{this.curtains.updateScrollValues(0,t),this.curtains.needRender()}),Bi.ticker.add(t=>{this.lenis.raf(t*1e3)})}createPlanes(){const t={vertexShader:kc,fragmentShader:Oc,widthSegments:20,heightSegments:20,uniforms:{scrollEffect:{name:"uScrollEffect",type:"1f",value:0}}};for(let e=0;e<this.DOM.planeElements.length;e++){const i=new Ol(this.curtains,this.DOM.planeElements[e],t);this.planes.push(i),this.handlePlanes(i)}this.DOM.heroWebGlPlane=this.planes[0]}handlePlanes(t){t.setRenderOrder(-10),t.onReady(()=>{t===this.planes[this.planes.length-1]&&document.body.classList.add("planes-loaded")}).onRender(()=>{this.animationState.pageIntroTimeline.isActive()||(t.uniforms.scrollEffect.value=this.scrollEffect)})}createPageAnimations(){this.animationState.pageIntroTimeline=Bi.timeline({}),this.animationState.pageIntroValues={translationY:1e3,wiggle:1500},this.animationState.pageIntroTimeline.set(this.DOM.h1,{autoAlpha:1}),this.animationState.pageIntroTimeline.to(this.animationState.pageIntroValues,{translationY:0,duration:1.5,onUpdate:()=>{this.DOM.heroWebGlPlane.relativeTranslation.y=this.animationState.pageIntroValues.translationY,this.curtains.needRender()}},"start"),this.animationState.pageIntroTimeline.to(this.animationState.pageIntroValues,{wiggle:0,duration:2,onUpdate:()=>{this.DOM.heroWebGlPlane.uniforms.scrollEffect.value=this.scrollEffect+this.animationState.pageIntroValues.wiggle*.2,this.curtains.needRender()}},"start");const t=new Ms(this.DOM.h1,{types:"lines, words",lineClass:"line-wrapper"});this.animationState.pageIntroTimeline.from(t.words,{yPercent:100,duration:.6,stagger:.075},"start+=1.5"),this.animationState.pageIntroTimeline.to(this.DOM.wheel,{rotate:360*4,scrollTrigger:{trigger:this.DOM.pageWrap,scrub:1,start:"top top",end:"+=10000"}}),this.DOM.paragraphs.forEach(e=>{const i=new Ms(e,{types:"lines",lineClass:"line-wrapper"}),s=new Ms(i.lines,{types:"lines"});Bi.set(e,{autoAlpha:1}),Bi.from(s.lines,{autoAlpha:0,yPercent:150,stagger:.1,duration:.75,ease:"power.out4",delay:.5,scrollTrigger:{trigger:e,start:"top 90%",once:!0}})})}}window.addEventListener("load",()=>{new Dc})});
